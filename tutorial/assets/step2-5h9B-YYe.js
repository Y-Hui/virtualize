import{j as e,r as d}from"./index-ClCruHti.js";import{m as j,a as v,A as w}from"./mock-C2rsIW0h.js";function x(s){return"key"in s?s.key:s.dataIndex}function C(s,c,l){const{render:n}=l,i=c;if("dataIndex"in l){const u=l.dataIndex;return typeof n!="function"?String(i[u]):n(i[u],c,s)}return(n==null?void 0:n(c,c,s))??null}function N(s){const{rowKey:c,dataSource:l,columns:n}=s,i=e.jsx("colgroup",{children:n.map((r,t)=>{const a=x(r);return e.jsx("col",{style:{width:r.width,minWidth:r.minWidth}},typeof a=="symbol"?t:a)})}),u=d.useRef(null),h=d.useRef(null);return d.useEffect(()=>{const r=u.current,t=h.current;if(r==null||t==null)return;const a=[r,t],y=o=>{typeof window.requestAnimationFrame=="function"?window.requestAnimationFrame(()=>{o()}):o()},m=new Set,f=o=>{const p=o.target;if(m.has(p)){m.delete(p);return}a.forEach(b=>{b!==p&&(m.add(b),y(()=>{b.scrollLeft=p.scrollLeft}))})};return a.forEach(o=>{o.addEventListener("scroll",f)}),()=>{a.forEach(o=>{o.removeEventListener("scroll",f)})}},[]),e.jsxs("div",{className:"virtual-table-wrapper","data-step":"2",children:[e.jsx("div",{ref:u,className:"virtual-table-header-wrapper",children:e.jsxs("table",{className:"virtual-table-header-root",children:[i,e.jsx("thead",{className:"virtual-table-header",children:e.jsx("tr",{children:n.map((r,t)=>{const a=x(r);return e.jsx("th",{className:"virtual-table-header-cell",children:r.title},typeof a=="symbol"?t:a)})})})]})}),e.jsx("div",{ref:h,className:"virtual-table-body-wrapper",children:e.jsxs("table",{className:"virtual-table-body-root",children:[i,e.jsx("tbody",{className:"virtual-table-body",children:l==null?void 0:l.map((r,t)=>{const a=r,y=a[c];return e.jsx("tr",{children:n.map((m,f)=>{const o=x(m);return e.jsx("td",{className:"virtual-table-cell",children:C(t,a,m)},typeof o=="symbol"?f:o)})},y)})})]})})]})}const E=()=>{const[s,c]=d.useState(100),[l,n]=d.useState(100),[i,u]=d.useState(()=>j(s)),[h,r]=d.useState(()=>v(l));return e.jsxs(e.Fragment,{children:[e.jsx(w,{dataCount:s,onDataCountChange:t=>{c(t),u(j(t))},columnCount:l,onColumnCountChange:t=>{n(t),r(v(t))}}),e.jsx(N,{rowKey:"key",columns:h,dataSource:i})]})};export{E as default};
