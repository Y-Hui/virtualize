import{j as e,r as u}from"./index-Dvxm1fsL.js";import{m as j,a as v,A as w}from"./mock-DHPGRMEo.js";function b(a){return"key"in a?a.key:a.dataIndex}function C(a,l,o){const{render:s}=o,c=l;if("dataIndex"in o){const i=o.dataIndex;return typeof s!="function"?String(c[i]):s(c[i],l,a)}return(s==null?void 0:s(l,l,a))??null}function N(a){const{rowKey:l,dataSource:o,columns:s}=a,c=e.jsx("colgroup",{children:s.map(r=>{const t=b(r);return e.jsx("col",{style:{width:r.width,minWidth:r.minWidth}},t)})}),i=u.useRef(null),m=u.useRef(null);return u.useEffect(()=>{const r=i.current,t=m.current;if(r==null||t==null)return;const d=[r,t],x=n=>{typeof window.requestAnimationFrame=="function"?window.requestAnimationFrame(()=>{n()}):n()},h=new Set,f=n=>{const p=n.target;if(h.has(p)){h.delete(p);return}d.forEach(y=>{y!==p&&(h.add(y),x(()=>{y.scrollLeft=p.scrollLeft}))})};return d.forEach(n=>{n.addEventListener("scroll",f)}),()=>{d.forEach(n=>{n.removeEventListener("scroll",f)})}},[]),e.jsxs("div",{className:"virtual-table-wrapper","data-step":"2",children:[e.jsx("div",{ref:i,className:"virtual-table-header-wrapper",children:e.jsxs("table",{className:"virtual-table-header-root",children:[c,e.jsx("thead",{className:"virtual-table-header",children:e.jsx("tr",{children:s.map(r=>{const t=b(r);return e.jsx("th",{className:"virtual-table-header-cell",children:r.title},t)})})})]})}),e.jsx("div",{ref:m,className:"virtual-table-body-wrapper",children:e.jsxs("table",{className:"virtual-table-body-root",children:[c,e.jsx("tbody",{className:"virtual-table-body",children:o==null?void 0:o.map((r,t)=>{const d=r,x=d[l];return e.jsx("tr",{children:s.map((h,f)=>{const n=b(h);return e.jsx("td",{className:"virtual-table-cell",children:C(t,d,h)},typeof n=="symbol"?f:n)})},x)})})]})})]})}const E=()=>{const[a,l]=u.useState(100),[o,s]=u.useState(100),[c,i]=u.useState(()=>j(a)),[m,r]=u.useState(()=>v(o));return e.jsxs(e.Fragment,{children:[e.jsx(w,{dataCount:a,onDataCountChange:t=>{l(t),i(j(t))},columnCount:o,onColumnCountChange:t=>{s(t),r(v(t))}}),e.jsx(N,{rowKey:"key",columns:m,dataSource:c})]})};export{E as default};
