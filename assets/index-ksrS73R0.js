import{r as E,j as c,C as x}from"./index-BVhD4ibV.js";import{c as I,a as z,u as O,h as w,V as A}from"./index-CgSmnyG9.js";import{t as L}from"./table-selection-DYjQeK--.js";import{t as V,c as F,a as D,b as H,d as $}from"./index-DXnkOYPm.js";import{P as K,F as S,C as P,D as M}from"./Table-CjKyXJ4T.js";import{a as U,R as W,E as R}from"./index-BKyhSQp0.js";const B=t=>{const{position:r,className:u,defaultCurrent:i=1,defaultPageSize:a=10,onChange:e,current:n,pageSize:b,...l}=t,p=((r==null?void 0:r[0])??"bottomRight").toLowerCase().replace(/top|bottom/,""),o="current"in t,s="pageSize"in t,[m,C]=E.useState(i),[d,f]=E.useState(a),N=o?n:m,h=o?b:d,T=(y,k)=>{o||C(y),s||f(k),e==null||e(y,k)};return c.jsx(K,{showSizeChanger:!0,...l,current:N,pageSize:h,className:I("virtual-table-pagination",`virtual-table-pagination-${p}`,u),onChange:T})};function G(t,r){if(r===!1)return t;const{position:u=["bottomRight"],...i}=r??{},a=u[0];return a==="none"?t:{...t,render(e){const n=E.createElement(B,{...i,key:"__pagination__"});return a.includes("top")?c.jsxs(c.Fragment,{children:[n,e]}):c.jsxs(c.Fragment,{children:[e,n]})}}}const Y=z(G),j=[S.SELECTION_ALL,S.SELECTION_INVERT,S.SELECTION_NONE];function q(t){const{checked:r,onChange:u,indeterminate:i,selections:a,onClear:e,onSelectAll:n,onSelectInvert:b,allKeys:l,disabled:g}=t,{locale:p}=E.useContext(x.ConfigContext),o=p==null?void 0:p.Table,s={[S.SELECTION_ALL]:{key:S.SELECTION_ALL,label:o==null?void 0:o.selectAll,onClick:n},[S.SELECTION_INVERT]:{key:S.SELECTION_INVERT,label:o==null?void 0:o.selectInvert,onClick:b},[S.SELECTION_NONE]:{key:S.SELECTION_NONE,label:o==null?void 0:o.selectNone,onClick:e}},m=a===!0?j:Array.isArray(a)?a:void 0;return c.jsxs("div",{className:I("virtual-table-selection"),children:[c.jsx(P,{checked:r,indeterminate:i,disabled:g,onChange:u}),m&&c.jsx("div",{className:"virtual-table-selection-extra",children:c.jsx(M,{menu:{items:m.reduce((C,d)=>(typeof d=="string"?j.includes(d)&&C.push(s[d]):"key"in d&&C.push({key:d.key,label:d.text,onClick:()=>{var f;(f=d.onSelect)==null||f.call(d,l)}}),C),[])},children:c.jsx(U,{})})})]})}function J(t){if(t==null)return L();const{type:r,selections:u,columnWidth:i,columnTitle:a,...e}=t,n=r==="checkbox";return L({...e,component:Q,multiple:n,columnWidth:i??(u==null||!n?32:48),columnTitle:u!=null?(b,l)=>{if(a!=null){if(E.isValidElement(a))return a;if(typeof a=="function")return a(b,l)}return n?c.jsx(q,{checked:l.value,indeterminate:l.indeterminate,disabled:l.disabled,onChange:g=>{var p;(p=l.onChange)==null||p.call(l,g.target.checked,g.nativeEvent)},onSelectAll:l.onSelectAll,onSelectInvert:l.onSelectInvert,onClear:l.onClear,allKeys:l.allKeys,selections:u}):null}:void 0})}function Q(t){const{multiple:r,value:u,onChange:i,indeterminate:a,disabled:e}=t;return r?c.jsx(P,{checked:u,indeterminate:a,disabled:e,onChange:n=>i==null?void 0:i(n.target.checked,n.nativeEvent)}):c.jsx(W,{checked:u,disabled:e,onChange:n=>i==null?void 0:i(n.target.checked,n.nativeEvent)})}function X(t,r){if(typeof r=="number"&&Number.isFinite(r))return r;switch(t){case"small":return 39;case"large":return 65;case"middle":default:return 57}}const Z={disableResize:!0};function ee(t,r){const{className:u,size:i="middle",estimatedRowHeight:a,sticky:e,rowSelection:n,loading:b,bordered:l,pipeline:g,expandable:p,summary:o,pagination:s,onChange:m,storageKey:C,...d}=t,f=E.useRef({});E.useEffect(()=>{s!=null&&typeof s=="object"&&(f.current={...s,current:f.current.current??s.current,pageSize:f.current.pageSize??s.pageSize})},[s]);const N=E.useCallback(()=>{m==null||m(f.current)},[m]),h=s===!1||s==null?void 0:s.onChange,T=E.useCallback((v,_)=>{h==null||h(v,_),f.current={...f.current,current:v,pageSize:_},N()},[N,h]),y=O({pipeline:g,use:[J(n==null?void 0:{...n,extraColumnProps:Z}),V(p),F(C==null?void 0:{storageKey:C}),Y(s===!1?!1:{...s,onChange:T}),{priority:200,hook:D({loading:b})},{priority:200,hook:H({children:c.jsx(R,{image:R.PRESENTED_IMAGE_SIMPLE})})},{priority:200,hook:$(o==null?void 0:{summary:o})},{priority:200,hook:w()}]}),k=X(i,a);return c.jsx(A,{...d,pipeline:y,className:I(`virtual-table-${i}`,l&&"virtual-table-bordered",u),ref:r,estimatedRowHeight:k,stickyHeader:typeof e=="boolean"?e:e==null?void 0:e.offsetHeader})}const oe=E.forwardRef(ee);export{oe as V};
