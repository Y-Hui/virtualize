import{r as p,j as c,C as x}from"./index-8V3bJXfn.js";import{c as I,a as z,t as L,u as O,b as w,d as A,e as V,f as F,g as D,h as H,V as $}from"./table-selection-Bp60XWeH.js";import{P as K,F as b,C as P,D as M}from"./Table-ZGyDd_hG.js";import{b as U,R as W,E as R}from"./mock-gNvNgg34.js";const B=n=>{const{position:t,className:u,defaultCurrent:l=1,defaultPageSize:r=10,onChange:e,current:a,pageSize:C,...i}=n,E=((t==null?void 0:t[0])??"bottomRight").toLowerCase().replace(/top|bottom/,""),o="current"in n,s="pageSize"in n,[S,m]=p.useState(l),[d,f]=p.useState(r),N=o?a:S,h=o?C:d,T=(y,k)=>{o||m(y),s||f(k),e==null||e(y,k)};return c.jsx(K,{showSizeChanger:!0,...i,current:N,pageSize:h,className:I("virtual-table-pagination",`virtual-table-pagination-${E}`,u),onChange:T})};function G(n,t){if(t===!1)return n;const{position:u=["bottomRight"],...l}=t??{},r=u[0];return r==="none"?n:{...n,render(e){const a=p.createElement(B,{...l,key:"__pagination__"});return r.includes("top")?c.jsxs(c.Fragment,{children:[a,e]}):c.jsxs(c.Fragment,{children:[e,a]})}}}const Y=z(G),j=[b.SELECTION_ALL,b.SELECTION_INVERT,b.SELECTION_NONE];function q(n){const{checked:t,onChange:u,indeterminate:l,selections:r,onClear:e,onSelectAll:a,onSelectInvert:C,allKeys:i,disabled:g}=n,{locale:E}=p.useContext(x.ConfigContext),o=E==null?void 0:E.Table,s={[b.SELECTION_ALL]:{key:b.SELECTION_ALL,label:o==null?void 0:o.selectAll,onClick:a},[b.SELECTION_INVERT]:{key:b.SELECTION_INVERT,label:o==null?void 0:o.selectInvert,onClick:C},[b.SELECTION_NONE]:{key:b.SELECTION_NONE,label:o==null?void 0:o.selectNone,onClick:e}},S=r===!0?j:Array.isArray(r)?r:void 0;return c.jsxs("div",{className:I("virtual-table-selection"),children:[c.jsx(P,{checked:t,indeterminate:l,disabled:g,onChange:u}),S&&c.jsx("div",{className:"virtual-table-selection-extra",children:c.jsx(M,{menu:{items:S.reduce((m,d)=>(typeof d=="string"?j.includes(d)&&m.push(s[d]):"key"in d&&m.push({key:d.key,label:d.text,onClick:()=>{var f;(f=d.onSelect)==null||f.call(d,i)}}),m),[])},children:c.jsx(U,{})})})]})}function J(n){if(n==null)return L();const{type:t,selections:u,columnWidth:l,columnTitle:r,...e}=n,a=t==="checkbox";return L({...e,component:Q,multiple:a,columnWidth:l??(u==null||!a?32:48),columnTitle:u!=null?(C,i)=>{if(r!=null){if(p.isValidElement(r))return r;if(typeof r=="function")return r(C,i)}return a?c.jsx(q,{checked:i.value,indeterminate:i.indeterminate,disabled:i.disabled,onChange:g=>{var E;(E=i.onChange)==null||E.call(i,g.target.checked,g.nativeEvent)},onSelectAll:i.onSelectAll,onSelectInvert:i.onSelectInvert,onClear:i.onClear,allKeys:i.allKeys,selections:u}):null}:void 0})}function Q(n){const{multiple:t,value:u,onChange:l,indeterminate:r,disabled:e}=n;return t?c.jsx(P,{checked:u,indeterminate:r,disabled:e,onChange:a=>l==null?void 0:l(a.target.checked,a.nativeEvent)}):c.jsx(W,{checked:u,disabled:e,onChange:a=>l==null?void 0:l(a.target.checked,a.nativeEvent)})}function X(n,t){if(typeof t=="number"&&Number.isFinite(t))return t;switch(n){case"small":return 39;case"large":return 65;case"middle":default:return 57}}const Z={disableResize:!0};function ee(n,t){const{className:u,size:l="middle",estimatedRowHeight:r,sticky:e,rowSelection:a,loading:C,bordered:i,pipeline:g,expandable:E,summary:o,pagination:s,onChange:S,storageKey:m,...d}=n,f=p.useRef({});p.useEffect(()=>{s!=null&&typeof s=="object"&&(f.current={...s,current:f.current.current??s.current,pageSize:f.current.pageSize??s.pageSize})},[s]);const N=p.useCallback(()=>{S==null||S(f.current)},[S]),h=s===!1||s==null?void 0:s.onChange,T=p.useCallback((v,_)=>{h==null||h(v,_),f.current={...f.current,current:v,pageSize:_},N()},[N,h]),y=O({pipeline:g,use:[J({...a,extraColumnProps:Z}),w(E),A(m==null?void 0:{storageKey:m}),Y(s===!1?!1:{...s,onChange:T}),{priority:200,hook:V({loading:C})},{priority:200,hook:F({children:c.jsx(R,{image:R.PRESENTED_IMAGE_SIMPLE})})},{priority:200,hook:D(o==null?void 0:{summary:o})},{priority:200,hook:H()}]}),k=X(l,r);return c.jsx($,{...d,pipeline:y,className:I(`virtual-table-${l}`,i&&"virtual-table-bordered",u),ref:t,estimatedRowHeight:k,stickyHeader:typeof e=="boolean"?e:e==null?void 0:e.offsetHeader})}const le=p.forwardRef(ee);export{le as V};
