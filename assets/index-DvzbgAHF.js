var Ze=Object.defineProperty;var et=(e,t,n)=>t in e?Ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var de=(e,t,n)=>et(e,typeof t!="symbol"?t+"":t,n);import{r as s,j as x}from"./index-CUVH4KhH.js";function We(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=We(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function q(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=We(e))&&(r&&(r+=" "),r+=t);return r}function Ie(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),r=Object.keys(t),o=n.length;if(r.length!==o)return!1;for(let l=0;l<o;l+=1){const f=n[l];if(e[f]!==t[f]||!Object.prototype.hasOwnProperty.call(t,f))return!1}return!0}function Re(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=e.length;if(t.length!==n)return!1;for(let r=0;r<n;r+=1)if(e[r]!==t[r])return!1;return!0}function se(e,t){if(Object.is(e,t))return!0;if(Array.isArray(e)&&Array.isArray(t))return Re(e,t)?!0:e.length===t.length&&e.findIndex(r=>typeof r=="object"&&r!=null)>-1?e.every((r,o)=>Array.isArray(r)?Re(r,t[o]):typeof r=="object"&&r!=null?Ie(r,t[o]):Object.is(r,t[o])):!1;if(e instanceof Map&&t instanceof Map){const n=Array.from(e.keys()),r=Array.from(t.keys());if(se(n,r)){const o=Array.from(e.values()),l=Array.from(t.values());if(se(o,l))return!0}return!1}return typeof e=="object"&&e!=null?Ie(e,t):!1}function Te(e){const t=e(),n=s.useRef(t);return se(t,n.current)||(n.current=t),n.current}function $(e){return"key"in e?e.key:e.dataIndex}function fe(e,t){return typeof t=="function"?t(e):e[t]}function Y(e){return e==="left"}function Q(e){return e==="right"}function je(e){return Y(e)||Q(e)}const Ne=s.createContext(null);function Ce(){const e=s.useContext(Ne);if(e==null)throw new Error("useColumnSizes provider not found");return e}const ze=s.createContext(null);function tt(e){const{columns:t,children:n}=e,{widthList:r}=Ce(),o=s.useMemo(()=>t.map(i=>({key:$(i),fixed:i.fixed})),[t]),l=s.useMemo(()=>{let i=0;const C=o.reduce((y,k,M)=>{const{fixed:b,key:w}=k;return Y(b)&&(y[M]=i,i+=r.get(w)??0),y},[]);let p=0;const c=o.reduceRight((y,k,M)=>{const{fixed:b,key:w}=k;return Q(b)&&(y[M]=p,p+=r.get(w)??0),y},[]);return o.reduce((y,k,M)=>{const{key:b,fixed:w}=k;return Y(w)?(y.set(b,C[M]),y):(Q(w)&&y.set(b,c[M]),y)},new Map)},[o,r]),f=Te(()=>o),u=Te(()=>l),d=s.useMemo(()=>({size:u,fixed:f}),[f,u]);return x.jsx(ze.Provider,{value:d,children:n})}function Fe(){const e=s.useContext(ze);if(e==null)throw new Error("useTableSticky provider not found");return e}function P(e,t,n){return typeof t=="function"?t(e,n):e}function nt(e,t,n){const{render:r}=n,o=t;if("dataIndex"in n){const l=n.dataIndex;return typeof r!="function"?o[l]:r(o[l],t,e)}return(r==null?void 0:r(t,t,e))??null}function rt(e){const{className:t,style:n,column:r,rowData:o,rowIndex:l,renderCell:f,...u}=e,{align:d,fixed:i,onCell:C}=r,p=$(r),{size:c}=Fe(),{className:y,style:k,colSpan:M,rowSpan:b,...w}=(C==null?void 0:C(o,l))??{};return M===0||b===0?null:P(x.jsx("td",{...u,...w,colSpan:M,rowSpan:b,className:q("virtual-table-cell",d!=null&&`virtual-table-align-${d}`,je(i)&&"virtual-table-sticky-cell",t,r.className,y),style:{...n,...k,left:Y(i)?c.get(p):void 0,right:Q(i)?c.get(p):void 0},"data-col-key":p,children:nt(l,o,r)}),f,{column:r})}const ot=s.memo(rt),st=e=>{const{columns:t,onColumnSizesMeasure:n}=e,r=n!=null,o=new Map,l=s.useRef(new Map);return x.jsx("colgroup",{ref:()=>{r&&(se(o,l.current)||(n(o),l.current=o))},children:t.map(f=>{const{key:u}=f;if(f.type==="blank")return x.jsx("col",{className:"blank",style:{width:f.width}},u);const{column:d}=f;return x.jsx("col",{ref:i=>{i==null||!r||o.set(u,i.offsetWidth)},style:{width:d.width,minWidth:d.minWidth}},u)})})},Oe=s.memo(st),lt=/auto|scroll|overlay|hidden/;function De(e){return e instanceof Node?e.nodeType===1:!1}function ct(e,t=window){let n=e;for(;n!==t&&De(n);){if(n===document.body)return t;const{overflow:r,overflowY:o,overflowX:l}=window.getComputedStyle(n);if(lt.test(r+o+l))return n;n=n.parentNode}return e.ownerDocument.defaultView??window}function me(e){return Object.prototype.toString.call(e)==="[object Window]"}function it(e){return Object.prototype.toString.call(e)==="[object HTMLDocument]"}function Ke(e){return Object.prototype.toString.call(e)==="[object HTMLHtmlElement]"}function Be(e){return it(e)?e.scrollingElement:De(e)?e:document.scrollingElement}function ut(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),o=Number.parseFloat(window.getComputedStyle(t).borderTopWidth)||0,l=t.scrollTop;return n.top-r.top-o+l}function at(e){const{getScroller:t,root:n}=e,[r,o]=s.useState(0),[l,f]=s.useState(0),[u,d]=s.useState(0),[i,C]=s.useState(0),p=s.useRef(null);return s.useLayoutEffect(()=>{const c=t();if(c==null)return;let y;me(c)?y=document.scrollingElement:y=c,p.current=y;const k=new ResizeObserver(M=>{const{width:b,height:w}=M[0].contentRect;o(b),f(w)});return k.observe(y),()=>{k.disconnect()}},[t]),s.useLayoutEffect(()=>{const c=n.current;if(c==null)return;const y=new ResizeObserver(k=>{const{width:M,height:b}=k[0].contentRect;d(M),C(b)});return y.observe(c),()=>{y.disconnect()}},[n]),{scrollContainerWidth:r,scrollContainerHeight:l,tableWidth:u,tableHeight:i}}const _e=s.createContext(null);function dt(e){const{getScroller:t,root:n,children:r}=e,{scrollContainerHeight:o,scrollContainerWidth:l,tableHeight:f,tableWidth:u}=at({getScroller:t,root:n}),d=s.useMemo(()=>({scrollContainerWidth:l,scrollContainerHeight:o,tableWidth:u,tableHeight:f}),[l,o,u,f]);return x.jsx(_e.Provider,{value:d,children:r})}function Ot(){const e=s.useContext(_e);if(e==null)throw new Error("useContainerSize provider not found");return e}const Pe=s.createContext(null);function ft(e){const{children:t}=e,n=s.useRef(new Map),r=s.useMemo(()=>{const o=new Set;return{listen(l,f){return n.current.set(l,(u,d)=>{f(u,d)}),()=>{n.current.delete(l)}},notify(l,f){if(o.has(l)){o.delete(l);return}const{scrollLeft:u,node:d}=f;let i=window.requestAnimationFrame;i==null&&(i=C=>{C()}),n.current.forEach((C,p)=>{l!==p&&(o.add(p),i(()=>{C(u(),d)}))})}}},[]);return x.jsx(Pe.Provider,{value:r,children:t})}function pe(){const e=s.useContext(Pe);if(e==null)throw new Error("useHorizontalScrollContext provider not found");return e}const Ve=s.createContext(null);function Dt(){const e=s.useContext(Ve);if(e==null)throw new Error("useTableRowManager provider not found");return e}function Se(e,t){if(me(e)){const n=()=>{t({width:window.innerWidth,height:window.innerHeight})};return n(),window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}}else{const n=new ResizeObserver(r=>{const o=r[0].contentRect;t({width:o.width,height:o.height})});return n.observe(e),()=>{n.disconnect()}}}function ht(e,t){let n=0,r=e.length-1,o=-1;for(;n<=r;){const l=Math.floor((n+r)/2);e[l].bottom>t?(o=l,r=l-1):n=l+1}if(o!==-1)return e[o]}const xe="NormalRow";function mt(e){const{getOffsetTop:t,rowKey:n,dataSource:r,getScroller:o,estimateSize:l,overscan:f}=e,[u,d]=s.useState(0),[i,C]=s.useState(0),p=s.useMemo(()=>r.slice(u,i),[r,u,i]),c=s.useRef(new Map),y=s.useCallback((h,m,R)=>{const a=c.current.get(h)??new Map;a.set(m,R),c.current.set(h,a)},[]),k=()=>{const h=[];return r.forEach(m=>{const R=fe(m,n),a=c.current.get(R);if(a==null)h.push(l);else{let E=0;a.forEach(H=>E+=H),h.push(E)}}),h};(()=>{if(r.length===0){c.current.clear();return}r.forEach(h=>{const m=fe(h,n),R=c.current.get(m)??new Map;R.get(xe)==null&&R.set(xe,l),c.current.set(m,R)})})();const b=s.useRef();(b.current==null||r.length!==b.current.length)&&(b.current=k());const w=s.useRef([]),N=()=>{const{rects:h}=r.reduce((m,R,a)=>{var v;const E=fe(R,n);let H=0;(v=c.current.get(E))==null||v.forEach(B=>{H+=B});const T=m.top+H;return m.rects.push({index:a,top:m.top,height:H,bottom:T}),m.top=T,m},{top:0,rects:[]});w.current=h},L=h=>{h==null||h(),N(),b.current=w.current.map(m=>m.height)},F=s.useRef({index:0,height:l,top:0,bottom:l}),K=s.useRef(0),O=s.useRef(!1);s.useEffect(()=>{const h=o();if(h==null)return;let m=0;const R=()=>{const B=t();let g=0;return me(h)||Ke(h)?g=window.scrollY:g=Be(h).scrollTop,Math.max(g-B,0)},a=B=>{const g=m;return m=Math.ceil(B/l),{prevCount:g}},E=B=>{const g=ht(w.current,B);g!=null&&(F.current=g,d(Math.max(0,g.index-f)),C(g.index+m+f))},H=B=>{const g=t(),V=Be(B.target),G=Math.max(0,V.scrollTop-g);G>K.current?G>F.current.bottom&&E(G):G<F.current.top&&E(G),K.current=G};let T=0;const v=Se(h,B=>{if(B.height===T||B.height===0)return;T=B.height,a(B.height);const g=R();if(O.current)E(g);else{O.current=!0;let V=0;g>=l&&(V=Math.max(Math.floor(g/l)-1-f,0));const G=V+m+f;d(V),C(G)}});return h.addEventListener("scroll",H),()=>{v(),h.removeEventListener("scroll",H)}},[l,t,o,f]);const W=(h,m)=>b.current.slice(h,m).reduce((R,a)=>R+a,0),D=W(0,u),I=W(i);return{startIndex:u,endIndex:i,rowHeightList:b,flushLayout:L,rowHeightByRowKey:c,setRowHeightByRowKey:y,topBlank:D,bottomBlank:I,dataSlice:p}}function Le(e){const t=s.useRef(null);return s.useLayoutEffect(()=>{t.current=e}),s.useCallback((...r)=>{var o;return(o=t.current)==null?void 0:o.call(t,...r)},[])}class pt{constructor(){de(this,"instance",{getCurrentProps(){throw new Error("getCurrentProps() has not been implemented yet")},getDOM(){throw new Error("getDOM() has not been implemented yet")},getRowHeightMap(){throw new Error("getRowHeightMap() has not been implemented yet")},getRowVirtualizeState(){throw new Error("getRowVirtualizeState() has not been implemented yet")},getScrollValueByRowIndex(){throw new Error("getScrollValueByRowIndex() has not been implemented yet")},getScrollValueByColumnKey(){throw new Error("getScrollValueByColumnKey() has not been implemented yet")},scrollToRow(){throw new Error("scrollToRow() has not been implemented yet")},scrollToColumn(){throw new Error("scrollToColumn() has not been implemented yet")},scrollTo(){throw new Error("scrollTo() has not been implemented yet")},getColumnByKey(){throw new Error("getColumnByKey() has not been implemented yet")},getColumnByIndex(){throw new Error("getColumnByIndex() has not been implemented yet")},getColumnKeyByIndex(){throw new Error("getColumnKeyByIndex() has not been implemented yet")}});this.getInstance=this.getInstance.bind(this),this.getInternalHooks=this.getInternalHooks.bind(this)}getInternalHooks(){return{implGetCurrentProps:t=>{this.instance.getCurrentProps=t},implGetDOM:t=>{this.instance.getDOM=t},implGetRowVirtualizeState:t=>{this.instance.getRowVirtualizeState=t},implGetRowHeightMap:t=>{this.instance.getRowHeightMap=t},implScrollValueByRowIndex:t=>{this.instance.getScrollValueByRowIndex=t},implScrollValueByColumnKey:t=>{this.instance.getScrollValueByColumnKey=t},implScrollToRow:t=>{this.instance.scrollToRow=t},implScrollToColumn:t=>{this.instance.scrollToColumn=t},implScrollTo:t=>{this.instance.scrollTo=t},implGetColumnByKey:t=>{this.instance.getColumnByKey=t},implGetColumnByIndex:t=>{this.instance.getColumnByIndex=t},implGetColumnKeyByIndex:t=>{this.instance.getColumnKeyByIndex=t}}}getInstance(){return{...Object.keys(this.instance).reduce((t,n)=>(t[n]=(...r)=>this.instance[n](...r),t),{}),getInternalHooks:this.getInternalHooks}}}function yt(e){return s.useMemo(()=>e??new pt().getInstance(),[e])}function gt(e){const t={current:null,options:null};return(...n)=>{const r=o=>e(o,...n);return se(n,t.options)?t.current??r:(t.options=n,t.current=r,r)}}function wt(e){return Array.isArray(e)?e.filter(t=>t!=null&&(typeof t=="function"||typeof t.hook=="function")).map(t=>typeof t=="function"?{priority:100,hook:t}:t):[]}const he=class he{constructor(){de(this,"hooks",[]);this.use=this.use.bind(this)}setHooks(t){this.hooks=t}use(t){if(this.hooks.length===0)return t;const n={current:t},r={render:[],renderRoot:[],renderContent:[],renderHeaderWrapper:[],renderHeaderRoot:[],renderHeader:[],renderHeaderRow:[],renderHeaderCell:[],renderBodyWrapper:[],renderBodyRoot:[],renderBody:[],renderBodyContent:[],renderRow:[],renderCell:[]},o=[],l=[],f=this.hooks.slice();return f.sort((u,d)=>u.priority-d.priority),f.map(u=>u.hook).forEach(u=>{const d=u(n.current),{render:i,renderRoot:C,renderContent:p,renderHeaderWrapper:c,renderHeaderRoot:y,renderHeader:k,renderHeaderRow:M,renderHeaderCell:b,renderBodyWrapper:w,renderBodyRoot:N,renderBody:L,renderBodyContent:F,renderRow:K,renderCell:O,rowClassName:W,onRow:D,...I}=d;Object.entries(r).forEach(([h,m])=>{const R=d[h];typeof R=="function"&&m.push(R)}),typeof W=="function"&&o.push(W),typeof D=="function"&&l.push(D),n.current=I}),Object.entries(r).forEach(([u,d])=>{d.length>0&&(n.current[u]=(i,C)=>d.reduce((p,c)=>c(p,C),i))}),o.length>0&&(n.current.rowClassName=(u,d)=>q(...o.map(i=>i(u,d)))),l.length>0&&(n.current.onRow=(u,d)=>l.reduce((i,C)=>({...i,...C(u,d)}),{})),n.current}};de(he,"defaultPipeline",new he);let le=he;function Kt(e){const{use:t,pipeline:n}=e,r=s.useMemo(()=>({current:new le}),[]);if(t!=null){const o=wt([...t,...(n==null?void 0:n.hooks)??[]]);if(!Re(r.current.hooks,o)){const l=new le;return l.setHooks(o),r.current=l,l}}return r.current}function ke(e,t){let n=-1;for(let r=0;r<e.length;r+=1)t(e[r],r)&&(n=r);return n}function bt(e){const{className:t,rowKey:n,rowIndex:r,rowData:o,columns:l,onRow:f,renderRow:u,renderCell:d,onRefCallback:i,...C}=e,{columns:p,descriptor:c}=l,y=ke(c,w=>w.type==="blank"?!1:Y(w.column.fixed)),k=c.findIndex(w=>w.type==="blank"?!1:Q(w.column.fixed)),{className:M,...b}=(f==null?void 0:f(o,r))??{};return P(x.jsx("tr",{...C,...b,className:q("virtual-table-row",t,M),"data-row-index":r,ref:w=>{i==null||i({node:w,rowKey:n,rowIndex:r,rowData:o})},children:c.map((w,N)=>{const{key:L}=w;if(w.type==="blank")return x.jsx("td",{},L);const{column:F}=w;return x.jsx(ot,{className:q(y===N&&"virtual-table-cell-fix-left-last",k===N&&"virtual-table-cell-fix-right-first"),column:F,rowIndex:r,rowData:o,renderCell:d},L)})}),u,{columns:p,rowKey:n,rowIndex:r,rowData:o,columnDescriptor:c})}const Rt=s.memo(bt);function xt(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function Ct(...e){return t=>{e.forEach(n=>xt(n,t))}}function ne(...e){return s.useCallback(Ct(...e),e)}function St(e){const{bodyWrapperRef:t,bodyRootRef:n,bodyRef:r,className:o,style:l,dataSource:f,columns:u,rowKey:d,instance:i,overscan:C,estimateSize:p,getScroller:c,getOffsetTop:y,rowClassName:k,onRow:M,renderBodyWrapper:b,renderBodyRoot:w,renderBody:N,renderBodyContent:L,renderRow:F,renderCell:K}=e,O=i.getInternalHooks(),{startIndex:W,endIndex:D,dataSlice:I,rowHeightByRowKey:h,setRowHeightByRowKey:m,flushLayout:R,rowHeightList:a,topBlank:E,bottomBlank:H}=mt({getOffsetTop:y,rowKey:d,dataSource:f,getScroller:c,estimateSize:p,overscan:C});O.implGetRowVirtualizeState(()=>({startIndex:W,endIndex:D,overscan:C,estimateSize:p})),O.implGetRowHeightMap(()=>h.current);const T=ne(r,z=>{z==null||z.offsetHeight===0||R()}),v=s.useCallback(z=>{const{node:A,rowKey:_}=z;A!=null&&m(_,xe,A.offsetHeight)},[m]),{columns:B,descriptor:g}=u,V=P(I.map((z,A)=>{const _=fe(z,d);return x.jsx(Rt,{className:q(k==null?void 0:k(z,A)),rowKey:_,rowIndex:A+W,rowData:z,columns:u,onRow:M,renderRow:F,renderCell:K,onRefCallback:v},_)}),L,{columns:B,columnDescriptor:g,startRowIndex:W}),G=P(x.jsx("tbody",{ref:T,children:V}),N,{columns:B,columnDescriptor:g,startRowIndex:W}),{setWidthList:ce}=Ce(),ye=P(x.jsxs("table",{className:q(o,"virtual-table-body"),style:{...l,paddingBottom:H,paddingTop:E},ref:n,children:[x.jsx(Oe,{columns:g,onColumnSizesMeasure:ce}),G]}),w,{columns:B,columnDescriptor:g,startRowIndex:W}),{listen:ie,notify:ue}=pe(),ae=s.useRef(null);s.useEffect(()=>{const z=ae.current;if(z==null)return;const A="virtual-table-body",_=()=>{ue(A,{scrollLeft:()=>z.scrollLeft,node:z})},te=ie(A,J=>{z.scrollLeft=J});return z.addEventListener("scroll",_),()=>{z.removeEventListener("scroll",_),te()}},[ie,ue]);const ge=ne(ae,t);O.implScrollValueByRowIndex(z=>{if(c()==null)return 0;const{stickyHeader:_}=i.getCurrentProps(),{headerWrapper:te}=i.getDOM();let J=0;return _==null||_===!1?J=te==null?0:te.offsetHeight:J=Number.isFinite(_)?_*-1:0,a.current.slice(0,z).reduce((U,be)=>U+be,0)+y()+J}),O.implScrollToRow(z=>{i.scrollTo({top:i.getScrollValueByRowIndex(z)})});const we=s.useMemo(()=>({setRowHeightByRowKey:m,getRowHeightList:()=>a.current}),[a,m]);return x.jsx(Ve.Provider,{value:we,children:P(x.jsx("div",{ref:ge,className:"virtual-table-body-wrapper",children:ye}),b,{columns:B,columnDescriptor:g,startRowIndex:W})})}const kt=e=>{const{className:t,style:n,wrapperRef:r,columns:o,stickyHeader:l,renderHeaderWrapper:f,renderHeaderRoot:u,renderHeader:d,renderHeaderRow:i,renderHeaderCell:C}=e,{columns:p,descriptor:c}=o,y=p[p.length-1],{widthList:k}=Ce(),{size:M}=Fe(),b=ke(c,I=>I.type==="blank"?!1:Y(I.column.fixed)),w=c.findIndex(I=>I.type==="blank"?!1:Q(I.column.fixed)),{listen:N,notify:L}=pe(),F=s.useRef(null);s.useEffect(()=>{const I=F.current;if(I==null)return;const h="virtual-table-header",m=()=>{L(h,{scrollLeft:()=>I.scrollLeft,node:I})},R=N(h,a=>{I.scrollLeft=a});return I.addEventListener("scroll",m),()=>{I.removeEventListener("scroll",m),R()}},[N,L]);const K=P(x.jsx("tr",{children:c.map((I,h)=>{var v;const{key:m}=I;if(I.type==="blank")return x.jsx("th",{"data-blank":!0},m);const{column:R}=I;if(R.colSpan===0)return null;const a=$(y)===m,{className:E,style:H,...T}=((v=R.onHeaderCell)==null?void 0:v.call(R,R,h))??{};return x.jsx(s.Fragment,{children:P(s.createElement("th",{scope:"col",...T,colSpan:R.colSpan,className:q("virtual-table-header-cell",a&&"no-split",R.align!=null&&`virtual-table-align-${R.align}`,je(R.fixed)&&"virtual-table-sticky-cell",b===h&&"virtual-table-cell-fix-left-last",w===h&&"virtual-table-cell-fix-right-first",R.className,E),style:{...H,left:Y(R.fixed)?M.get(m):void 0,right:Q(R.fixed)?M.get(m):void 0}},R.title),C,{column:R,columns:p,columnWidths:k,columnDescriptor:c})},m)})}),i,{columns:p,columnDescriptor:c}),O=P(x.jsx("thead",{className:"virtual-table-thead",children:K}),d,{columns:p,columnDescriptor:c}),W=P(x.jsxs("table",{style:n,children:[x.jsx(Oe,{columns:c}),O]}),u,{columns:p,columnDescriptor:c}),D=ne(r,F);return P(x.jsx("div",{ref:D,className:q("virtual-table-header",t,{"virtual-table-header-sticky":l}),style:{top:Number.isFinite(l)?l:void 0},children:W}),f,{columns:p,columnDescriptor:c})},vt=s.memo(kt);function Ht(e,t){let n=0,r=e.length-1,o=-1;for(;n<=r;){const l=Math.floor((n+r)/2);e[l].right>t?(o=l,r=l-1):n=l+1}if(o!==-1)return e[o]}function Et(e){let t=-1;for(let n=e.length-1;n>=0;n--){const r=e[n];if(Q(r.fixed))t=n;else break}return t}function Mt(e){return ke(e,t=>Y(t.fixed))}function It(e){const{estimateSize:t,defaultColumnWidth:n,overscan:r,columns:o,bodyWrapper:l,columnWidths:f,disabled:u=!1}=e,d=Mt(o),i=Et(o),C=d>-1?$(o[d]):null,p=i>-1?$(o[i]):null,[c,y]=s.useState(0),[k,M]=s.useState(0),b=s.useMemo(()=>{if(u)return[];let a=0;return o.map((E,H)=>{const T=$(E),v=f.get(T)??t,B=a+v,g={index:H,width:v,left:a,right:B};return a=B,g})},[o,f,t,u]),w=s.useRef({index:0,width:t,left:0,right:t}),N=Le(a=>Ht(b,a)),L=Le((a,E)=>{const H=N(a);H!=null&&(w.current=H,y(Math.max(0,H.index-r)),M(H.index+E+r))}),F=s.useRef(0);s.useEffect(()=>{if(u)return;const a=l.current;if(a==null)return;const E=a.offsetWidth;let H=Math.ceil(E/t);const T=()=>{const g=a.scrollLeft;g>F.current?g>w.current.right&&L(g,H):g<w.current.left&&L(g,H),F.current=g};a.addEventListener("scroll",T);let v=0;const B=Se(a,({width:g})=>{if(g===v||g===0)return;v=g;const V=a.scrollLeft;H=Math.ceil(g/t),L(V,H)});return()=>{a.removeEventListener("scroll",T),B()}},[l,t,L,r,N,u]);const K=(a,E)=>b.slice(a,E).reduce((H,T)=>H+T.width,0),O=d>-1?K(0,d+1):0,W=i>-1?K(i):0,D=Math.max(0,K(0,c)-O),I=Math.max(0,K(k)-W),h=s.useMemo(()=>{if(u)return o;const a=[...o.slice(0,d+1),...o.slice(c,k),...o.slice(i)],E=new Set;return a.filter(H=>{const T=$(H);return E.has(T)?!1:(E.add(T),!0)})},[u,o,c,k,d,i]),m=s.useMemo(()=>h.reduce((a,E,H)=>{const T=$(E);let v=E;return v.width==null&&v.minWidth==null&&(v={...v,width:n}),T===C?(a.push({type:"normal",key:T,column:v}),a.push({type:"blank",key:"_blank_left",width:D})):C==null&&H===0?(a.push({type:"blank",key:"_blank_left",width:D}),a.push({type:"normal",key:T,column:v})):T===p?(a.push({type:"blank",key:"_blank_right",width:I}),a.push({type:"normal",key:T,column:v})):p==null&&H===h.length-1?(a.push({type:"normal",key:T,column:v}),a.push({type:"blank",key:"_blank_right",width:I})):a.push({type:"normal",key:T,column:v}),a},[]),[h,C,p,D,I,n]);return{columns:s.useMemo(()=>({columns:h,descriptor:m}),[h,m]),columnSlice:h,lastFixedLeftIndex:d,firstFixedRightIndex:i}}function Tt(e,t){const{className:n,style:r,children:o,hasFixedLeftColumn:l,hasFixedRightColumn:f,renderRoot:u,bodyScrollContainer:d}=e,i=s.useRef(null),[C,p]=s.useState(!1),[c,y]=s.useState(!1),{listen:k}=pe();s.useEffect(()=>{if(!l&&!f)return;const b=N=>{const{scrollLeft:L,clientWidth:F,scrollWidth:K}=N;l&&p(L!==0),f&&y(!(L+F>=K))},w=d.current;return w!=null&&b(w),k("__root",(N,L)=>{b(L)})},[d,l,f,k]);const M=ne(t,i);return P(x.jsx("div",{ref:M,className:q("virtual-table",C&&"virtual-table-has-fix-left",c&&"virtual-table-has-fix-right",n),style:r,children:o}),u,{})}const Bt=s.forwardRef(Tt);function Lt(e,t){const{bodyRootRef:n,instance:r,className:o,style:l,tableBodyClassName:f,tableBodyStyle:u,columns:d,dataSource:i,rowKey:C="key",estimatedRowHeight:p=46,estimatedColumnWidth:c,overscanRows:y=5,overscanColumns:k=3,stickyHeader:M,defaultColumnWidth:b=100,pipeline:w=le.defaultPipeline,rowClassName:N,onRow:L,getOffsetTop:F,virtualHeader:K=!0}=e,O=yt(r),W=O.getInternalHooks();W.implGetCurrentProps(()=>e);const D=s.useRef(null),I=s.useRef(null),h=s.useRef(null),m=s.useRef(null),R=ne(m,n),a=s.useRef(null),E=s.useCallback(()=>{const S=D.current;if(S!=null)return ct(S)},[]),H=s.useCallback(()=>{if(typeof F=="function")return F();const S=E(),j=D.current;if(j==null||S==null||S===j)return 0;if(me(S)||Ke(S)){const X=j.getBoundingClientRect().top;return window.scrollY+X}return ut(j,S)},[F,E]),{dataSource:T,columns:v,rowKey:B,rowClassName:g,render:V,renderRoot:G,renderContent:ce,renderHeaderWrapper:ye,renderHeaderRoot:ie,renderHeader:ue,renderHeaderRow:ae,renderHeaderCell:ge,renderBodyWrapper:we,renderBodyRoot:z,renderBody:A,renderBodyContent:_,renderRow:te,renderCell:J,onRow:re}=w.use({dataSource:i,rowKey:C,columns:d,estimatedRowHeight:p,headerWrapperRef:I,bodyWrapperRef:h,bodyRootRef:m,bodyRef:a,rootRef:D,getOffsetTop:H,getScroller:E,instance:O}),[U,be]=s.useState(()=>new Map),ve=s.useRef(U),He=s.useCallback(S=>{const j=new Map(ve.current);S.forEach((X,ee)=>{j.set(ee,X)}),ve.current=j,be(j)},[]),Ge=s.useMemo(()=>({widthList:U,setWidthList:He}),[U,He]),{columns:Z}=It({estimateSize:c??b,defaultColumnWidth:b,overscan:k,columns:v,bodyWrapper:h,columnWidths:U,disabled:c==null}),Ae=s.useCallback((S,j)=>q(N==null?void 0:N(S,j),g==null?void 0:g(S,j)),[N,g]),$e=s.useCallback((S,j)=>({...L==null?void 0:L(S,j),...re==null?void 0:re(S,j)}),[re,L]),qe=v.some(S=>Y(S.fixed)),Ye=v.some(S=>Q(S.fixed)),Ee=s.useMemo(()=>({columns:v,descriptor:v.map(S=>({key:$(S),type:"normal",column:S}))}),[v]),Qe=s.useMemo(()=>K?Z:Ee,[K,Ee,Z]);W.implGetDOM(()=>({root:D.current,headerWrapper:I.current,bodyWrapper:h.current,bodyRoot:m.current,body:a.current})),W.implScrollTo(S=>{var ee;const{left:j,top:X}=S;if(j!=null&&((ee=h.current)==null||ee.scrollTo(S)),X!=null){const oe=E();if(oe==null){console.error("The scroller DOM is not obtained, and scrolling is not possible.");return}oe.scrollTo(S)}}),W.implScrollValueByColumnKey(S=>{let j=0,X=0;for(const ee of v){const oe=$(ee),Me=U.get(oe)??0;if(Y(ee.fixed)&&(X+=Me),oe===S)break;j+=Me}return j-X}),W.implScrollToColumn(S=>{O.scrollTo({left:O.getScrollValueByColumnKey(S)})}),W.implGetColumnByKey(S=>v.find(j=>$(j)===S)),W.implGetColumnByIndex(S=>v[S]),W.implGetColumnKeyByIndex(S=>{const j=O.getColumnByIndex(S);if(j!=null)return $(j)});const Ue=P(x.jsxs(x.Fragment,{children:[x.jsx(vt,{wrapperRef:I,columns:Qe,stickyHeader:M,renderHeaderWrapper:ye,renderHeaderRoot:ie,renderHeader:ue,renderHeaderRow:ae,renderHeaderCell:ge}),x.jsx(St,{instance:O,bodyWrapperRef:h,bodyRootRef:R,bodyRef:a,className:f,style:u,columns:Z,rowKey:B,dataSource:T,overscan:y,estimateSize:p,getScroller:E,getOffsetTop:H,rowClassName:Ae,onRow:$e,renderBodyWrapper:we,renderBodyRoot:z,renderBody:A,renderBodyContent:_,renderRow:te,renderCell:J})]}),ce,{columns:Z.columns,columnDescriptor:Z.descriptor}),Xe=ne(D,t),Je=P(x.jsx(Bt,{ref:Xe,className:o,style:l,hasFixedLeftColumn:qe,hasFixedRightColumn:Ye,renderRoot:G,bodyScrollContainer:h,children:Ue}),V,{columns:Z.columns,columnDescriptor:Z.descriptor});return x.jsx(Ne.Provider,{value:Ge,children:x.jsx(tt,{columns:v,children:x.jsx(dt,{getScroller:E,root:D,children:x.jsx(ft,{children:Je})})})})}const _t=s.memo(s.forwardRef(Lt));function Wt(){const e=document.createElement("div");e.style.position="absolute",e.style.width="100px",e.style.height="100px",e.style.overflow="scroll",e.style.top="-9999px",document.body.appendChild(e);const t=e.offsetWidth-e.clientWidth,n=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),{width:t,height:n}}const jt=e=>{const{className:t,style:n,bottom:r,zIndex:o,bodyRef:l}=e,{listen:f,notify:u}=pe(),d=s.useRef(null);s.useEffect(()=>{const c=d.current;if(c==null)return;const y="virtual-table-sticky-bottom-scroll",k=()=>{u(y,{scrollLeft:()=>c.scrollLeft,node:c})},M=f(y,b=>{c.scrollLeft=b});return c.addEventListener("scroll",k),()=>{c.removeEventListener("scroll",k),M()}},[f,u]);const[i,C]=s.useState(0);s.useEffect(()=>{const c=l.current;if(c!=null)return Se(c,({width:y})=>{y!==0&&C(y)})},[l]);const[p]=s.useState(Wt);return x.jsx("div",{className:q("virtual-table-sticky-scroll",t),style:{...n,"--virtual-table-sticky-scroll-bottom":Number.isFinite(r)?`${r}px`:r,paddingTop:p.height>0?0:15,marginTop:p.height>0?0:p.height*-1,height:p.height+1,zIndex:o},ref:d,children:x.jsx("div",{className:"virtual-table-sticky-scroll-bar",style:{width:i}})})};function Nt(e,t){const{bodyRootRef:n}=e;return{...e,renderContent(r){return x.jsxs(x.Fragment,{children:[r,x.jsx(jt,{bodyRef:n,...t})]})}}}const Pt=gt(Nt);export{Oe as C,_t as V,yt as a,gt as b,q as c,Ot as d,Dt as e,Te as f,$ as g,Pt as h,Le as i,je as j,fe as k,Fe as l,Q as m,Y as n,ke as o,Se as p,pe as q,Wt as r,ne as s,Kt as u};
