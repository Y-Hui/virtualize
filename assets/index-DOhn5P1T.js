import{r as p,j as c,C as x}from"./index-DTLKv8E6.js";import{c as I,a as z,t as L,u as O,b as w,d as A,e as V,f as F,g as D,h as H,V as $}from"./table-selection-BQeyK_cm.js";import{P as K,F as b,C as P,D as M}from"./Table-DwlELStI.js";import{b as U,R as W,E as R}from"./mock-Ccn_2p_w.js";const B=t=>{const{position:r,className:u,defaultCurrent:l=1,defaultPageSize:a=10,onChange:e,current:n,pageSize:C,...i}=t,E=((r==null?void 0:r[0])??"bottomRight").toLowerCase().replace(/top|bottom/,""),o="current"in t,s="pageSize"in t,[S,m]=p.useState(l),[d,f]=p.useState(a),N=o?n:S,h=o?C:d,T=(y,k)=>{o||m(y),s||f(k),e==null||e(y,k)};return c.jsx(K,{showSizeChanger:!0,...i,current:N,pageSize:h,className:I("virtual-table-pagination",`virtual-table-pagination-${E}`,u),onChange:T})};function G(t,r){if(r===!1)return t;const{position:u=["bottomRight"],...l}=r??{},a=u[0];return a==="none"?t:{...t,render(e){const n=p.createElement(B,{...l,key:"__pagination__"});return a.includes("top")?c.jsxs(c.Fragment,{children:[n,e]}):c.jsxs(c.Fragment,{children:[e,n]})}}}const Y=z(G),j=[b.SELECTION_ALL,b.SELECTION_INVERT,b.SELECTION_NONE];function q(t){const{checked:r,onChange:u,indeterminate:l,selections:a,onClear:e,onSelectAll:n,onSelectInvert:C,allKeys:i,disabled:g}=t,{locale:E}=p.useContext(x.ConfigContext),o=E==null?void 0:E.Table,s={[b.SELECTION_ALL]:{key:b.SELECTION_ALL,label:o==null?void 0:o.selectAll,onClick:n},[b.SELECTION_INVERT]:{key:b.SELECTION_INVERT,label:o==null?void 0:o.selectInvert,onClick:C},[b.SELECTION_NONE]:{key:b.SELECTION_NONE,label:o==null?void 0:o.selectNone,onClick:e}},S=a===!0?j:Array.isArray(a)?a:void 0;return c.jsxs("div",{className:I("virtual-table-selection"),children:[c.jsx(P,{checked:r,indeterminate:l,disabled:g,onChange:u}),S&&c.jsx("div",{className:"virtual-table-selection-extra",children:c.jsx(M,{menu:{items:S.reduce((m,d)=>(typeof d=="string"?j.includes(d)&&m.push(s[d]):"key"in d&&m.push({key:d.key,label:d.text,onClick:()=>{var f;(f=d.onSelect)==null||f.call(d,i)}}),m),[])},children:c.jsx(U,{})})})]})}function J(t){if(t==null)return L();const{type:r,selections:u,columnWidth:l,columnTitle:a,...e}=t,n=r==="checkbox";return L({...e,component:Q,multiple:n,columnWidth:l??(u==null||!n?32:48),columnTitle:u!=null?(C,i)=>{if(a!=null){if(p.isValidElement(a))return a;if(typeof a=="function")return a(C,i)}return n?c.jsx(q,{checked:i.value,indeterminate:i.indeterminate,disabled:i.disabled,onChange:g=>{var E;(E=i.onChange)==null||E.call(i,g.target.checked,g.nativeEvent)},onSelectAll:i.onSelectAll,onSelectInvert:i.onSelectInvert,onClear:i.onClear,allKeys:i.allKeys,selections:u}):null}:void 0})}function Q(t){const{multiple:r,value:u,onChange:l,indeterminate:a,disabled:e}=t;return r?c.jsx(P,{checked:u,indeterminate:a,disabled:e,onChange:n=>l==null?void 0:l(n.target.checked,n.nativeEvent)}):c.jsx(W,{checked:u,disabled:e,onChange:n=>l==null?void 0:l(n.target.checked,n.nativeEvent)})}function X(t,r){if(typeof r=="number"&&Number.isFinite(r))return r;switch(t){case"small":return 39;case"large":return 65;case"middle":default:return 57}}const Z={disableResize:!0};function ee(t,r){const{className:u,size:l="middle",estimatedRowHeight:a,sticky:e,rowSelection:n,loading:C,bordered:i,pipeline:g,expandable:E,summary:o,pagination:s,onChange:S,storageKey:m,...d}=t,f=p.useRef({});p.useEffect(()=>{s!=null&&typeof s=="object"&&(f.current={...s,current:f.current.current??s.current,pageSize:f.current.pageSize??s.pageSize})},[s]);const N=p.useCallback(()=>{S==null||S(f.current)},[S]),h=s===!1||s==null?void 0:s.onChange,T=p.useCallback((v,_)=>{h==null||h(v,_),f.current={...f.current,current:v,pageSize:_},N()},[N,h]),y=O({pipeline:g,use:[J(n==null?void 0:{...n,extraColumnProps:Z}),w(E),A(m==null?void 0:{storageKey:m}),Y(s===!1?!1:{...s,onChange:T}),{priority:200,hook:V({loading:C})},{priority:200,hook:F({children:c.jsx(R,{image:R.PRESENTED_IMAGE_SIMPLE})})},{priority:200,hook:D(o==null?void 0:{summary:o})},{priority:200,hook:H()}]}),k=X(l,a);return c.jsx($,{...d,pipeline:y,className:I(`virtual-table-${l}`,i&&"virtual-table-bordered",u),ref:r,estimatedRowHeight:k,stickyHeader:typeof e=="boolean"?e:e==null?void 0:e.offsetHeader})}const le=p.forwardRef(ee);export{le as V};
