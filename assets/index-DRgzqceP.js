var Ye=Object.defineProperty;var qe=(e,t,n)=>t in e?Ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ae=(e,t,n)=>qe(e,typeof t!="symbol"?t+"":t,n);import{r as s,j as w}from"./index-By0mia_p.js";function Ce(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=Ce(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function B(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=Ce(e))&&(r&&(r+=" "),r+=t);return r}function we(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),r=Object.keys(t),o=n.length;if(r.length!==o)return!1;for(let l=0;l<o;l+=1){const a=n[l];if(e[a]!==t[a]||!Object.prototype.hasOwnProperty.call(t,a))return!1}return!0}function de(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=e.length;if(t.length!==n)return!1;for(let r=0;r<n;r+=1)if(e[r]!==t[r])return!1;return!0}function te(e,t){if(Object.is(e,t))return!0;if(Array.isArray(e)&&Array.isArray(t))return de(e,t)?!0:e.length===t.length&&e.findIndex(r=>typeof r=="object"&&r!=null)>-1?e.every((r,o)=>Array.isArray(r)?de(r,t[o]):typeof r=="object"&&r!=null?we(r,t[o]):Object.is(r,t[o])):!1;if(e instanceof Map&&t instanceof Map){const n=Array.from(e.keys()),r=Array.from(t.keys());if(te(n,r)){const o=Array.from(e.values()),l=Array.from(t.values());if(te(o,l))return!0}return!1}return typeof e=="object"&&e!=null?we(e,t):!1}function xe(e){const t=e(),n=s.useRef(t);return te(t,n.current)||(n.current=t),n.current}function Y(e){return"key"in e?e.key:e.dataIndex}function q(e){return e==="left"}function Q(e){return e==="right"}function Se(e){return q(e)||Q(e)}const ke=s.createContext(null);function fe(){const e=s.useContext(ke);if(e==null)throw new Error("useColumnSizes provider not found");return e}const ve=s.createContext(null);function Qe(e){const{columns:t,children:n}=e,{widthList:r}=fe(),o=s.useMemo(()=>t.map(d=>({key:Y(d),fixed:d.fixed})),[t]),l=s.useMemo(()=>{let d=0;const x=o.reduce((h,b,k)=>{const{fixed:p,key:R}=b;return q(p)&&(h[k]=d,d+=r.get(R)??0),h},[]);let u=0;const f=o.reduceRight((h,b,k)=>{const{fixed:p,key:R}=b;return Q(p)&&(h[k]=u,u+=r.get(R)??0),h},[]);return o.reduce((h,b,k)=>{const{key:p,fixed:R}=b;return q(R)?(h.set(p,x[k]),h):(Q(R)&&h.set(p,f[k]),h)},new Map)},[o,r]),a=xe(()=>o),i=xe(()=>l),c=s.useMemo(()=>({size:i,fixed:a}),[a,i]);return w.jsx(ve.Provider,{value:c,children:n})}function He(){const e=s.useContext(ve);if(e==null)throw new Error("useTableSticky provider not found");return e}function O(e,t,n){return typeof t=="function"?t(e,n):e}function Ue(e,t,n){const{render:r}=n,o=t;if("dataIndex"in n){const l=n.dataIndex;return typeof r!="function"?o[l]:r(o[l],t,e)}return(r==null?void 0:r(t,t,e))??null}function Xe(e){const{className:t,style:n,column:r,rowData:o,rowIndex:l,renderCell:a,...i}=e,{align:c,fixed:d,onCell:x}=r,u=Y(r),{size:f}=He(),{className:h,style:b,colSpan:k,rowSpan:p,...R}=(x==null?void 0:x(o,l))??{};return k===0||p===0?null:O(w.jsx("td",{...i,...R,colSpan:k,rowSpan:p,className:B("virtual-table-cell",c!=null&&`virtual-table-align-${c}`,Se(d)&&"virtual-table-sticky-cell",t,r.className,h),style:{...n,...b,left:q(d)?f.get(u):void 0,right:Q(d)?f.get(u):void 0},children:Ue(l,o,r)}),a,{column:r})}const Ge=s.memo(Xe),Je=e=>{const{columns:t,onColumnSizesMeasure:n}=e,r=n!=null,o=new Map,l=s.useRef(new Map);return w.jsx("colgroup",{ref:()=>{r&&(te(o,l.current)||(n(o),l.current=o))},children:t.map(a=>{const{key:i}=a;if(a.type==="blank")return w.jsx("col",{className:"blank",style:{width:a.width}},i);const{column:c}=a;return w.jsx("col",{ref:d=>{d==null||!r||o.set(i,d.offsetWidth)},style:{width:c.width,minWidth:c.minWidth}},i)})})},Ee=s.memo(Je),Ve=/auto|scroll|overlay|hidden/;function Le(e){return e instanceof Node?e.nodeType===1:!1}function Ze(e,t=window){let n=e;for(;n!==t&&Le(n);){if(n===document.body)return t;const{overflow:r,overflowY:o,overflowX:l}=window.getComputedStyle(n);if(Ve.test(r+o+l))return n;n=n.parentNode}return e.ownerDocument.defaultView??window}function le(e){return Object.prototype.toString.call(e)==="[object Window]"}function et(e){return Object.prototype.toString.call(e)==="[object HTMLDocument]"}function Me(e){return Object.prototype.toString.call(e)==="[object HTMLHtmlElement]"}function be(e){return et(e)?e.scrollingElement:Le(e)?e:document.scrollingElement}function tt(e){const{getScroller:t,root:n}=e,[r,o]=s.useState(0),[l,a]=s.useState(0),[i,c]=s.useState(0),[d,x]=s.useState(0),u=s.useRef(null);return s.useLayoutEffect(()=>{const f=t();if(f==null)return;let h;le(f)?h=document.scrollingElement:h=f,u.current=h;const b=new ResizeObserver(k=>{const{width:p,height:R}=k[0].contentRect;o(p),a(R)});return b.observe(h),()=>{b.disconnect()}},[t]),s.useLayoutEffect(()=>{const f=n.current;if(f==null)return;const h=new ResizeObserver(b=>{const{width:k,height:p}=b[0].contentRect;c(k),x(p)});return h.observe(f),()=>{h.disconnect()}},[n]),{scrollContainerWidth:r,scrollContainerHeight:l,tableWidth:i,tableHeight:d}}const je=s.createContext(null);function nt(e){const{getScroller:t,root:n,children:r}=e,{scrollContainerHeight:o,scrollContainerWidth:l,tableHeight:a,tableWidth:i}=tt({getScroller:t,root:n}),c=s.useMemo(()=>({scrollContainerWidth:l,scrollContainerHeight:o,tableWidth:i,tableHeight:a}),[l,o,i,a]);return w.jsx(je.Provider,{value:c,children:r})}function Et(){const e=s.useContext(je);if(e==null)throw new Error("useContainerSize provider not found");return e}const We=s.createContext(null);function rt(e){const{children:t}=e,n=s.useRef(new Map),r=s.useMemo(()=>{const o=new Set;return{listen(l,a){return n.current.set(l,(i,c)=>{a(i,c)}),()=>{n.current.delete(l)}},notify(l,a){if(o.has(l)){o.delete(l);return}const{scrollLeft:i,node:c}=a;let d=window.requestAnimationFrame;d==null&&(d=x=>{x()}),n.current.forEach((x,u)=>{l!==u&&(o.add(u),d(()=>{x(i(),c)}))})}}},[]);return w.jsx(We.Provider,{value:r,children:t})}function ce(){const e=s.useContext(We);if(e==null)throw new Error("useHorizontalScrollContext provider not found");return e}const Ne=s.createContext(null);function ot(){const e=s.useContext(Ne);if(e==null)throw new Error("useTableRowManager provider not found");return e}function Re(e){const t=s.useRef(null);return s.useLayoutEffect(()=>{t.current=e}),s.useCallback((...r)=>{var o;return(o=t.current)==null?void 0:o.call(t,...r)},[])}function st(e){const t={current:null,options:null};return(...n)=>{const r=o=>e(o,...n);return te(n,t.options)?t.current??r:(t.options=n,t.current=r,r)}}function lt(e){return Array.isArray(e)?e.filter(t=>t!=null&&(typeof t=="function"||typeof t.hook=="function")).map(t=>typeof t=="function"?{priority:100,hook:t}:t):[]}const se=class se{constructor(){ae(this,"hooks",[]);this.use=this.use.bind(this)}setHooks(t){this.hooks=t}use(t){if(this.hooks.length===0)return t;const n={current:t},r={render:[],renderRoot:[],renderContent:[],renderHeaderWrapper:[],renderHeaderRoot:[],renderHeader:[],renderHeaderRow:[],renderHeaderCell:[],renderBodyWrapper:[],renderBodyRoot:[],renderBody:[],renderRow:[],renderCell:[]},o=[],l=[],a=this.hooks.slice();return a.sort((i,c)=>i.priority-c.priority),a.map(i=>i.hook).forEach(i=>{const c=i(n.current),{render:d,renderRoot:x,renderContent:u,renderHeaderWrapper:f,renderHeaderRoot:h,renderHeader:b,renderHeaderRow:k,renderHeaderCell:p,renderBodyWrapper:R,renderBodyRoot:z,renderBody:W,renderRow:_,renderCell:F,rowClassName:L,onRow:E,...N}=c;Object.entries(r).forEach(([C,M])=>{const v=c[C];typeof v=="function"&&M.push(v)}),typeof L=="function"&&o.push(L),typeof E=="function"&&l.push(E),n.current=N}),Object.entries(r).forEach(([i,c])=>{c.length>0&&(n.current[i]=(d,x)=>c.reduce((u,f)=>f(u,x),d))}),o.length>0&&(n.current.rowClassName=(i,c)=>B(...o.map(d=>d(i,c)))),l.length>0&&(n.current.onRow=(i,c)=>l.reduce((d,x)=>({...d,...x(i,c)}),{})),n.current}};ae(se,"defaultPipeline",new se);let ne=se;function Lt(e){const{use:t,pipeline:n}=e,r=s.useMemo(()=>({current:new ne}),[]);if(t!=null){const o=lt([...t,...(n==null?void 0:n.hooks)??[]]);if(!de(r.current.hooks,o)){const l=new ne;return l.setHooks(o),r.current=l,l}}return r.current}function he(e,t){let n=-1;for(let r=0;r<e.length;r+=1)t(e[r],r)&&(n=r);return n}function ct(e){const{className:t,rowIndex:n,rowData:r,columns:o,onRow:l,renderRow:a,renderCell:i,...c}=e,{updateRowHeight:d}=ot(),{columns:x,descriptor:u}=o,f=he(u,p=>p.type==="blank"?!1:q(p.column.fixed)),h=u.findIndex(p=>p.type==="blank"?!1:Q(p.column.fixed)),{className:b,...k}=(l==null?void 0:l(r,n))??{};return O(w.jsx("tr",{...c,...k,className:B("virtual-table-row",t,b),ref:p=>{p!=null&&d(n,n,p.offsetHeight)},children:u.map((p,R)=>{const{key:z}=p;if(p.type==="blank")return w.jsx("td",{},z);const{column:W}=p;return w.jsx(Ge,{className:B(f===R&&"virtual-table-cell-fix-left-last",h===R&&"virtual-table-cell-fix-right-first"),column:W,rowIndex:n,rowData:r,renderCell:i},z)})}),a,{columns:x,rowIndex:n,rowData:r,columnDescriptor:u})}const it=s.memo(ct);function ut(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function at(...e){return t=>{e.forEach(n=>ut(n,t))}}function Z(...e){return s.useCallback(at(...e),e)}function pe(e,t){if(le(e)){const n=()=>{t({width:window.innerWidth,height:window.innerHeight})};return n(),window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}}else{const n=new ResizeObserver(r=>{const o=r[0].contentRect;t({width:o.width,height:o.height})});return n.observe(e),()=>{n.disconnect()}}}function dt(e,t){let n=0,r=e.length-1,o=-1;for(;n<=r;){const l=Math.floor((n+r)/2);e[l].bottom>t?(o=l,r=l-1):n=l+1}if(o!==-1)return e[o]}function ft(e){const{getOffsetTop:t,dataSource:n,getScroller:r,estimateSize:o,overscan:l}=e,[a,i]=s.useState(0),[c,d]=s.useState(0),x=s.useMemo(()=>n.slice(a,c),[n,a,c]),u=s.useRef([]);(()=>{const L=n.length;for(let E=0;E<L;E++)u.current[E]==null&&(u.current[E]=o);u.current=u.current.slice(0,L)})();const h=s.useRef([]),b=(L=!1)=>{if(L&&h.current.length>0)return;const{rects:E}=u.current.reduce((N,C,M)=>{const v=N.top+C;return N.rects.push({index:M,top:N.top,height:C,bottom:v}),N.top=v,N},{top:0,rects:[]});h.current=E},k=(L,E)=>{u.current[L]=E},p=s.useRef({index:0,height:o,top:0,bottom:o}),R=s.useRef(0),z=s.useRef(!1);s.useEffect(()=>{const L=r();if(L==null)return;let E=0;const N=()=>{const g=t();let m=0;return le(L)||Me(L)?m=window.scrollY:m=be(L).scrollTop,Math.max(m-g,0)},C=g=>{const m=E;return E=Math.ceil(g/o),{prevCount:m}},M=g=>{const m=dt(h.current,g);m!=null&&(p.current=m,i(Math.max(0,m.index-l)),d(m.index+E+l))},v=g=>{const m=t(),S=be(g.target),H=Math.max(0,S.scrollTop-m);H>R.current?H>p.current.bottom&&M(H):H<p.current.top&&M(H),R.current=H};let j=0;const y=pe(L,g=>{if(g.height===j||g.height===0)return;j=g.height,C(g.height);const m=N();if(z.current)M(m);else{z.current=!0;let S=0;m>=o&&(S=Math.max(Math.floor(m/o)-1-l,0));const H=S+E+l;i(S),d(H)}});return L.addEventListener("scroll",v),()=>{y(),L.removeEventListener("scroll",v)}},[o,t,r,l]);const W=(L,E)=>u.current.slice(L,E).reduce((N,C)=>N+C,0),_=W(0,a),F=W(c);return{startIndex:a,endIndex:c,rowHeightList:u,updateRowRectList:b,setRowHeight:k,topBlank:_,bottomBlank:F,dataSlice:x}}function ht(e){const{bodyWrapperRef:t,bodyRootRef:n,bodyRef:r,className:o,style:l,dataSource:a,columns:i,rowKey:c,overscan:d,estimateSize:x,getScroller:u,getOffsetTop:f,rowClassName:h,onRow:b,renderBodyWrapper:k,renderBodyRoot:p,renderBody:R,renderRow:z,renderCell:W}=e,{startIndex:_,dataSlice:F,setRowHeight:L,updateRowRectList:E,rowHeightList:N,topBlank:C,bottomBlank:M}=ft({getOffsetTop:f,dataSource:a,getScroller:u,estimateSize:x,overscan:d}),v=s.useRef(new Map),j=s.useCallback((I,A,K)=>{const U=v.current.get(I)??new Map;U.set(A,K),v.current.set(I,U)},[]),y=s.useMemo(()=>({updateRowHeight:j,getRowHeightList:()=>N.current}),[N,j]),{columns:g,descriptor:m}=i,S=Z(r,I=>{if(I==null||I.offsetHeight===0)return;v.current.forEach((U,ee)=>{const ue=Array.from(U.values()).reduce((J,V)=>J+V,0);L(ee,ue)}),E(),v.current.clear()}),H=O(w.jsx("tbody",{ref:S,children:F.map((I,A)=>{const K=I[c];return w.jsx(it,{className:B(h==null?void 0:h(I,A)),rowIndex:A+_,rowData:I,columns:i,onRow:b,renderRow:z,renderCell:W},K)})}),R,{columns:g,columnDescriptor:m}),{setWidthList:P}=fe(),D=O(w.jsxs("table",{className:B(o,"virtual-table-body"),style:{...l,paddingBottom:M,paddingTop:C},ref:n,children:[w.jsx(Ee,{columns:m,onColumnSizesMeasure:P}),H]}),p,{columns:g,columnDescriptor:m}),{listen:X,notify:re}=ce(),oe=s.useRef(null);s.useEffect(()=>{const I=oe.current;if(I==null)return;const A="virtual-table-body",K=()=>{re(A,{scrollLeft:()=>I.scrollLeft,node:I})},U=X(A,ee=>{I.scrollLeft=ee});return I.addEventListener("scroll",K),()=>{I.removeEventListener("scroll",K),U()}},[X,re]);const ie=Z(oe,t);return w.jsx(Ne.Provider,{value:y,children:O(w.jsx("div",{ref:ie,className:"virtual-table-body-wrapper",children:D}),k,{columns:g,columnDescriptor:m})})}const pt=e=>{const{className:t,style:n,wrapperRef:r,columns:o,stickyHeader:l,renderHeaderWrapper:a,renderHeaderRoot:i,renderHeader:c,renderHeaderRow:d,renderHeaderCell:x}=e,{columns:u,descriptor:f}=o,h=u[u.length-1],{widthList:b}=fe(),{size:k}=He(),p=he(f,C=>C.type==="blank"?!1:q(C.column.fixed)),R=f.findIndex(C=>C.type==="blank"?!1:Q(C.column.fixed)),{listen:z,notify:W}=ce(),_=s.useRef(null);s.useEffect(()=>{const C=_.current;if(C==null)return;const M="virtual-table-header",v=()=>{W(M,{scrollLeft:()=>C.scrollLeft,node:C})},j=z(M,y=>{C.scrollLeft=y});return C.addEventListener("scroll",v),()=>{C.removeEventListener("scroll",v),j()}},[z,W]);const F=O(w.jsx("tr",{children:f.map((C,M)=>{var H;const{key:v}=C;if(C.type==="blank")return w.jsx("th",{"data-blank":!0},v);const{column:j}=C;if(j.colSpan===0)return null;const y=Y(h)===v,{className:g,style:m,...S}=((H=j.onHeaderCell)==null?void 0:H.call(j,j,M))??{};return w.jsx(s.Fragment,{children:O(s.createElement("th",{scope:"col",...S,colSpan:j.colSpan,className:B("virtual-table-header-cell",y&&"no-split",j.align!=null&&`virtual-table-align-${j.align}`,Se(j.fixed)&&"virtual-table-sticky-cell",p===M&&"virtual-table-cell-fix-left-last",R===M&&"virtual-table-cell-fix-right-first",j.className,g),style:{...m,left:q(j.fixed)?k.get(v):void 0,right:Q(j.fixed)?k.get(v):void 0}},j.title),x,{column:j,columns:u,columnWidths:b,columnDescriptor:f})},v)})}),d,{columns:u,columnDescriptor:f}),L=O(w.jsx("thead",{className:"virtual-table-thead",children:F}),c,{columns:u,columnDescriptor:f}),E=O(w.jsxs("table",{style:n,children:[w.jsx(Ee,{columns:f}),L]}),i,{columns:u,columnDescriptor:f}),N=Z(r,_);return O(w.jsx("div",{ref:N,className:B("virtual-table-header",t,{"virtual-table-header-sticky":l}),style:{top:Number.isFinite(l)?l:void 0},children:E}),a,{columns:u,columnDescriptor:f})};function mt(e,t){let n=0,r=e.length-1,o=-1;for(;n<=r;){const l=Math.floor((n+r)/2);e[l].right>t?(o=l,r=l-1):n=l+1}if(o!==-1)return e[o]}function yt(e){let t=-1;for(let n=e.length-1;n>=0;n--){const r=e[n];if(Q(r.fixed))t=n;else break}return t}function gt(e){return he(e,t=>q(t.fixed))}function wt(e){const{estimateSize:t,defaultColumnWidth:n,overscan:r,columns:o,bodyWrapper:l,columnWidths:a,disabled:i=!1}=e,c=gt(o),d=yt(o),x=c>-1?Y(o[c]):null,u=d>-1?Y(o[d]):null,[f,h]=s.useState(0),[b,k]=s.useState(0),p=s.useMemo(()=>{if(i)return[];let y=0;return o.map((g,m)=>{const S=Y(g),H=a.get(S)??t,P=y+H,D={index:m,width:H,left:y,right:P};return y=P,D})},[o,a,t,i]),R=s.useRef({index:0,width:t,left:0,right:t}),z=Re(y=>mt(p,y)),W=Re((y,g)=>{const m=z(y);m!=null&&(R.current=m,h(Math.max(0,m.index-r)),k(m.index+g+r))}),_=s.useRef(0);s.useEffect(()=>{if(i)return;const y=l.current;if(y==null)return;const g=y.offsetWidth;let m=Math.ceil(g/t);const S=()=>{const D=y.scrollLeft;D>_.current?D>R.current.right&&W(D,m):D<R.current.left&&W(D,m),_.current=D};y.addEventListener("scroll",S);let H=0;const P=pe(y,({width:D})=>{if(D===H||D===0)return;H=D;const X=y.scrollLeft;m=Math.ceil(D/t),W(X,m)});return()=>{y.removeEventListener("scroll",S),P()}},[l,t,W,r,z,i]);const F=(y,g)=>p.slice(y,g).reduce((m,S)=>m+S.width,0),L=c>-1?F(0,c+1):0,E=d>-1?F(d):0,N=Math.max(0,F(0,f)-L),C=Math.max(0,F(b)-E),M=s.useMemo(()=>{if(i)return o;const y=[...o.slice(0,c+1),...o.slice(f,b),...o.slice(d)],g=new Set;return y.filter(m=>{const S=Y(m);return g.has(S)?!1:(g.add(S),!0)})},[i,o,f,b,c,d]),v=s.useMemo(()=>M.reduce((y,g,m)=>{const S=Y(g);let H=g;return H.width==null&&H.minWidth==null&&(H={...H,width:n}),S===x?(y.push({type:"normal",key:S,column:H}),y.push({type:"blank",key:"_blank_left",width:N})):x==null&&m===0?(y.push({type:"blank",key:"_blank_left",width:N}),y.push({type:"normal",key:S,column:H})):S===u?(y.push({type:"blank",key:"_blank_right",width:C}),y.push({type:"normal",key:S,column:H})):u==null&&m===M.length-1?(y.push({type:"normal",key:S,column:H}),y.push({type:"blank",key:"_blank_right",width:C})):y.push({type:"normal",key:S,column:H}),y},[]),[M,x,u,N,C,n]);return{columns:s.useMemo(()=>({columns:M,descriptor:v}),[M,v]),columnSlice:M,lastFixedLeftIndex:c,firstFixedRightIndex:d}}function xt(e,t){const{className:n,style:r,children:o,hasFixedLeftColumn:l,hasFixedRightColumn:a,renderRoot:i,bodyScrollContainer:c}=e,d=s.useRef(null),[x,u]=s.useState(!1),[f,h]=s.useState(!1),{listen:b}=ce();s.useEffect(()=>{if(!l&&!a)return;const p=z=>{const{scrollLeft:W,clientWidth:_,scrollWidth:F}=z;l&&u(W!==0),a&&h(!(W+_>=F))},R=c.current;return R!=null&&p(R),b("__root",(z,W)=>{p(W)})},[c,l,a,b]);const k=Z(t,d);return O(w.jsx("div",{ref:k,className:B("virtual-table",x&&"virtual-table-has-fix-left",f&&"virtual-table-has-fix-right",n),style:r,children:o}),i,{})}const bt=s.forwardRef(xt);function Rt(e,t){const{bodyRootRef:n,className:r,style:o,tableBodyClassName:l,tableBodyStyle:a,columns:i,dataSource:c,rowKey:d="key",estimatedRowHeight:x=46,estimatedColumnWidth:u,overscanRows:f=5,overscanColumns:h=3,stickyHeader:b,defaultColumnWidth:k=100,pipeline:p=ne.defaultPipeline,rowClassName:R,onRow:z,getOffsetTop:W,virtualHeader:_=!0}=e,F=s.useRef(null),L=s.useRef(null),E=s.useRef(null),N=s.useRef(null),C=Z(N,n),M=s.useRef(null),v=s.useCallback(()=>{const T=F.current;if(T!=null)return Ze(T)},[]),j=s.useCallback(()=>{var $,ge;if(typeof W=="function")return W();const T=v();if(T===F.current)return 0;if(le(T)||Me(T)){const $e=(($=F.current)==null?void 0:$.getBoundingClientRect().top)??0;return window.scrollY+$e}return((ge=F.current)==null?void 0:ge.offsetTop)??0},[W,v]),{dataSource:y,columns:g,rowKey:m,rowClassName:S,render:H,renderRoot:P,renderContent:D,renderHeaderWrapper:X,renderHeaderRoot:re,renderHeader:oe,renderHeaderRow:ie,renderHeaderCell:I,renderBodyWrapper:A,renderBodyRoot:K,renderBody:U,renderRow:ee,renderCell:ue,onRow:J}=p.use({dataSource:c,rowKey:d,columns:i,estimatedRowHeight:x,headerWrapperRef:L,bodyWrapperRef:E,bodyRootRef:N,bodyRef:M,rootRef:F,getOffsetTop:j,getScroller:v}),[V,ze]=s.useState(()=>new Map),Te=s.useRef(V),me=s.useCallback(T=>{Te.current=T,ze(T)},[]),Fe=s.useMemo(()=>({widthList:V,setWidthList:me}),[V,me]),{columns:G}=wt({estimateSize:u??k,defaultColumnWidth:k,overscan:h,columns:g,bodyWrapper:E,columnWidths:V,disabled:u==null}),Ie=s.useCallback((T,$)=>B(R==null?void 0:R(T,$),S==null?void 0:S(T,$)),[R,S]),De=s.useCallback((T,$)=>({...z==null?void 0:z(T,$),...J==null?void 0:J(T,$)}),[J,z]),_e=g.some(T=>q(T.fixed)),Oe=g.some(T=>Q(T.fixed)),ye=s.useMemo(()=>({columns:g,descriptor:g.map(T=>({key:Y(T),type:"normal",column:T}))}),[g]),Be=s.useMemo(()=>_?G:ye,[_,ye,G]),Ae=O(w.jsxs(w.Fragment,{children:[w.jsx(pt,{wrapperRef:L,columns:Be,stickyHeader:b,renderHeaderWrapper:X,renderHeaderRoot:re,renderHeader:oe,renderHeaderRow:ie,renderHeaderCell:I}),w.jsx(ht,{bodyWrapperRef:E,bodyRootRef:C,bodyRef:M,className:l,style:a,columns:G,rowKey:m,dataSource:y,overscan:f,estimateSize:x,getScroller:v,getOffsetTop:j,rowClassName:Ie,onRow:De,renderBodyWrapper:A,renderBodyRoot:K,renderBody:U,renderRow:ee,renderCell:ue})]}),D,{columns:G.columns,columnDescriptor:G.descriptor}),Pe=Z(F,t),Ke=O(w.jsx(bt,{ref:Pe,className:r,style:o,hasFixedLeftColumn:_e,hasFixedRightColumn:Oe,renderRoot:P,bodyScrollContainer:E,children:Ae}),H,{columns:G.columns,columnDescriptor:G.descriptor});return w.jsx(ke.Provider,{value:Fe,children:w.jsx(Qe,{columns:g,children:w.jsx(nt,{getScroller:v,root:F,children:w.jsx(rt,{children:Ke})})})})}const Mt=s.memo(s.forwardRef(Rt));function Ct(){const e=document.createElement("div");e.style.position="absolute",e.style.width="100px",e.style.height="100px",e.style.overflow="scroll",e.style.top="-9999px",document.body.appendChild(e);const t=e.offsetWidth-e.clientWidth,n=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),{width:t,height:n}}const St=e=>{const{className:t,style:n,bottom:r,zIndex:o,bodyRef:l}=e,{listen:a,notify:i}=ce(),c=s.useRef(null);s.useEffect(()=>{const f=c.current;if(f==null)return;const h="virtual-table-sticky-bottom-scroll",b=()=>{i(h,{scrollLeft:()=>f.scrollLeft,node:f})},k=a(h,p=>{f.scrollLeft=p});return f.addEventListener("scroll",b),()=>{f.removeEventListener("scroll",b),k()}},[a,i]);const[d,x]=s.useState(0);s.useEffect(()=>{const f=l.current;if(f!=null)return pe(f,({width:h})=>{h!==0&&x(h)})},[l]);const[u]=s.useState(Ct);return w.jsx("div",{className:B("virtual-table-sticky-scroll",t),style:{...n,paddingTop:u.height>0?0:12,marginTop:u.height>0?0:u.height*-1,height:u.height,bottom:r,zIndex:o},ref:c,children:w.jsx("div",{className:"virtual-table-sticky-scroll-bar",style:{width:d}})})};function kt(e,t){const{bodyRootRef:n}=e;return{...e,renderContent(r){return w.jsxs(w.Fragment,{children:[r,w.jsx(St,{bodyRef:n,...t})]})}}}const jt=st(kt);export{Ee as C,Mt as V,st as a,Et as b,B as c,ot as d,xe as e,Re as f,Y as g,jt as h,Se as i,ce as j,Ct as k,He as l,q as m,Q as n,pe as o,Z as p,Lt as u};
