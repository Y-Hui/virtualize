import{r as f,j as c,p as z}from"./index-DwJKakmm.js";import{c as T,b as O,u as w,h as A,V}from"./index-ejmSFOcC.js";import{t as L}from"./table-selection-DfLPAlP2.js";import{t as F,c as $,b as D,d as H,a as K}from"./index-DUZR-yBh.js";import{P as B,F as E,C as j,D as M}from"./Table-D0fMLMCg.js";import{y as U,R as W,E as P}from"./index-D-bxib1x.js";const G=t=>{const{position:r,className:u,defaultCurrent:a=1,defaultPageSize:o=10,onChange:e,current:n,pageSize:g,...i}=t,p=((r==null?void 0:r[0])??"bottomRight").toLowerCase().replace(/top|bottom/,""),s="current"in t,l="pageSize"in t,[m,S]=f.useState(a),[d,h]=f.useState(o),b=s?n:m,v=l?g:d,N=(y,k)=>{s||S(y),l||h(k),e==null||e(y,k)};return c.jsx(B,{showSizeChanger:!0,...i,current:b,pageSize:v,className:T("virtual-table-pagination",`virtual-table-pagination-${p}`,u),onChange:N})},Y=f.memo(G);function q(t,r){if(r===!1)return t;const{position:u=["bottomRight"],...a}=r??{},o=u[0];return o==="none"?t:{...t,render(e){const n=f.createElement(Y,{...a,key:"__pagination__"});return o.includes("top")?c.jsxs(c.Fragment,{children:[n,e]}):c.jsxs(c.Fragment,{children:[e,n]})}}}const J=O(q),R=[E.SELECTION_ALL,E.SELECTION_INVERT,E.SELECTION_NONE];function Q(t){const{checked:r,onChange:u,indeterminate:a,selections:o,onClear:e,onSelectAll:n,onSelectInvert:g,allKeys:i,disabled:C}=t,{locale:p}=f.useContext(z.ConfigContext),s=p==null?void 0:p.Table,l={[E.SELECTION_ALL]:{key:E.SELECTION_ALL,label:s==null?void 0:s.selectAll,onClick:n},[E.SELECTION_INVERT]:{key:E.SELECTION_INVERT,label:s==null?void 0:s.selectInvert,onClick:g},[E.SELECTION_NONE]:{key:E.SELECTION_NONE,label:s==null?void 0:s.selectNone,onClick:e}},m=o===!0?R:Array.isArray(o)?o:void 0;return c.jsxs("div",{className:T("virtual-table-selection"),children:[c.jsx(j,{checked:r,indeterminate:a,disabled:C,onChange:u}),m&&c.jsx("div",{className:"virtual-table-selection-extra",children:c.jsx(M,{menu:{items:m.reduce((S,d)=>(typeof d=="string"?R.includes(d)&&S.push(l[d]):"key"in d&&S.push({key:d.key,label:d.text,onClick:()=>{var h;(h=d.onSelect)==null||h.call(d,i)}}),S),[])},children:c.jsx(U,{})})})]})}function X(t){if(t==null)return L();const{type:r,selections:u,columnWidth:a,columnTitle:o,...e}=t,n=r==="checkbox";return L({...e,component:Z,multiple:n,columnWidth:a??(u==null||!n?32:48),columnTitle:u!=null?(g,i)=>{if(o!=null){if(f.isValidElement(o))return o;if(typeof o=="function")return o(g,i)}return n?c.jsx(Q,{checked:i.value,indeterminate:i.indeterminate,disabled:i.disabled,onChange:C=>{var p;(p=i.onChange)==null||p.call(i,C.target.checked,C.nativeEvent)},onSelectAll:i.onSelectAll,onSelectInvert:i.onSelectInvert,onClear:i.onClear,allKeys:i.allKeys,selections:u}):null}:void 0})}function Z(t){const{multiple:r,value:u,onChange:a,indeterminate:o,disabled:e}=t;return r?c.jsx(j,{checked:u,indeterminate:o,disabled:e,onChange:n=>a==null?void 0:a(n.target.checked,n.nativeEvent)}):c.jsx(W,{checked:u,disabled:e,onChange:n=>a==null?void 0:a(n.target.checked,n.nativeEvent)})}function ee(t,r){if(typeof r=="number"&&Number.isFinite(r))return r;switch(t){case"small":return 39;case"large":return 65;case"middle":default:return 57}}const ne={disableResize:!0};function te(t,r){const{className:u,size:a="middle",estimatedRowHeight:o,sticky:e,rowSelection:n,loading:g,bordered:i,pipeline:C,expandable:p,summary:s,pagination:l,onChange:m,storageKey:S,scrollBarBottom:d,...h}=t,b=f.useRef({});f.useEffect(()=>{l!=null&&typeof l=="object"&&(b.current={...l,current:b.current.current??l.current,pageSize:b.current.pageSize??l.pageSize})},[l]);const v=f.useCallback(()=>{m==null||m(b.current)},[m]),N=l===!1||l==null?void 0:l.onChange,y=f.useCallback((I,_)=>{N==null||N(I,_),b.current={...b.current,current:I,pageSize:_},v()},[v,N]),k=w({pipeline:C,use:[X(n==null?void 0:{...n,extraColumnProps:ne}),F(p),$(S==null?void 0:{storageKey:S}),J(l===!1?!1:{...l,onChange:y}),{priority:200,hook:D({loading:g})},{priority:200,hook:H({children:c.jsx(P,{image:P.PRESENTED_IMAGE_SIMPLE})})},{priority:200,hook:K(s==null?void 0:{summary:s})},{priority:200,hook:A({bottom:d})}]}),x=ee(a,o);return c.jsx(V,{...h,pipeline:k,className:T(`virtual-table-${a}`,i&&"virtual-table-bordered",u),ref:r,estimatedRowHeight:x,stickyHeader:typeof e=="boolean"?e:e==null?void 0:e.offsetHeader})}const ce=f.forwardRef(te);export{ce as V};
