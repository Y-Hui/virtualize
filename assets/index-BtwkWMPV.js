var Je=Object.defineProperty;var Ze=(e,t,r)=>t in e?Je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ge=(e,t,r)=>Ze(e,typeof t!="symbol"?t+"":t,r);import{r as s,j as b}from"./index-RqRpwKDp.js";function Ie(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(r=Ie(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function q(){for(var e,t,r=0,n="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=Ie(e))&&(n&&(n+=" "),n+=t);return n}function Ee(e,t){if(e===t)return!0;if(!e||!t)return!1;const r=Object.keys(e),n=Object.keys(t),o=r.length;if(n.length!==o)return!1;for(let l=0;l<o;l+=1){const d=r[l];if(e[d]!==t[d]||!Object.prototype.hasOwnProperty.call(t,d))return!1}return!0}function we(e,t){if(e===t)return!0;if(!e||!t)return!1;const r=e.length;if(t.length!==r)return!1;for(let n=0;n<r;n+=1)if(e[n]!==t[n])return!1;return!0}function ue(e,t){if(Object.is(e,t))return!0;if(Array.isArray(e)&&Array.isArray(t))return we(e,t)?!0:e.length===t.length&&e.findIndex(n=>typeof n=="object"&&n!=null)>-1?e.every((n,o)=>Array.isArray(n)?we(n,t[o]):typeof n=="object"&&n!=null?Ee(n,t[o]):Object.is(n,t[o])):!1;if(e instanceof Map&&t instanceof Map){const r=Array.from(e.keys()),n=Array.from(t.keys());if(ue(r,n)){const o=Array.from(e.values()),l=Array.from(t.values());if(ue(o,l))return!0}return!1}return typeof e=="object"&&e!=null?Ee(e,t):!1}function xe(e){const t=e(),r=s.useRef(t);return ue(t,r.current)||(r.current=t),r.current}function A(e){return"key"in e?e.key:e.dataIndex}function ie(e,t){return typeof t=="function"?t(e):e[t]}function Q(e){return e==="left"}function U(e){return e==="right"}function We(e){return Q(e)||U(e)}const je=s.createContext(null);function Be(){const e=s.useContext(je);if(e==null)throw new Error("useColumnSizes provider not found");return e}const Ne=s.createContext(null);function et(e){const{columns:t,children:r}=e,{widthList:n}=Be(),o=s.useMemo(()=>t.map(c=>({key:A(c),fixed:c.fixed})),[t]),l=s.useMemo(()=>{let c=0;const m=o.reduce((h,C,M)=>{const{fixed:y,key:w}=C;return Q(y)&&(h[M]=c,c+=n.get(w)??0),h},[]);let R=0;const g=o.reduceRight((h,C,M)=>{const{fixed:y,key:w}=C;return U(y)&&(h[M]=R,R+=n.get(w)??0),h},[]);return o.reduce((h,C,M)=>{const{key:y,fixed:w}=C;return Q(w)?(h.set(y,m[M]),h):(U(w)&&h.set(y,g[M]),h)},new Map)},[o,n]),d=xe(()=>o),u=xe(()=>l),a=s.useMemo(()=>({size:u,fixed:d}),[d,u]);return b.jsx(Ne.Provider,{value:a,children:r})}function Le(){const e=s.useContext(Ne);if(e==null)throw new Error("useTableSticky provider not found");return e}function _(e,t,r){return typeof t=="function"?t(e,r):e}function tt(e,t,r){const{render:n}=r,o=t;if("dataIndex"in r){const l=r.dataIndex;return typeof n!="function"?o[l]:n(o[l],t,e)}return(n==null?void 0:n(t,t,e))??null}function nt(e){const{className:t,style:r,column:n,rowData:o,rowIndex:l,renderCell:d,...u}=e,{align:a,fixed:c,onCell:m}=n,R=A(n),{size:g}=Le(),{className:h,style:C,colSpan:M,rowSpan:y,...w}=(m==null?void 0:m(o,l))??{};return M===0||y===0?null:_(b.jsx("td",{...u,...w,colSpan:M,rowSpan:y,className:q("virtual-table-cell",a!=null&&`virtual-table-align-${a}`,We(c)&&"virtual-table-sticky-cell",t,n.className,h),style:{...r,...C,left:Q(c)?g.get(R):void 0,right:U(c)?g.get(R):void 0},"data-col-key":R,children:tt(l,o,n)}),d,{column:n})}const rt=s.memo(nt);function de(e,t){return Number.isFinite(e.width)?e.width:t}const ot=e=>{const{columns:t,defaultColumnWidth:r}=e;return b.jsx("colgroup",{children:t.map(n=>{const{key:o}=n;if(n.type==="blank")return b.jsx("col",{className:"blank",style:{width:n.width}},o);const{column:l}=n,d=de(l,r);return b.jsx("col",{"data-col-key":o,style:{width:d}},o)})})},ze=s.memo(ot),Fe=s.createContext(null);function Ft(){const e=s.useContext(Fe);if(e==null)throw new Error("useContainerSize provider not found");return e}const De=s.createContext(null);function st(e){const{children:t}=e,r=s.useRef(new Map),n=s.useMemo(()=>{const o=new Set;return{listen(l,d){return r.current.set(l,(u,a)=>{d(u,a)}),()=>{r.current.delete(l)}},notify(l,d){if(o.has(l)){o.delete(l);return}const{scrollLeft:u,node:a}=d;let c=window.requestAnimationFrame;c==null&&(c=m=>{m()}),r.current.forEach((m,R)=>{l!==R&&(o.add(R),c(()=>{m(u(),a)}))})}}},[]);return b.jsx(De.Provider,{value:n,children:t})}function Oe(){const e=s.useContext(De);if(e==null)throw new Error("useHorizontalScrollContext provider not found");return e}function Re(e){const{listen:t,notify:r}=Oe(),n=s.useRef(null);return s.useEffect(()=>{const o=n.current;if(o==null)return;const l=()=>{r(e,{scrollLeft:()=>o.scrollLeft,node:o})},d=()=>{o.addEventListener("scroll",l,{passive:!0})},u=()=>{o.removeEventListener("scroll",l)},a=t(e,c=>{o.style.willChange="scroll-position",o.scrollLeft=c});return d(),()=>{u(),a()}},[e,t,r]),n}const Ke=s.createContext(null);function Dt(){const e=s.useContext(Ke);if(e==null)throw new Error("useTableRowManager provider not found");return e}const lt=/auto|scroll|overlay|hidden/;function _e(e){return e instanceof Node?e.nodeType===1:!1}function ct(e,t=window){let r=e;for(;r!==t&&_e(r);){if(r===document.body)return t;const{overflow:n,overflowY:o,overflowX:l}=window.getComputedStyle(r);if(lt.test(n+o+l))return r;r=r.parentNode}return e.ownerDocument.defaultView??window}function fe(e){return Object.prototype.toString.call(e)==="[object Window]"}function it(e){return Object.prototype.toString.call(e)==="[object HTMLDocument]"}function Pe(e){return Object.prototype.toString.call(e)==="[object HTMLHtmlElement]"}function Me(e){return it(e)?e.scrollingElement:_e(e)?e:document.scrollingElement}function ut(e,t){const r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),o=Number.parseFloat(window.getComputedStyle(t).borderTopWidth)||0,l=t.scrollTop;return r.top-n.top-o+l}function Ce(e,t){if(fe(e)){const r=()=>{t({width:window.innerWidth,height:window.innerHeight})};return r(),window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}}else{const r=new ResizeObserver(n=>{const o=n[0].contentRect;t({width:o.width,height:o.height})});return r.observe(e),()=>{r.disconnect()}}}function at(e,t){let r=0,n=e.length-1,o=-1;for(;r<=n;){const l=Math.floor((r+n)/2);e[l].bottom>t?(o=l,n=l-1):r=l+1}if(o!==-1)return e[o]}const be="NormalRow";function dt(e){const{getOffsetTop:t,rowKey:r,dataSource:n,getScroller:o,estimateSize:l,overscan:d}=e,[u,a]=s.useState(0),[c,m]=s.useState(0),R=s.useMemo(()=>n.slice(u,c),[n,u,c]),g=s.useRef(new Map),h=s.useCallback((p,f,I)=>{const i=g.current.get(p)??new Map;i.set(f,I),g.current.set(p,i)},[]),C=()=>{const p=[];return n.forEach(f=>{const I=ie(f,r),i=g.current.get(I);if(i==null)p.push(l);else{let k=0;i.forEach(H=>k+=H),p.push(k)}}),p};(()=>{if(n.length===0){g.current.clear();return}n.forEach(p=>{const f=ie(p,r),I=g.current.get(f)??new Map;I.get(be)==null&&I.set(be,l),g.current.set(f,I)})})();const y=s.useRef();(y.current==null||n.length!==y.current.length)&&(y.current=C());const w=s.useRef([]),L=()=>{const{rects:p}=n.reduce((f,I,i)=>{var v;const k=ie(I,r);let H=0;(v=g.current.get(k))==null||v.forEach(S=>{H+=S});const E=f.top+H;return f.rects.push({index:i,top:f.top,height:H,bottom:E}),f.top=E,f},{top:0,rects:[]});w.current=p},W=p=>{p==null||p(),L(),y.current=w.current.map(f=>f.height)},F=s.useRef({index:0,height:l,top:0,bottom:l}),O=s.useRef(0),D=s.useRef(!1);s.useEffect(()=>{const p=o();if(p==null)return;let f=0;const I=()=>{const S=t();let T=0;return fe(p)||Pe(p)?T=window.scrollY:T=Me(p).scrollTop,Math.max(T-S,0)},i=S=>{const T=f;return f=Math.ceil(S/l),{prevCount:T}},k=S=>{const T=at(w.current,S);T!=null&&(F.current=T,a(Math.max(0,T.index-d)),m(T.index+f+d))},H=S=>{const T=t(),Y=Me(S.target),P=Math.max(0,Y.scrollTop-T);P>O.current?P>F.current.bottom&&k(P):P<F.current.top&&k(P),O.current=P};let E=0;const v=Ce(p,S=>{if(S.height===E||S.height===0)return;E=S.height,i(S.height);const T=I();if(D.current)k(T);else{D.current=!0;let Y=0;T>=l&&(Y=Math.max(Math.floor(T/l)-1-d,0));const P=Y+f+d;a(Y),m(P)}});return p.addEventListener("scroll",H),()=>{v(),p.removeEventListener("scroll",H)}},[l,t,o,d]);const B=(p,f)=>y.current.slice(p,f).reduce((I,i)=>I+i,0),j=B(0,u),z=B(c);return{startIndex:u,endIndex:c,rowHeightList:y,flushLayout:W,rowHeightByRowKey:g,setRowHeightByRowKey:h,topBlank:j,bottomBlank:z,dataSlice:R}}function Te(e){const t=s.useRef(null);return s.useLayoutEffect(()=>{t.current=e}),s.useCallback((...n)=>{var o;return(o=t.current)==null?void 0:o.call(t,...n)},[])}class ft{constructor(){this.getInstance=this.getInstance.bind(this)}getInstance(){const r={...["getCurrentProps","getColumns","getDataSource","getDOM","getRowHeightMap","getRowVirtualizeState","getScrollValueByRowIndex","getScrollValueByColumnKey","scrollToRow","scrollToColumn","scrollTo","getColumnByKey","getColumnByIndex","getColumnKeyByIndex","getColumnWidths","getColumnWidthByKey"].reduce((n,o)=>(n[o]=()=>{throw new Error(`${o}() has not been implemented yet`)},n),{}),extend:n=>{Object.keys(n).forEach(o=>{r[o]=n[o]})}};return r}}function ht(e){const[t]=s.useState(()=>e??new ft().getInstance());return t}function pt(e){const t={current:null,options:null};return(...r)=>{const n=o=>e(o,...r);return ue(r,t.options)?t.current??n:(t.options=r,t.current=n,n)}}function yt(e){return Array.isArray(e)?e.filter(t=>t!=null&&(typeof t=="function"||typeof t.hook=="function")).map(t=>typeof t=="function"?{priority:100,hook:t}:t):[]}const ae=class ae{constructor(){ge(this,"hooks",[]);this.use=this.use.bind(this)}setHooks(t){this.hooks=t}use(t){if(this.hooks.length===0)return t;const r={current:t},n={render:[],renderRoot:[],renderContent:[],renderHeaderWrapper:[],renderHeaderRoot:[],renderHeader:[],renderHeaderRow:[],renderHeaderCell:[],renderBodyWrapper:[],renderBodyRoot:[],renderBody:[],renderBodyContent:[],renderRow:[],renderCell:[]},o=[],l=[],d=this.hooks.slice();return d.sort((u,a)=>u.priority-a.priority),d.map(u=>u.hook).forEach(u=>{const a=u(r.current),{render:c,renderRoot:m,renderContent:R,renderHeaderWrapper:g,renderHeaderRoot:h,renderHeader:C,renderHeaderRow:M,renderHeaderCell:y,renderBodyWrapper:w,renderBodyRoot:L,renderBody:W,renderBodyContent:F,renderRow:O,renderCell:D,rowClassName:B,onRow:j,...z}=a;Object.entries(n).forEach(([p,f])=>{const I=a[p];typeof I=="function"&&f.push(I)}),typeof B=="function"&&o.push(B),typeof j=="function"&&l.push(j),r.current=z}),Object.entries(n).forEach(([u,a])=>{a.length>0&&(r.current[u]=(c,m)=>a.reduce((R,g)=>g(R,m),c))}),o.length>0&&(r.current.rowClassName=(u,a)=>q(...o.map(c=>c(u,a)))),l.length>0&&(r.current.onRow=(u,a)=>l.reduce((c,m)=>({...c,...m(u,a)}),{})),r.current}};ge(ae,"defaultPipeline",new ae);let te=ae;function Ot(e){const{use:t,pipeline:r}=e,n=s.useMemo(()=>({current:new te}),[]);if(t!=null){const o=yt([...t,...(r==null?void 0:r.hooks)??[]]);if(!we(n.current.hooks,o)){const l=new te;return l.setHooks(o),n.current=l,l}}return n.current}function Se(e,t){let r=-1;for(let n=0;n<e.length;n+=1)t(e[n],n)&&(r=n);return r}function mt(e){const{className:t,rowKey:r,rowIndex:n,rowData:o,columns:l,onRow:d,renderRow:u,renderCell:a,onRefCallback:c,...m}=e,{columns:R,descriptor:g}=l,h=Se(g,w=>w.type==="blank"?!1:Q(w.column.fixed)),C=g.findIndex(w=>w.type==="blank"?!1:U(w.column.fixed)),{className:M,...y}=(d==null?void 0:d(o,n))??{};return _(b.jsx("tr",{...m,...y,className:q("virtual-table-row",t,M),"data-row-index":n,ref:w=>{c==null||c({node:w,rowKey:r,rowIndex:n,rowData:o})},children:g.map((w,L)=>{const{key:W}=w;if(w.type==="blank")return b.jsx("td",{},W);const{column:F}=w;return b.jsx(rt,{className:q(h===L&&"virtual-table-cell-fix-left-last",C===L&&"virtual-table-cell-fix-right-first"),column:F,rowIndex:n,rowData:o,renderCell:a},W)})}),u,{columns:R,rowKey:r,rowIndex:n,rowData:o,columnDescriptor:g})}const gt=s.memo(mt);function wt(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function xt(...e){return t=>{e.forEach(r=>wt(r,t))}}function Z(...e){return s.useCallback(xt(...e),e)}function bt(e){const{bodyWrapperRef:t,bodyRootRef:r,bodyRef:n,className:o,style:l,defaultColumnWidth:d,dataSource:u,columns:a,rowKey:c,instance:m,overscan:R,estimateSize:g,getScroller:h,getOffsetTop:C,rowClassName:M,onRow:y,renderBodyWrapper:w,renderBodyRoot:L,renderBody:W,renderBodyContent:F,renderRow:O,renderCell:D}=e,{startIndex:B,endIndex:j,dataSlice:z,rowHeightByRowKey:p,setRowHeightByRowKey:f,flushLayout:I,rowHeightList:i,topBlank:k,bottomBlank:H}=dt({getOffsetTop:C,rowKey:c,dataSource:u,getScroller:h,estimateSize:g,overscan:R});m.extend({getRowVirtualizeState:()=>({startIndex:B,endIndex:j,overscan:R,estimateSize:g}),getRowHeightMap:()=>p.current});const E=Z(n,K=>{K==null||K.offsetHeight===0||I()}),v=s.useCallback(K=>{const{node:$,rowKey:V}=K;$!=null&&f(V,be,$.offsetHeight)},[f]),{columns:S,descriptor:T}=a,Y=_(z.map((K,$)=>{const V=ie(K,c);return b.jsx(gt,{className:q(M==null?void 0:M(K,$)),rowKey:V,rowIndex:$+B,rowData:K,columns:a,onRow:y,renderRow:O,renderCell:D,onRefCallback:v},V)}),F,{columns:S,columnDescriptor:T,startRowIndex:B}),P=_(b.jsx("tbody",{ref:E,children:Y}),W,{columns:S,columnDescriptor:T,startRowIndex:B}),ne=_(b.jsxs("table",{className:q(o,"virtual-table-body"),style:{...l,paddingBottom:H,paddingTop:k},ref:r,children:[b.jsx(ze,{columns:T,defaultColumnWidth:d}),P]}),L,{columns:S,columnDescriptor:T,startRowIndex:B}),he=Re("virtual-table-body"),pe=Z(he,t);m.extend({getScrollValueByRowIndex(K){if(h()==null)return 0;const{stickyHeader:V}=m.getCurrentProps(),{headerWrapper:re}=m.getDOM();let ee=0;return V==null||V===!1?ee=re==null?0:re.offsetHeight:ee=Number.isFinite(V)?V*-1:0,i.current.slice(0,K).reduce((oe,me)=>oe+me,0)+C()+ee},scrollToRow(K,$){m.scrollTo({top:m.getScrollValueByRowIndex(K),behavior:$})}});const ye=s.useMemo(()=>({setRowHeightByRowKey:f,getRowHeightList:()=>i.current}),[i,f]);return b.jsx(Ke.Provider,{value:ye,children:_(b.jsx("div",{ref:pe,className:"virtual-table-body-wrapper",children:ne}),w,{columns:S,columnDescriptor:T,startRowIndex:B})})}const Rt=e=>{const{className:t,style:r,defaultColumnWidth:n,wrapperRef:o,columns:l,stickyHeader:d,renderHeaderWrapper:u,renderHeaderRoot:a,renderHeader:c,renderHeaderRow:m,renderHeaderCell:R}=e,{columns:g,descriptor:h}=l,C=g[g.length-1],{widthList:M}=Be(),{size:y}=Le(),w=Se(h,j=>j.type==="blank"?!1:Q(j.column.fixed)),L=h.findIndex(j=>j.type==="blank"?!1:U(j.column.fixed)),W=Re("virtual-table-header"),F=_(b.jsx("tr",{children:h.map((j,z)=>{var E;const{key:p}=j;if(j.type==="blank")return b.jsx("th",{"data-blank":!0},p);const{column:f}=j;if(f.colSpan===0)return null;const I=A(C)===p,{className:i,style:k,...H}=((E=f.onHeaderCell)==null?void 0:E.call(f,f,z))??{};return b.jsx(s.Fragment,{children:_(s.createElement("th",{scope:"col",...H,colSpan:f.colSpan,className:q("virtual-table-header-cell",I&&"no-split",f.align!=null&&`virtual-table-align-${f.align}`,We(f.fixed)&&"virtual-table-sticky-cell",w===z&&"virtual-table-cell-fix-left-last",L===z&&"virtual-table-cell-fix-right-first",f.className,i),style:{...k,left:Q(f.fixed)?y.get(p):void 0,right:U(f.fixed)?y.get(p):void 0}},f.title),R,{column:f,columns:g,columnWidths:M,columnDescriptor:h})},p)})}),m,{columns:g,columnDescriptor:h}),O=_(b.jsx("thead",{className:"virtual-table-thead",children:F}),c,{columns:g,columnDescriptor:h}),D=_(b.jsxs("table",{style:r,children:[b.jsx(ze,{columns:h,defaultColumnWidth:n}),O]}),a,{columns:g,columnDescriptor:h}),B=Z(o,W);return _(b.jsx("div",{ref:B,className:q("virtual-table-header",t,{"virtual-table-header-sticky":d}),style:{top:Number.isFinite(d)?d:void 0},children:D}),u,{columns:g,columnDescriptor:h})},Ct=s.memo(Rt);function St(e){const{getScroller:t,root:r}=e,[n,o]=s.useState(0),[l,d]=s.useState(0),[u,a]=s.useState(800),[c,m]=s.useState(600),R=s.useRef(null);return s.useLayoutEffect(()=>{const h=t();if(h==null)return;let C;fe(h)?C=document.scrollingElement:C=h,R.current=C;const M=new ResizeObserver(y=>{const{width:w,height:L}=y[0].contentRect;o(w),d(L)});return M.observe(C),()=>{M.disconnect()}},[t]),s.useLayoutEffect(()=>{const h=r.current;if(h==null)return;const C=new ResizeObserver(M=>{const{width:y,height:w}=M[0].contentRect;a(y),m(w)});return C.observe(h),()=>{C.disconnect()}},[r]),s.useMemo(()=>({scrollContainerWidth:n,scrollContainerHeight:l,tableWidth:u,tableHeight:c}),[n,l,u,c])}function vt(e,t){const r=s.useMemo(()=>e.reduce((n,o)=>{const l=de(o,t);return n.set(A(o),l),n},new Map),[e,t]);return xe(()=>r)}function kt(e,t){let r=0,n=e.length-1,o=-1;for(;r<=n;){const l=Math.floor((r+n)/2);e[l].right>t?(o=l,n=l-1):r=l+1}if(o!==-1)return e[o]}function Ht(e){let t=-1;for(let r=e.length-1;r>=0;r--){const n=e[r];if(U(n.fixed))t=r;else break}return t}function Et(e){return Se(e,t=>Q(t.fixed))}function Mt(e){const{estimateSize:t,defaultColumnWidth:r,overscan:n,columns:o,containerWidth:l,bodyWrapper:d,disabled:u=!1}=e,a=Et(o),c=Ht(o),m=a>-1?A(o[a]):null,R=c>-1?A(o[c]):null,[g,h]=s.useState(0),[C,M]=s.useState(0),y=s.useMemo(()=>{if(u)return[];let i=0;return o.map((k,H)=>{const E=de(k,r),v=i+E,S={index:H,width:E,left:i,right:v};return i=v,S})},[u,o,r]),w=s.useRef({index:0,width:t,left:0,right:t}),L=Te(i=>kt(y,i)),W=Te((i,k)=>{const H=L(i);H!=null&&(w.current=H,h(Math.max(0,H.index-n)),M(H.index+k+n))}),F=s.useRef(0);s.useEffect(()=>{if(u)return;const i=d.current;if(i==null)return;let k=Math.ceil(l/t);const H=()=>{const S=i.scrollLeft;S>F.current?S>w.current.right&&W(S,k):S<w.current.left&&W(S,k),F.current=S};i.addEventListener("scroll",H);let E=0;const v=Ce(i,({width:S})=>{if(S===E||S===0)return;E=S;const T=i.scrollLeft;k=Math.ceil(S/t),W(T,k)});return()=>{i.removeEventListener("scroll",H),v()}},[l,d,t,W,n,L,u]);const O=(i,k)=>y.slice(i,k).reduce((H,E)=>H+E.width,0),D=a>-1?O(0,a+1):0,B=c>-1?O(c):0,j=Math.max(0,O(0,g)-D),z=Math.max(0,O(C)-B),p=s.useMemo(()=>{if(u)return o;const i=[...o.slice(0,a+1),...o.slice(g,C),...o.slice(c)],k=new Set;return i.filter(H=>{const E=A(H);return k.has(E)?!1:(k.add(E),!0)})},[u,o,g,C,a,c]),f=s.useMemo(()=>p.reduce((i,k,H)=>{const E=A(k);let v=k;return v.width==null&&v.minWidth==null&&(v={...v,width:r}),E===m?(i.push({type:"normal",key:E,column:v}),i.push({type:"blank",key:"_blank_left",width:j})):m==null&&H===0?(i.push({type:"blank",key:"_blank_left",width:j}),i.push({type:"normal",key:E,column:v})):E===R?(i.push({type:"blank",key:"_blank_right",width:z}),i.push({type:"normal",key:E,column:v})):R==null&&H===p.length-1?(i.push({type:"normal",key:E,column:v}),i.push({type:"blank",key:"_blank_right",width:z})):i.push({type:"normal",key:E,column:v}),i},[]),[p,m,R,j,z,r]);return{columns:s.useMemo(()=>({columns:p,descriptor:f}),[p,f]),columnSlice:p,lastFixedLeftIndex:a,firstFixedRightIndex:c}}function Tt(e,t){const{className:r,style:n,children:o,hasFixedLeftColumn:l,hasFixedRightColumn:d,renderRoot:u,bodyScrollContainer:a}=e,c=s.useRef(null),[m,R]=s.useState(!1),[g,h]=s.useState(!1),{listen:C}=Oe();s.useEffect(()=>{if(!l&&!d)return;const y=L=>{const{scrollLeft:W,clientWidth:F,scrollWidth:O}=L;l&&R(W!==0),d&&h(!(W+F>=O))},w=a.current;return w!=null&&y(w),C("__root",(L,W)=>{y(W)})},[a,l,d,C]);const M=Z(t,c);return _(b.jsx("div",{ref:M,className:q("virtual-table",m&&"virtual-table-has-fix-left",g&&"virtual-table-has-fix-right",r),style:n,children:o}),u,{})}const It=s.forwardRef(Tt);function Wt(e,t){const{bodyRootRef:r,instance:n,className:o,style:l,tableBodyClassName:d,tableBodyStyle:u,columns:a,dataSource:c,rowKey:m="key",estimatedRowHeight:R=46,estimatedColumnWidth:g,overscanRows:h=5,overscanColumns:C=3,stickyHeader:M,defaultColumnWidth:y=100,pipeline:w=te.defaultPipeline,rowClassName:L,onRow:W,getOffsetTop:F,virtualHeader:O=!0}=e,D=ht(n);D.extend({getCurrentProps:()=>({estimatedRowHeight:R,overscanRows:h,overscanColumns:C,defaultColumnWidth:y,...e})});const B=s.useRef(null),j=s.useRef(null),z=s.useRef(null),p=s.useRef(null),f=Z(p,r),I=s.useRef(null),i=s.useCallback(()=>{const x=B.current;if(x!=null)return ct(x)},[]),k=s.useCallback(()=>{if(typeof F=="function")return F();const x=i(),N=B.current;if(N==null||x==null||x===N)return 0;if(fe(x)||Pe(x)){const G=N.getBoundingClientRect().top;return window.scrollY+G}return ut(N,x)},[F,i]),H=St({getScroller:i,root:B}),{dataSource:E,columns:v,rowKey:S,rowClassName:T,render:Y,renderRoot:P,renderContent:ne,renderHeaderWrapper:he,renderHeaderRoot:pe,renderHeader:ye,renderHeaderRow:K,renderHeaderCell:$,renderBodyWrapper:V,renderBodyRoot:re,renderBody:ee,renderBodyContent:ve,renderRow:oe,renderCell:me,onRow:se}=w.use({dataSource:c,rowKey:m,columns:a,estimatedRowHeight:R,headerWrapperRef:j,bodyWrapperRef:z,bodyRootRef:p,bodyRef:I,rootRef:B,getOffsetTop:k,getScroller:i,instance:D});D.extend({getColumns:()=>v,getDataSource:()=>E});const le=vt(v,y);D.extend({getColumnWidths:()=>le,getColumnWidthByKey:x=>le.get(x)});const Ae=s.useMemo(()=>({widthList:le}),[le]),{columns:X}=Mt({estimateSize:g??y,defaultColumnWidth:y,overscan:C,columns:v,containerWidth:H.tableWidth,bodyWrapper:z,disabled:g==null}),$e=s.useCallback((x,N)=>q(L==null?void 0:L(x,N),T==null?void 0:T(x,N)),[L,T]),Ve=s.useCallback((x,N)=>({...W==null?void 0:W(x,N),...se==null?void 0:se(x,N)}),[se,W]),qe=v.some(x=>Q(x.fixed)),Ye=v.some(x=>U(x.fixed)),ke=s.useMemo(()=>({columns:v,descriptor:v.map(x=>({key:A(x),type:"normal",column:x}))}),[v]),Qe=s.useMemo(()=>O?X:ke,[O,ke,X]);D.extend({getDOM:()=>({root:B.current,headerWrapper:j.current,bodyWrapper:z.current,bodyRoot:p.current,body:I.current}),scrollTo:x=>{var J;const{left:N,top:G}=x;if(N!=null&&((J=z.current)==null||J.scrollTo(x)),G!=null){const ce=i();if(ce==null){console.error("The scroller DOM is not obtained, and scrolling is not possible.");return}ce.scrollTo(x)}},getScrollValueByColumnKey:x=>{let N=0,G=0;for(const J of v){const ce=A(J),He=de(J,y);if(Q(J.fixed)&&(G+=He),ce===x)break;N+=He}return N-G},scrollToColumn:(x,N)=>{D.scrollTo({left:D.getScrollValueByColumnKey(x),behavior:N})},getColumnByKey:x=>v.find(N=>A(N)===x),getColumnByIndex:x=>v[x],getColumnKeyByIndex:x=>{const N=D.getColumnByIndex(x);if(N!=null)return A(N)}});const Ue=_(b.jsxs(b.Fragment,{children:[b.jsx(Ct,{wrapperRef:j,defaultColumnWidth:y,columns:Qe,stickyHeader:M,renderHeaderWrapper:he,renderHeaderRoot:pe,renderHeader:ye,renderHeaderRow:K,renderHeaderCell:$}),b.jsx(bt,{instance:D,bodyWrapperRef:z,bodyRootRef:f,bodyRef:I,className:d,style:u,defaultColumnWidth:y,columns:X,rowKey:S,dataSource:E,overscan:h,estimateSize:R,getScroller:i,getOffsetTop:k,rowClassName:$e,onRow:Ve,renderBodyWrapper:V,renderBodyRoot:re,renderBody:ee,renderBodyContent:ve,renderRow:oe,renderCell:me})]}),ne,{columns:X.columns,columnDescriptor:X.descriptor}),Xe=Z(B,t),Ge=_(b.jsx(It,{ref:Xe,className:o,style:l,hasFixedLeftColumn:qe,hasFixedRightColumn:Ye,renderRoot:P,bodyScrollContainer:z,children:Ue}),Y,{columns:X.columns,columnDescriptor:X.descriptor});return b.jsx(je.Provider,{value:Ae,children:b.jsx(et,{columns:v,children:b.jsx(Fe.Provider,{value:H,children:b.jsx(st,{children:Ge})})})})}const Kt=s.memo(s.forwardRef(Wt));function jt(){const e=document.createElement("div");e.style.position="absolute",e.style.width="100px",e.style.height="100px",e.style.overflow="scroll",e.style.top="-9999px",document.body.appendChild(e);const t=e.offsetWidth-e.clientWidth,r=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),{width:t,height:r}}const Bt=e=>{const{className:t,style:r,bottom:n,zIndex:o,bodyRef:l}=e,d=Re("virtual-table-sticky-bottom-scroll"),[u,a]=s.useState(0);s.useEffect(()=>{const m=l.current;if(m!=null)return Ce(m,({width:R})=>{R!==0&&a(R)})},[l]);const[c]=s.useState(jt);return b.jsx("div",{className:q("virtual-table-sticky-scroll",t),style:{...r,"--virtual-table-sticky-scroll-bottom":Number.isFinite(n)?`${n}px`:n,paddingTop:c.height>0?0:15,marginTop:c.height>0?0:c.height*-1,height:c.height+1,zIndex:o},ref:d,children:b.jsx("div",{className:"virtual-table-sticky-scroll-bar",style:{width:u}})})};function Nt(e,t){const{bodyRootRef:r}=e;return{...e,renderContent(n){return b.jsxs(b.Fragment,{children:[n,b.jsx(Bt,{bodyRef:r,...t})]})}}}const _t=pt(Nt);export{ze as C,Kt as V,ht as a,pt as b,q as c,de as d,Ft as e,Dt as f,A as g,_t as h,U as i,xe as j,Te as k,We as l,ie as m,Le as n,Q as o,Se as p,Ce as q,jt as r,Re as s,Z as t,Ot as u};
