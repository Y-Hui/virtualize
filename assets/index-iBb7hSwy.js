var Je=Object.defineProperty;var Ze=(e,t,r)=>t in e?Je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ge=(e,t,r)=>Ze(e,typeof t!="symbol"?t+"":t,r);import{r as s,j as x}from"./index-q0ta11zX.js";function Ie(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(r=Ie(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Y(){for(var e,t,r=0,n="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=Ie(e))&&(n&&(n+=" "),n+=t);return n}function Ee(e,t){if(e===t)return!0;if(!e||!t)return!1;const r=Object.keys(e),n=Object.keys(t),o=r.length;if(n.length!==o)return!1;for(let l=0;l<o;l+=1){const f=r[l];if(e[f]!==t[f]||!Object.prototype.hasOwnProperty.call(t,f))return!1}return!0}function we(e,t){if(e===t)return!0;if(!e||!t)return!1;const r=e.length;if(t.length!==r)return!1;for(let n=0;n<r;n+=1)if(e[n]!==t[n])return!1;return!0}function ae(e,t){if(Object.is(e,t))return!0;if(Array.isArray(e)&&Array.isArray(t))return we(e,t)?!0:e.length===t.length&&e.findIndex(n=>typeof n=="object"&&n!=null)>-1?e.every((n,o)=>Array.isArray(n)?we(n,t[o]):typeof n=="object"&&n!=null?Ee(n,t[o]):Object.is(n,t[o])):!1;if(e instanceof Map&&t instanceof Map){const r=Array.from(e.keys()),n=Array.from(t.keys());if(ae(r,n)){const o=Array.from(e.values()),l=Array.from(t.values());if(ae(o,l))return!0}return!1}return typeof e=="object"&&e!=null?Ee(e,t):!1}function xe(e){const t=e(),r=s.useRef(t);return ae(t,r.current)||(r.current=t),r.current}function $(e){return"key"in e?e.key:e.dataIndex}function ue(e,t){return typeof t=="function"?t(e):e[t]}function U(e){return e==="left"}function X(e){return e==="right"}function We(e){return U(e)||X(e)}const je=s.createContext(null);function Be(){const e=s.useContext(je);if(e==null)throw new Error("useColumnSizes provider not found");return e}const Ne=s.createContext(null);function et(e){const{columns:t,children:r}=e,{widthList:n}=Be(),o=s.useMemo(()=>t.map(i=>({key:$(i),fixed:i.fixed})),[t]),l=s.useMemo(()=>{let i=0;const y=o.reduce((h,R,E)=>{const{fixed:p,key:g}=R;return U(p)&&(h[E]=i,i+=n.get(g)??0),h},[]);let b=0;const m=o.reduceRight((h,R,E)=>{const{fixed:p,key:g}=R;return X(p)&&(h[E]=b,b+=n.get(g)??0),h},[]);return o.reduce((h,R,E)=>{const{key:p,fixed:g}=R;return U(g)?(h.set(p,y[E]),h):(X(g)&&h.set(p,m[E]),h)},new Map)},[o,n]),f=xe(()=>o),u=xe(()=>l),d=s.useMemo(()=>({size:u,fixed:f}),[f,u]);return x.jsx(Ne.Provider,{value:d,children:r})}function Le(){const e=s.useContext(Ne);if(e==null)throw new Error("useTableSticky provider not found");return e}function P(e,t,r){return typeof t=="function"?t(e,r):e}function tt(e,t,r){const{render:n}=r,o=t;if("dataIndex"in r){const l=r.dataIndex;return typeof n!="function"?o[l]:n(o[l],t,e)}return(n==null?void 0:n(t,t,e))??null}function nt(e){const{className:t,style:r,column:n,rowData:o,rowIndex:l,renderCell:f,...u}=e,{align:d,fixed:i,onCell:y}=n,b=$(n),{size:m}=Le(),{className:h,style:R,colSpan:E,rowSpan:p,...g}=(y==null?void 0:y(o,l))??{};return E===0||p===0?null:P(x.jsx("td",{...u,...g,colSpan:E,rowSpan:p,className:Y("virtual-table-cell",d!=null&&`virtual-table-align-${d}`,We(i)&&"virtual-table-sticky-cell",t,n.className,h),style:{...r,...R,left:U(i)?m.get(b):void 0,right:X(i)?m.get(b):void 0},"data-col-key":b,children:tt(l,o,n)}),f,{column:n})}const rt=s.memo(nt);function fe(e,t){return Number.isFinite(e.width)?e.width:t}const ot=e=>{const{columns:t,defaultColumnWidth:r}=e;return x.jsx("colgroup",{children:t.map(n=>{const{key:o}=n;if(n.type==="blank")return x.jsx("col",{className:"blank",style:{width:n.width}},o);const{column:l}=n,f=fe(l,r);return x.jsx("col",{"data-col-key":o,style:{width:f}},o)})})},Fe=s.memo(ot),ze=s.createContext(null);function zt(){const e=s.useContext(ze);if(e==null)throw new Error("useContainerSize provider not found");return e}const De=s.createContext(null);function st(e){const{children:t}=e,r=s.useRef(new Map),n=s.useMemo(()=>{const o=new Set;return{listen(l,f){return r.current.set(l,(u,d)=>{f(u,d)}),()=>{r.current.delete(l)}},notify(l,f){if(o.has(l)){o.delete(l);return}const{scrollLeft:u,node:d}=f;let i=window.requestAnimationFrame;i==null&&(i=y=>{y()}),r.current.forEach((y,b)=>{l!==b&&(o.add(b),i(()=>{y(u(),d)}))})}}},[]);return x.jsx(De.Provider,{value:n,children:t})}function Oe(){const e=s.useContext(De);if(e==null)throw new Error("useHorizontalScrollContext provider not found");return e}function Re(e){const{listen:t,notify:r}=Oe(),n=s.useRef(null);return s.useEffect(()=>{const o=n.current;if(o==null)return;const l=()=>{r(e,{scrollLeft:()=>o.scrollLeft,node:o})},f=()=>{o.addEventListener("scroll",l,{passive:!0})},u=()=>{o.removeEventListener("scroll",l)},d=t(e,i=>{o.style.willChange="scroll-position",o.scrollLeft=i});return f(),()=>{u(),d()}},[e,t,r]),n}const Ke=s.createContext(null);function Dt(){const e=s.useContext(Ke);if(e==null)throw new Error("useTableRowManager provider not found");return e}const lt=/auto|scroll|overlay|hidden/;function _e(e){return e instanceof Node?e.nodeType===1:!1}function ct(e,t=window){let r=e;for(;r!==t&&_e(r);){if(r===document.body)return t;const{overflow:n,overflowY:o,overflowX:l}=window.getComputedStyle(r);if(lt.test(n+o+l))return r;r=r.parentNode}return e.ownerDocument.defaultView??window}function he(e){return Object.prototype.toString.call(e)==="[object Window]"}function it(e){return Object.prototype.toString.call(e)==="[object HTMLDocument]"}function Pe(e){return Object.prototype.toString.call(e)==="[object HTMLHtmlElement]"}function Me(e){return it(e)?e.scrollingElement:_e(e)?e:document.scrollingElement}function ut(e,t){const r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),o=Number.parseFloat(window.getComputedStyle(t).borderTopWidth)||0,l=t.scrollTop;return r.top-n.top-o+l}function Ce(e,t){if(he(e)){const r=()=>{t({width:window.innerWidth,height:window.innerHeight})};return r(),window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}}else{const r=new ResizeObserver(n=>{const o=n[0].contentRect;t({width:o.width,height:o.height})});return r.observe(e),()=>{r.disconnect()}}}function at(e,t){let r=0,n=e.length-1,o=-1;for(;r<=n;){const l=Math.floor((r+n)/2);e[l].bottom>t?(o=l,n=l-1):r=l+1}if(o!==-1)return e[o]}const be="NormalRow";function dt(e){const{getOffsetTop:t,rowKey:r,dataSource:n,getScroller:o,estimateSize:l,overscan:f}=e,[u,d]=s.useState(0),[i,y]=s.useState(0),b=s.useMemo(()=>n.slice(u,i),[n,u,i]),m=s.useRef(new Map),h=s.useCallback((a,k,c)=>{const C=m.current.get(a)??new Map;C.set(k,c),m.current.set(a,C)},[]),R=()=>{const a=[];return n.forEach(k=>{const c=ue(k,r),C=m.current.get(c);if(C==null)a.push(l);else{let H=0;C.forEach(S=>H+=S),a.push(H)}}),a};(()=>{if(n.length===0){m.current.clear();return}n.forEach(a=>{const k=ue(a,r),c=m.current.get(k)??new Map;c.get(be)==null&&c.set(be,l),m.current.set(k,c)})})();const p=s.useRef();(p.current==null||n.length!==p.current.length)&&(p.current=R());const g=s.useRef([]),N=()=>{const{rects:a}=n.reduce((k,c,C)=>{var I;const H=ue(c,r);let S=0;(I=m.current.get(H))==null||I.forEach(M=>{S+=M});const v=k.top+S;return k.rects.push({index:C,top:k.top,height:S,bottom:v}),k.top=v,k},{top:0,rects:[]});g.current=a},W=a=>{a==null||a(),N(),p.current=g.current.map(k=>k.height)},D=s.useRef({index:0,height:l,top:0,bottom:l}),K=n.length,O=s.useRef(0),j=s.useRef(!1);s.useEffect(()=>{const a=o();if(a==null)return;let k=0;const c=()=>{const M=t();let z=0;return he(a)||Pe(a)?z=window.scrollY:z=Me(a).scrollTop,Math.max(z-M,0)},C=M=>{const z=k;return k=Math.ceil(M/l),{prevCount:z}},H=M=>{const z=at(g.current,M);z!=null&&(D.current=z,d(Math.max(0,z.index-f)),y(z.index+k+f))},S=M=>{const z=t(),Q=Me(M.target),A=Math.max(0,Q.scrollTop-z);A>O.current?A>D.current.bottom&&H(A):A<D.current.top&&H(A),O.current=A};let v=0;const I=Ce(a,M=>{if(M.height===v||M.height===0)return;v=M.height,C(M.height);const z=c();if(j.current)H(z);else{j.current=!0;let Q=0;z>=l&&(Q=Math.max(Math.floor(z/l)-1-f,0));const A=Q+k+f;d(Q),y(A)}});return a.addEventListener("scroll",S),()=>{I(),a.removeEventListener("scroll",S)}},[l,t,o,f,K]);const T=(a,k)=>p.current.slice(a,k).reduce((c,C)=>c+C,0),F=T(0,u),L=T(i);return{startIndex:u,endIndex:i,rowHeightList:p,flushLayout:W,rowHeightByRowKey:m,setRowHeightByRowKey:h,topBlank:F,bottomBlank:L,dataSlice:b}}function Te(e){const t=s.useRef(null);return s.useLayoutEffect(()=>{t.current=e}),s.useCallback((...n)=>{var o;return(o=t.current)==null?void 0:o.call(t,...n)},[])}class ft{constructor(){this.getInstance=this.getInstance.bind(this)}getInstance(){const r={...["getCurrentProps","getColumns","getDataSource","getDOM","getRowHeightMap","getRowVirtualizeState","getScrollValueByRowIndex","getScrollValueByColumnKey","scrollToRow","scrollToColumn","scrollTo","getColumnByKey","getColumnByIndex","getColumnKeyByIndex","getColumnWidths","getColumnWidthByKey"].reduce((n,o)=>(n[o]=()=>{throw new Error(`${o}() has not been implemented yet`)},n),{}),extend:n=>{Object.keys(n).forEach(o=>{r[o]=n[o]})}};return r}}function ht(e){const[t]=s.useState(()=>e??new ft().getInstance());return t}function pt(e){const t={current:null,options:null};return(...r)=>{const n=o=>e(o,...r);return ae(r,t.options)?t.current??n:(t.options=r,t.current=n,n)}}function yt(e){return Array.isArray(e)?e.filter(t=>t!=null&&(typeof t=="function"||typeof t.hook=="function")).map(t=>typeof t=="function"?{priority:100,hook:t}:t):[]}const de=class de{constructor(){ge(this,"hooks",[]);this.use=this.use.bind(this)}setHooks(t){this.hooks=t}use(t){if(this.hooks.length===0)return t;const r={current:t},n={render:[],renderRoot:[],renderContent:[],renderHeaderWrapper:[],renderHeaderRoot:[],renderHeader:[],renderHeaderRow:[],renderHeaderCell:[],renderBodyWrapper:[],renderBodyRoot:[],renderBody:[],renderBodyContent:[],renderRow:[],renderCell:[]},o=[],l=[],f=this.hooks.slice();return f.sort((u,d)=>u.priority-d.priority),f.map(u=>u.hook).forEach(u=>{const d=u(r.current),{render:i,renderRoot:y,renderContent:b,renderHeaderWrapper:m,renderHeaderRoot:h,renderHeader:R,renderHeaderRow:E,renderHeaderCell:p,renderBodyWrapper:g,renderBodyRoot:N,renderBody:W,renderBodyContent:D,renderRow:K,renderCell:O,rowClassName:j,onRow:T,...F}=d;Object.entries(n).forEach(([L,a])=>{const k=d[L];typeof k=="function"&&a.push(k)}),typeof j=="function"&&o.push(j),typeof T=="function"&&l.push(T),r.current=F}),Object.entries(n).forEach(([u,d])=>{d.length>0&&(r.current[u]=(i,y)=>d.reduce((b,m)=>m(b,y),i))}),o.length>0&&(r.current.rowClassName=(u,d)=>Y(...o.map(i=>i(u,d)))),l.length>0&&(r.current.onRow=(u,d)=>l.reduce((i,y)=>({...i,...y(u,d)}),{})),r.current}};ge(de,"defaultPipeline",new de);let ne=de;function Ot(e){const{use:t,pipeline:r}=e,n=s.useMemo(()=>({current:new ne}),[]);if(t!=null){const o=yt([...t,...(r==null?void 0:r.hooks)??[]]);if(!we(n.current.hooks,o)){const l=new ne;return l.setHooks(o),n.current=l,l}}return n.current}function Se(e,t){let r=-1;for(let n=0;n<e.length;n+=1)t(e[n],n)&&(r=n);return r}function mt(e){const{className:t,rowKey:r,rowIndex:n,rowData:o,columns:l,onRow:f,renderRow:u,renderCell:d,onRefCallback:i,...y}=e,{columns:b,descriptor:m}=l,h=Se(m,g=>g.type==="blank"?!1:U(g.column.fixed)),R=m.findIndex(g=>g.type==="blank"?!1:X(g.column.fixed)),{className:E,...p}=(f==null?void 0:f(o,n))??{};return P(x.jsx("tr",{...y,...p,className:Y("virtual-table-row",t,E),"data-row-index":n,ref:g=>{i==null||i({node:g,rowKey:r,rowIndex:n,rowData:o})},children:m.map((g,N)=>{const{key:W}=g;if(g.type==="blank")return x.jsx("td",{},W);const{column:D}=g;return x.jsx(rt,{className:Y(h===N&&"virtual-table-cell-fix-left-last",R===N&&"virtual-table-cell-fix-right-first"),column:D,rowIndex:n,rowData:o,renderCell:d},W)})}),u,{columns:b,rowKey:r,rowIndex:n,rowData:o,columnDescriptor:m})}const gt=s.memo(mt);function wt(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function xt(...e){return t=>{e.forEach(r=>wt(r,t))}}function ee(...e){return s.useCallback(xt(...e),e)}function bt(e){const{bodyWrapperRef:t,bodyRootRef:r,bodyRef:n,className:o,style:l,defaultColumnWidth:f,dataSource:u,columns:d,rowKey:i,instance:y,overscan:b,estimateSize:m,getScroller:h,getOffsetTop:R,rowClassName:E,onRow:p,renderBodyWrapper:g,renderBodyRoot:N,renderBody:W,renderBodyContent:D,renderRow:K,renderCell:O}=e,{startIndex:j,endIndex:T,dataSlice:F,rowHeightByRowKey:L,setRowHeightByRowKey:a,flushLayout:k,rowHeightList:c,topBlank:C,bottomBlank:H}=dt({getOffsetTop:R,rowKey:i,dataSource:u,getScroller:h,estimateSize:m,overscan:b});y.extend({getRowVirtualizeState:()=>({startIndex:j,endIndex:T,overscan:b,estimateSize:m}),getRowHeightMap:()=>L.current});const S=ee(n,_=>{_==null||_.offsetHeight===0||k()}),v=s.useCallback(_=>{const{node:V,rowKey:q}=_;V!=null&&a(q,be,V.offsetHeight)},[a]),{columns:I,descriptor:M}=d,z=P(F.map((_,V)=>{const q=ue(_,i);return x.jsx(gt,{className:Y(E==null?void 0:E(_,V)),rowKey:q,rowIndex:V+j,rowData:_,columns:d,onRow:p,renderRow:K,renderCell:O,onRefCallback:v},q)}),D,{columns:I,columnDescriptor:M,startRowIndex:j}),Q=P(x.jsx("tbody",{ref:S,children:z}),W,{columns:I,columnDescriptor:M,startRowIndex:j}),A=P(x.jsxs("table",{className:Y(o,"virtual-table-body"),style:{...l,paddingBottom:H,paddingTop:C},ref:r,children:[x.jsx(Fe,{columns:M,defaultColumnWidth:f}),Q]}),N,{columns:I,columnDescriptor:M,startRowIndex:j}),re=Re("virtual-table-body"),pe=ee(re,t);y.extend({getScrollValueByRowIndex(_){if(h()==null)return 0;const{stickyHeader:q}=y.getCurrentProps(),{headerWrapper:oe}=y.getDOM();let te=0;return q==null||q===!1?te=oe==null?0:oe.offsetHeight:te=Number.isFinite(q)?q*-1:0,c.current.slice(0,_).reduce((se,me)=>se+me,0)+R()+te},scrollToRow(_,V){y.scrollTo({top:y.getScrollValueByRowIndex(_),behavior:V})}});const ye=s.useMemo(()=>({setRowHeightByRowKey:a,getRowHeightList:()=>c.current}),[c,a]);return x.jsx(Ke.Provider,{value:ye,children:P(x.jsx("div",{ref:pe,className:"virtual-table-body-wrapper",children:A}),g,{columns:I,columnDescriptor:M,startRowIndex:j})})}const Rt=e=>{const{className:t,style:r,defaultColumnWidth:n,wrapperRef:o,columns:l,stickyHeader:f,renderHeaderWrapper:u,renderHeaderRoot:d,renderHeader:i,renderHeaderRow:y,renderHeaderCell:b}=e,{columns:m,descriptor:h}=l,R=m[m.length-1],{widthList:E}=Be(),{size:p}=Le(),g=Se(h,T=>T.type==="blank"?!1:U(T.column.fixed)),N=h.findIndex(T=>T.type==="blank"?!1:X(T.column.fixed)),W=Re("virtual-table-header"),D=P(x.jsx("tr",{children:h.map((T,F)=>{var S;const{key:L}=T;if(T.type==="blank")return x.jsx("th",{"data-blank":!0},L);const{column:a}=T;if(a.colSpan===0)return null;const k=$(R)===L,{className:c,style:C,...H}=((S=a.onHeaderCell)==null?void 0:S.call(a,a,F))??{};return x.jsx(s.Fragment,{children:P(s.createElement("th",{scope:"col",...H,colSpan:a.colSpan,className:Y("virtual-table-header-cell",k&&"no-split",a.align!=null&&`virtual-table-align-${a.align}`,We(a.fixed)&&"virtual-table-sticky-cell",g===F&&"virtual-table-cell-fix-left-last",N===F&&"virtual-table-cell-fix-right-first",a.className,c),style:{...C,left:U(a.fixed)?p.get(L):void 0,right:X(a.fixed)?p.get(L):void 0}},a.title),b,{column:a,columns:m,columnWidths:E,columnDescriptor:h})},L)})}),y,{columns:m,columnDescriptor:h}),K=P(x.jsx("thead",{className:"virtual-table-thead",children:D}),i,{columns:m,columnDescriptor:h}),O=P(x.jsxs("table",{style:r,children:[x.jsx(Fe,{columns:h,defaultColumnWidth:n}),K]}),d,{columns:m,columnDescriptor:h}),j=ee(o,W);return P(x.jsx("div",{ref:j,className:Y("virtual-table-header",t,{"virtual-table-header-sticky":f}),style:{top:Number.isFinite(f)?f:void 0},children:O}),u,{columns:m,columnDescriptor:h})},Ct=s.memo(Rt);function St(e){const{getScroller:t,root:r}=e,[n,o]=s.useState(0),[l,f]=s.useState(0),[u,d]=s.useState(800),[i,y]=s.useState(600),b=s.useRef(null);return s.useLayoutEffect(()=>{const h=t();if(h==null)return;let R;he(h)?R=document.scrollingElement:R=h,b.current=R;const E=new ResizeObserver(p=>{const{width:g,height:N}=p[0].contentRect;o(g),f(N)});return E.observe(R),()=>{E.disconnect()}},[t]),s.useLayoutEffect(()=>{const h=r.current;if(h==null)return;const R=new ResizeObserver(E=>{const{width:p,height:g}=E[0].contentRect;d(p),y(g)});return R.observe(h),()=>{R.disconnect()}},[r]),s.useMemo(()=>({scrollContainerWidth:n,scrollContainerHeight:l,tableWidth:u,tableHeight:i}),[n,l,u,i])}function vt(e,t){const r=s.useMemo(()=>e.reduce((n,o)=>{const l=fe(o,t);return n.set($(o),l),n},new Map),[e,t]);return xe(()=>r)}function kt(e,t){let r=0,n=e.length-1,o=-1;for(;r<=n;){const l=Math.floor((r+n)/2);e[l].right>t?(o=l,n=l-1):r=l+1}if(o!==-1)return e[o]}function Ht(e){let t=-1;for(let r=e.length-1;r>=0;r--){const n=e[r];if(X(n.fixed))t=r;else break}return t}function Et(e){return Se(e,t=>U(t.fixed))}function Mt(e){const{estimateSize:t,defaultColumnWidth:r,overscan:n,columns:o,containerWidth:l,bodyWrapper:f,disabled:u=!1}=e,d=Et(o),i=Ht(o),y=d>-1?$(o[d]):null,b=i>-1?$(o[i]):null,[m,h]=s.useState(0),[R,E]=s.useState(0),p=s.useMemo(()=>{if(u)return[];let c=0;return o.map((C,H)=>{const S=fe(C,r),v=c+S,I={index:H,width:S,left:c,right:v};return c=v,I})},[u,o,r]),g=s.useRef({index:0,width:t,left:0,right:t}),N=Te(c=>kt(p,c)),W=Te((c,C)=>{const H=N(c);H!=null&&(g.current=H,h(Math.max(0,H.index-n)),E(H.index+C+n))}),D=s.useRef(0);s.useEffect(()=>{if(u)return;const c=f.current;if(c==null)return;let C=Math.ceil(l/t);const H=()=>{const I=c.scrollLeft;I>D.current?I>g.current.right&&W(I,C):I<g.current.left&&W(I,C),D.current=I};c.addEventListener("scroll",H);let S=0;const v=Ce(c,({width:I})=>{if(I===S||I===0)return;S=I;const M=c.scrollLeft;C=Math.ceil(I/t),W(M,C)});return()=>{c.removeEventListener("scroll",H),v()}},[l,f,t,W,n,N,u]);const K=(c,C)=>p.slice(c,C).reduce((H,S)=>H+S.width,0),O=d>-1?K(0,d+1):0,j=i>-1?K(i):0,T=Math.max(0,K(0,m)-O),F=Math.max(0,K(R)-j),L=s.useMemo(()=>{if(u)return o;const c=[...o.slice(0,d+1),...o.slice(m,R),...o.slice(i)],C=new Set;return c.filter(H=>{const S=$(H);return C.has(S)?!1:(C.add(S),!0)})},[u,o,m,R,d,i]),a=s.useMemo(()=>L.reduce((c,C,H)=>{const S=$(C);let v=C;return v.width==null&&v.minWidth==null&&(v={...v,width:r}),u?c.push({type:"normal",key:S,column:v}):S===y?(c.push({type:"normal",key:S,column:v}),c.push({type:"blank",key:"_blank_left",width:T})):y==null&&H===0?(c.push({type:"blank",key:"_blank_left",width:T}),c.push({type:"normal",key:S,column:v})):S===b?(c.push({type:"blank",key:"_blank_right",width:F}),c.push({type:"normal",key:S,column:v})):b==null&&H===L.length-1?(c.push({type:"normal",key:S,column:v}),c.push({type:"blank",key:"_blank_right",width:F})):c.push({type:"normal",key:S,column:v}),c},[]),[L,u,r,y,b,T,F]);return{columns:s.useMemo(()=>({columns:L,descriptor:a}),[L,a]),columnSlice:L,lastFixedLeftIndex:d,firstFixedRightIndex:i}}function Tt(e,t){const{className:r,style:n,children:o,hasFixedLeftColumn:l,hasFixedRightColumn:f,renderRoot:u,bodyScrollContainer:d}=e,i=s.useRef(null),[y,b]=s.useState(!1),[m,h]=s.useState(!1),{listen:R}=Oe();s.useEffect(()=>{if(!l&&!f)return;const p=N=>{const{scrollLeft:W,clientWidth:D,scrollWidth:K}=N;l&&b(W!==0),f&&h(!(W+D>=K))},g=d.current;return g!=null&&p(g),R("__root",(N,W)=>{p(W)})},[d,l,f,R]);const E=ee(t,i);return P(x.jsx("div",{ref:E,className:Y("virtual-table",y&&"virtual-table-has-fix-left",m&&"virtual-table-has-fix-right",r),style:n,children:o}),u,{})}const It=s.forwardRef(Tt);function Wt(e,t){const{bodyRootRef:r,instance:n,className:o,style:l,tableBodyClassName:f,tableBodyStyle:u,columns:d,dataSource:i,rowKey:y="key",estimatedRowHeight:b=46,estimatedColumnWidth:m,overscanRows:h=5,overscanColumns:R=3,stickyHeader:E,defaultColumnWidth:p=100,pipeline:g=ne.defaultPipeline,rowClassName:N,onRow:W,getOffsetTop:D,virtualHeader:K=!0}=e,O=ht(n);O.extend({getCurrentProps:()=>({estimatedRowHeight:b,overscanRows:h,overscanColumns:R,defaultColumnWidth:p,...e})});const j=s.useRef(null),T=s.useRef(null),F=s.useRef(null),L=s.useRef(null),a=ee(L,r),k=s.useRef(null),c=s.useCallback(()=>{const w=j.current;if(w!=null)return ct(w)},[]),C=s.useCallback(()=>{if(typeof D=="function")return D();const w=c(),B=j.current;if(B==null||w==null||w===B)return 0;if(he(w)||Pe(w)){const J=B.getBoundingClientRect().top;return window.scrollY+J}return ut(B,w)},[D,c]),H=St({getScroller:c,root:j}),{dataSource:S,columns:v,rowKey:I,rowClassName:M,render:z,renderRoot:Q,renderContent:A,renderHeaderWrapper:re,renderHeaderRoot:pe,renderHeader:ye,renderHeaderRow:_,renderHeaderCell:V,renderBodyWrapper:q,renderBodyRoot:oe,renderBody:te,renderBodyContent:ve,renderRow:se,renderCell:me,onRow:le}=g.use({dataSource:i,rowKey:y,columns:d,estimatedRowHeight:b,headerWrapperRef:T,bodyWrapperRef:F,bodyRootRef:L,bodyRef:k,rootRef:j,getOffsetTop:C,getScroller:c,instance:O});O.extend({getColumns:()=>v,getDataSource:()=>S});const ce=vt(v,p);O.extend({getColumnWidths:()=>ce,getColumnWidthByKey:w=>ce.get(w)});const Ae=s.useMemo(()=>({widthList:ce}),[ce]),{columns:G}=Mt({estimateSize:m??p,defaultColumnWidth:p,overscan:R,columns:v,containerWidth:H.tableWidth,bodyWrapper:F,disabled:m==null}),$e=s.useCallback((w,B)=>Y(N==null?void 0:N(w,B),M==null?void 0:M(w,B)),[N,M]),Ve=s.useCallback((w,B)=>({...W==null?void 0:W(w,B),...le==null?void 0:le(w,B)}),[le,W]),qe=v.some(w=>U(w.fixed)),Ye=v.some(w=>X(w.fixed)),ke=s.useMemo(()=>({columns:v,descriptor:v.map(w=>({key:$(w),type:"normal",column:w}))}),[v]),Qe=s.useMemo(()=>K?G:ke,[K,ke,G]);O.extend({getDOM:()=>({root:j.current,headerWrapper:T.current,bodyWrapper:F.current,bodyRoot:L.current,body:k.current}),scrollTo:w=>{var Z;const{left:B,top:J}=w;if(B!=null&&((Z=F.current)==null||Z.scrollTo(w)),J!=null){const ie=c();if(ie==null){console.error("The scroller DOM is not obtained, and scrolling is not possible.");return}ie.scrollTo(w)}},getScrollValueByColumnKey:w=>{let B=0,J=0;for(const Z of v){const ie=$(Z),He=fe(Z,p);if(U(Z.fixed)&&(J+=He),ie===w)break;B+=He}return B-J},scrollToColumn:(w,B)=>{O.scrollTo({left:O.getScrollValueByColumnKey(w),behavior:B})},getColumnByKey:w=>v.find(B=>$(B)===w),getColumnByIndex:w=>v[w],getColumnKeyByIndex:w=>{const B=O.getColumnByIndex(w);if(B!=null)return $(B)}});const Ue=P(x.jsxs(x.Fragment,{children:[x.jsx(Ct,{wrapperRef:T,defaultColumnWidth:p,columns:Qe,stickyHeader:E,renderHeaderWrapper:re,renderHeaderRoot:pe,renderHeader:ye,renderHeaderRow:_,renderHeaderCell:V}),x.jsx(bt,{instance:O,bodyWrapperRef:F,bodyRootRef:a,bodyRef:k,className:f,style:u,defaultColumnWidth:p,columns:G,rowKey:I,dataSource:S,overscan:h,estimateSize:b,getScroller:c,getOffsetTop:C,rowClassName:$e,onRow:Ve,renderBodyWrapper:q,renderBodyRoot:oe,renderBody:te,renderBodyContent:ve,renderRow:se,renderCell:me})]}),A,{columns:G.columns,columnDescriptor:G.descriptor}),Xe=ee(j,t),Ge=P(x.jsx(It,{ref:Xe,className:o,style:l,hasFixedLeftColumn:qe,hasFixedRightColumn:Ye,renderRoot:Q,bodyScrollContainer:F,children:Ue}),z,{columns:G.columns,columnDescriptor:G.descriptor});return x.jsx(je.Provider,{value:Ae,children:x.jsx(et,{columns:v,children:x.jsx(ze.Provider,{value:H,children:x.jsx(st,{children:Ge})})})})}const Kt=s.memo(s.forwardRef(Wt));function jt(){const e=document.createElement("div");e.style.position="absolute",e.style.width="100px",e.style.height="100px",e.style.overflow="scroll",e.style.top="-9999px",document.body.appendChild(e);const t=e.offsetWidth-e.clientWidth,r=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),{width:t,height:r}}const Bt=e=>{const{className:t,style:r,bottom:n,zIndex:o,bodyRef:l}=e,f=Re("virtual-table-sticky-bottom-scroll"),[u,d]=s.useState(0);s.useEffect(()=>{const y=l.current;if(y!=null)return Ce(y,({width:b})=>{b!==0&&d(b)})},[l]);const[i]=s.useState(jt);return x.jsx("div",{className:Y("virtual-table-sticky-scroll",t),style:{...r,"--virtual-table-sticky-scroll-bottom":Number.isFinite(n)?`${n}px`:n,paddingTop:i.height>0?0:15,marginTop:i.height>0?0:i.height*-1,height:i.height+1,zIndex:o},ref:f,children:x.jsx("div",{className:"virtual-table-sticky-scroll-bar",style:{width:u}})})};function Nt(e,t){const{bodyRootRef:r}=e;return{...e,renderContent(n){return x.jsxs(x.Fragment,{children:[n,x.jsx(Bt,{bodyRef:r,...t})]})}}}const _t=pt(Nt);export{Fe as C,Kt as V,ht as a,pt as b,Y as c,fe as d,zt as e,Dt as f,$ as g,_t as h,X as i,xe as j,Te as k,We as l,ue as m,Le as n,U as o,Se as p,Ce as q,jt as r,Re as s,ee as t,Ot as u};
