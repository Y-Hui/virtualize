var Je=Object.defineProperty;var Ze=(e,t,n)=>t in e?Je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ge=(e,t,n)=>Ze(e,typeof t!="symbol"?t+"":t,n);import{r as s,j as v}from"./index-BOW0m65N.js";function Ie(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=Ie(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Q(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=Ie(e))&&(r&&(r+=" "),r+=t);return r}function Me(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),r=Object.keys(t),o=n.length;if(r.length!==o)return!1;for(let l=0;l<o;l+=1){const a=n[l];if(e[a]!==t[a]||!Object.prototype.hasOwnProperty.call(t,a))return!1}return!0}function we(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=e.length;if(t.length!==n)return!1;for(let r=0;r<n;r+=1)if(e[r]!==t[r])return!1;return!0}function de(e,t){if(Object.is(e,t))return!0;if(Array.isArray(e)&&Array.isArray(t))return we(e,t)?!0:e.length===t.length&&e.findIndex(r=>typeof r=="object"&&r!=null)>-1?e.every((r,o)=>Array.isArray(r)?we(r,t[o]):typeof r=="object"&&r!=null?Me(r,t[o]):Object.is(r,t[o])):!1;if(e instanceof Map&&t instanceof Map){const n=Array.from(e.keys()),r=Array.from(t.keys());if(de(n,r)){const o=Array.from(e.values()),l=Array.from(t.values());if(de(o,l))return!0}return!1}return typeof e=="object"&&e!=null?Me(e,t):!1}function xe(e){const t=e(),n=s.useRef(t);return de(t,n.current)||(n.current=t),n.current}function $(e){return"key"in e?e.key:e.dataIndex}function ae(e,t){return typeof t=="function"?t(e):e[t]}function G(e){return e==="left"}function J(e){return e==="right"}function Be(e){return G(e)||J(e)}const We=s.createContext(null);function je(){const e=s.useContext(We);if(e==null)throw new Error("useColumnSizes provider not found");return e}const Ne=s.createContext(null);function et(e){const{columns:t,children:n}=e,{widthList:r}=je(),o=s.useMemo(()=>t.map(i=>({key:$(i),fixed:i.fixed})),[t]),l=s.useMemo(()=>{let i=0;const p=o.reduce((f,y,k)=>{const{fixed:R,key:w}=y;return G(R)&&(f[k]=i,i+=r.get(w)??0),f},[]);let C=0;const b=o.reduceRight((f,y,k)=>{const{fixed:R,key:w}=y;return J(R)&&(f[k]=C,C+=r.get(w)??0),f},[]);return o.reduce((f,y,k)=>{const{key:R,fixed:w}=y;return G(w)?(f.set(R,p[k]),f):(J(w)&&f.set(R,b[k]),f)},new Map)},[o,r]),a=xe(()=>o),u=xe(()=>l),d=s.useMemo(()=>({size:u,fixed:a}),[a,u]);return v.jsx(Ne.Provider,{value:d,children:n})}function Le(){const e=s.useContext(Ne);if(e==null)throw new Error("useTableSticky provider not found");return e}function A(e,t,n){return typeof t=="function"?t(e,n):e}function tt(e,t,n){const{render:r}=n,o=t;if("dataIndex"in n){const l=n.dataIndex;return typeof r!="function"?o[l]:r(o[l],t,e)}return(r==null?void 0:r(t,t,e))??null}function nt(e){const{className:t,style:n,column:r,rowData:o,rowIndex:l,renderCell:a,...u}=e,{align:d,fixed:i,onCell:p}=r,C=$(r),{size:b}=Le(),{className:f,style:y,colSpan:k,rowSpan:R,...w}=(p==null?void 0:p(o,l))??{};return k===0||R===0?null:A(v.jsx("td",{...u,...w,colSpan:k,rowSpan:R,className:Q("virtual-table-cell",d!=null&&`virtual-table-align-${d}`,Be(i)&&"virtual-table-sticky-cell",t,r.className,f),style:{...n,...y,left:G(i)?b.get(C):void 0,right:J(i)?b.get(C):void 0},"data-col-key":C,children:tt(l,o,r)}),a,{column:r})}const rt=s.memo(nt);function he(e,t){return Number.isFinite(e.width)?e.width:t}const ot=e=>{const{columns:t,defaultColumnWidth:n}=e;return v.jsx("colgroup",{children:t.map(r=>{const{key:o}=r;if(r.type==="blank")return v.jsx("col",{className:"blank",style:{width:r.width}},o);const{column:l}=r,a=he(l,n);return v.jsx("col",{"data-col-key":o,style:{width:a}},o)})})},Fe=s.memo(ot),ze=s.createContext(null);function Dt(){const e=s.useContext(ze);if(e==null)throw new Error("useContainerSize provider not found");return e}const De=s.createContext(null);function st(e){const{children:t}=e,n=s.useRef(new Map),r=s.useMemo(()=>{const o=new Set;return{listen(l,a){return n.current.set(l,(u,d)=>{a(u,d)}),()=>{n.current.delete(l)}},notify(l,a){if(o.has(l)){o.delete(l);return}const{scrollLeft:u,node:d}=a;let i=window.requestAnimationFrame;i==null&&(i=p=>{p()}),n.current.forEach((p,C)=>{l!==C&&(o.add(C),i(()=>{p(u(),d)}))})}}},[]);return v.jsx(De.Provider,{value:r,children:t})}function Oe(){const e=s.useContext(De);if(e==null)throw new Error("useHorizontalScrollContext provider not found");return e}function Ce(e){const{listen:t,notify:n}=Oe(),r=s.useRef(null);return s.useEffect(()=>{const o=r.current;if(o==null)return;const l=()=>{n(e,{scrollLeft:()=>o.scrollLeft,node:o})},a=()=>{o.addEventListener("scroll",l,{passive:!0})},u=()=>{o.removeEventListener("scroll",l)},d=t(e,i=>{o.style.willChange="scroll-position",o.scrollLeft=i});return a(),()=>{u(),d()}},[e,t,n]),r}const Ke=s.createContext(null);function Ot(){const e=s.useContext(Ke);if(e==null)throw new Error("useTableRowManager provider not found");return e}const lt=/auto|scroll|overlay|hidden/;function _e(e){return e instanceof Node?e.nodeType===1:!1}function ct(e,t=window){let n=e;for(;n!==t&&_e(n);){if(n===document.body)return t;const{overflow:r,overflowY:o,overflowX:l}=window.getComputedStyle(n);if(lt.test(r+o+l))return n;n=n.parentNode}return e.ownerDocument.defaultView??window}function pe(e){return Object.prototype.toString.call(e)==="[object Window]"}function it(e){return Object.prototype.toString.call(e)==="[object HTMLDocument]"}function Pe(e){return Object.prototype.toString.call(e)==="[object HTMLHtmlElement]"}function Te(e){return it(e)?e.scrollingElement:_e(e)?e:document.scrollingElement}function ut(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),o=Number.parseFloat(window.getComputedStyle(t).borderTopWidth)||0,l=t.scrollTop;return n.top-r.top-o+l}function Se(e,t){if(pe(e)){const n=()=>{t({width:window.innerWidth,height:window.innerHeight})};return n(),window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}}else{const n=new ResizeObserver(r=>{const o=r[0].contentRect;t({width:o.width,height:o.height})});return n.observe(e),()=>{n.disconnect()}}}function at(e,t){let n=0,r=e.length-1,o=-1;for(;n<=r;){const l=Math.floor((n+r)/2);e[l].bottom>t?(o=l,r=l-1):n=l+1}if(o!==-1)return e[o]}const be="NormalRow";function dt(e){const{nodeHeightValid:t,getOffsetTop:n,rowKey:r,dataSource:o,getScroller:l,estimateSize:a,overscan:u}=e,[d,i]=s.useState(0),[p,C]=s.useState(0),b=s.useRef();s.useLayoutEffect(()=>{const c=b.current;c!=null&&t()&&(c(),b.current=void 0)});const f=s.useMemo(()=>o.slice(d,p),[o,d,p]),y=s.useRef(new Map),k=s.useCallback((c,h,x)=>{const g=y.current.get(c)??new Map;g.set(h,x),y.current.set(c,g)},[]),R=()=>{const c=[];return o.forEach(h=>{const x=ae(h,r),g=y.current.get(x);if(g==null)c.push(a);else{let m=0;g.forEach(T=>m+=T),c.push(m)}}),c};(()=>{if(o.length===0){y.current.clear();return}o.forEach(c=>{const h=ae(c,r),x=y.current.get(h)??new Map;x.get(be)==null&&x.set(be,a),y.current.set(h,x)})})();const H=s.useRef();(H.current==null||o.length!==H.current.length)&&(H.current=R());const E=s.useRef([]),z=()=>{const{rects:c}=o.reduce((h,x,g)=>{var q;const m=ae(x,r);let T=0;(q=y.current.get(m))==null||q.forEach(N=>{T+=N});const K=h.top+T;return h.rects.push({index:g,top:h.top,height:T,bottom:K}),h.top=K,h},{top:0,rects:[]});E.current=c},O=c=>{c==null||c(),z(),H.current=E.current.map(h=>h.height)},L=s.useRef({index:0,height:a,top:0,bottom:a}),D=o.length,I=s.useRef(0),M=s.useRef(!1);s.useEffect(()=>{const c=l();if(c==null)return;let h=0;const x=()=>{const N=n();let F=0;return pe(c)||Pe(c)?F=window.scrollY:F=Te(c).scrollTop,Math.max(F-N,0)},g=N=>{const F=h;return h=Math.ceil(N/a),{prevCount:F}},m=N=>{const F=at(E.current,N);F!=null&&(L.current=F,i(Math.max(0,F.index-u)),C(F.index+h+u))},T=N=>{const F=n(),X=Te(N.target),_=Math.max(0,X.scrollTop-F);_>I.current?_>L.current.bottom&&(t()?m(_):b.current=()=>m(_)):_<L.current.top&&(t()?m(_):b.current=()=>m(_)),I.current=_};let K=0;const q=Se(c,N=>{if(N.height===K||N.height===0)return;K=N.height,g(N.height);const F=x();if(M.current)m(F);else{M.current=!0;let X=0;F>=a&&(X=Math.max(Math.floor(F/a)-1-u,0));const _=X+h+u;i(X),C(_)}});return c.addEventListener("scroll",T),()=>{q(),c.removeEventListener("scroll",T)}},[a,n,l,u,D,t]);const W=(c,h)=>H.current.slice(c,h).reduce((x,g)=>x+g,0),B=W(0,d),V=W(p);return{startIndex:d,endIndex:p,rowHeightList:H,flushLayout:O,rowHeightByRowKey:y,setRowHeightByRowKey:k,topBlank:B,bottomBlank:V,dataSlice:f}}function Re(e){const t=s.useRef(null);return s.useLayoutEffect(()=>{t.current=e}),s.useCallback((...r)=>{var o;return(o=t.current)==null?void 0:o.call(t,...r)},[])}class ft{constructor(){this.getInstance=this.getInstance.bind(this)}getInstance(){const n={...["getCurrentProps","getColumns","getDataSource","getDOM","getRowHeightMap","getRowVirtualizeState","getScrollValueByRowIndex","getScrollValueByColumnKey","scrollToRow","scrollToColumn","scrollTo","getColumnByKey","getColumnByIndex","getColumnKeyByIndex","getColumnWidths","getColumnWidthByKey"].reduce((r,o)=>(r[o]=()=>{throw new Error(`${o}() has not been implemented yet`)},r),{}),extend:r=>{Object.keys(r).forEach(o=>{n[o]=r[o]})}};return n}}function ht(e){const[t]=s.useState(()=>e??new ft().getInstance());return t}function pt(e){const t={current:null,options:null};return(...n)=>{const r=o=>e(o,...n);return de(n,t.options)?t.current??r:(t.options=n,t.current=r,r)}}function yt(e){return Array.isArray(e)?e.filter(t=>t!=null&&(typeof t=="function"||typeof t.hook=="function")).map(t=>typeof t=="function"?{priority:100,hook:t}:t):[]}const fe=class fe{constructor(){ge(this,"hooks",[]);this.use=this.use.bind(this)}setHooks(t){this.hooks=t}use(t){if(this.hooks.length===0)return t;const n={current:t},r={render:[],renderRoot:[],renderContent:[],renderHeaderWrapper:[],renderHeaderRoot:[],renderHeader:[],renderHeaderRow:[],renderHeaderCell:[],renderBodyWrapper:[],renderBodyRoot:[],renderBody:[],renderBodyContent:[],renderRow:[],renderCell:[]},o=[],l=[],a=this.hooks.slice();return a.sort((u,d)=>u.priority-d.priority),a.map(u=>u.hook).forEach(u=>{const d=u(n.current),{render:i,renderRoot:p,renderContent:C,renderHeaderWrapper:b,renderHeaderRoot:f,renderHeader:y,renderHeaderRow:k,renderHeaderCell:R,renderBodyWrapper:w,renderBodyRoot:H,renderBody:E,renderBodyContent:z,renderRow:O,renderCell:L,rowClassName:D,onRow:I,...M}=d;Object.entries(r).forEach(([W,B])=>{const V=d[W];typeof V=="function"&&B.push(V)}),typeof D=="function"&&o.push(D),typeof I=="function"&&l.push(I),n.current=M}),Object.entries(r).forEach(([u,d])=>{d.length>0&&(n.current[u]=(i,p)=>d.reduce((C,b)=>b(C,p),i))}),o.length>0&&(n.current.rowClassName=(u,d)=>Q(...o.map(i=>i(u,d)))),l.length>0&&(n.current.onRow=(u,d)=>l.reduce((i,p)=>({...i,...p(u,d)}),{})),n.current}};ge(fe,"defaultPipeline",new fe);let le=fe;function Kt(e){const{use:t,pipeline:n}=e,r=s.useMemo(()=>({current:new le}),[]);if(t!=null){const o=yt([...t,...(n==null?void 0:n.hooks)??[]]);if(!we(r.current.hooks,o)){const l=new le;return l.setHooks(o),r.current=l,l}}return r.current}function ve(e,t){let n=-1;for(let r=0;r<e.length;r+=1)t(e[r],r)&&(n=r);return n}function mt(e){const{className:t,rowKey:n,rowIndex:r,rowData:o,columns:l,onRow:a,renderRow:u,renderCell:d,onRefCallback:i,...p}=e,{columns:C,descriptor:b}=l,f=ve(b,w=>w.type==="blank"?!1:G(w.column.fixed)),y=b.findIndex(w=>w.type==="blank"?!1:J(w.column.fixed)),{className:k,...R}=(a==null?void 0:a(o,r))??{};return A(v.jsx("tr",{...p,...R,className:Q("virtual-table-row",t,k),"data-row-index":r,ref:w=>{i==null||i({node:w,rowKey:n,rowIndex:r,rowData:o})},children:b.map((w,H)=>{const{key:E}=w;if(w.type==="blank")return v.jsx("td",{},E);const{column:z}=w;return v.jsx(rt,{className:Q(f===H&&"virtual-table-cell-fix-left-last",y===H&&"virtual-table-cell-fix-right-first"),column:z,rowIndex:r,rowData:o,renderCell:d},E)})}),u,{columns:C,rowKey:n,rowIndex:r,rowData:o,columnDescriptor:b})}const gt=s.memo(mt);function wt(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function xt(...e){return t=>{e.forEach(n=>wt(n,t))}}function oe(...e){return s.useCallback(xt(...e),e)}function bt(){const e=s.useRef(null),t=Re(()=>{const n=e.current;return n==null?!1:n.offsetHeight>0});return[e,t]}function Rt(e){const{bodyWrapperRef:t,bodyRootRef:n,bodyRef:r,className:o,style:l,defaultColumnWidth:a,dataSource:u,columns:d,rowKey:i,instance:p,overscan:C,estimateSize:b,getScroller:f,getOffsetTop:y,rowClassName:k,onRow:R,renderBodyWrapper:w,renderBodyRoot:H,renderBody:E,renderBodyContent:z,renderRow:O,renderCell:L}=e,[D,I]=bt(),{startIndex:M,endIndex:W,dataSlice:B,rowHeightByRowKey:V,setRowHeightByRowKey:c,flushLayout:h,rowHeightList:x,topBlank:g,bottomBlank:m}=dt({nodeHeightValid:I,getOffsetTop:y,rowKey:i,dataSource:u,getScroller:f,estimateSize:b,overscan:C});p.extend({getRowVirtualizeState:()=>({startIndex:M,endIndex:W,overscan:C,estimateSize:b}),getRowHeightMap:()=>V.current});const T=oe(r,D,P=>{P==null||P.offsetHeight===0||h()}),K=s.useCallback(P=>{const{node:Y,rowKey:U}=P;Y!=null&&c(U,be,Y.offsetHeight)},[c]),{columns:q,descriptor:N}=d,F=A(B.map((P,Y)=>{const U=ae(P,i);return v.jsx(gt,{className:Q(k==null?void 0:k(P,Y)),rowKey:U,rowIndex:Y+M,rowData:P,columns:d,onRow:R,renderRow:O,renderCell:L,onRefCallback:K},U)}),z,{columns:q,columnDescriptor:N,startRowIndex:M}),X=A(v.jsx("tbody",{ref:T,children:F}),E,{columns:q,columnDescriptor:N,startRowIndex:M}),_=A(v.jsxs("table",{className:Q(o,"virtual-table-body"),style:{...l,paddingBottom:m,paddingTop:g},ref:n,children:[v.jsx(Fe,{columns:N,defaultColumnWidth:a}),X]}),H,{columns:q,columnDescriptor:N,startRowIndex:M}),ce=Ce("virtual-table-body"),ye=oe(ce,t);p.extend({getScrollValueByRowIndex(P){if(f()==null)return 0;const{stickyHeader:U}=p.getCurrentProps(),{headerWrapper:ie}=p.getDOM();let se=0;return U==null||U===!1?se=ie==null?0:ie.offsetHeight:se=Number.isFinite(U)?U*-1:0,x.current.slice(0,P).reduce((Z,te)=>Z+te,0)+y()+se},scrollToRow(P,Y){p.scrollTo({top:p.getScrollValueByRowIndex(P),behavior:Y})}});const me=s.useMemo(()=>({setRowHeightByRowKey:c,getRowHeightList:()=>x.current}),[x,c]);return v.jsx(Ke.Provider,{value:me,children:A(v.jsx("div",{ref:ye,className:"virtual-table-body-wrapper",children:_}),w,{columns:q,columnDescriptor:N,startRowIndex:M})})}const Ct=e=>{const{className:t,style:n,defaultColumnWidth:r,wrapperRef:o,columns:l,stickyHeader:a,renderHeaderWrapper:u,renderHeaderRoot:d,renderHeader:i,renderHeaderRow:p,renderHeaderCell:C}=e,{columns:b,descriptor:f}=l,y=b[b.length-1],{widthList:k}=je(),{size:R}=Le(),w=ve(f,I=>I.type==="blank"?!1:G(I.column.fixed)),H=f.findIndex(I=>I.type==="blank"?!1:J(I.column.fixed)),E=Ce("virtual-table-header"),z=A(v.jsx("tr",{children:f.map((I,M)=>{var g;const{key:W}=I;if(I.type==="blank")return v.jsx("th",{"data-blank":!0},W);const{column:B}=I;if(B.colSpan===0)return null;const V=$(y)===W,{className:c,style:h,...x}=((g=B.onHeaderCell)==null?void 0:g.call(B,B,M))??{};return v.jsx(s.Fragment,{children:A(s.createElement("th",{scope:"col",...x,colSpan:B.colSpan,className:Q("virtual-table-header-cell",V&&"no-split",B.align!=null&&`virtual-table-align-${B.align}`,Be(B.fixed)&&"virtual-table-sticky-cell",w===M&&"virtual-table-cell-fix-left-last",H===M&&"virtual-table-cell-fix-right-first",B.className,c),style:{...h,left:G(B.fixed)?R.get(W):void 0,right:J(B.fixed)?R.get(W):void 0}},B.title),C,{column:B,columns:b,columnWidths:k,columnDescriptor:f})},W)})}),p,{columns:b,columnDescriptor:f}),O=A(v.jsx("thead",{className:"virtual-table-thead",children:z}),i,{columns:b,columnDescriptor:f}),L=A(v.jsxs("table",{style:n,children:[v.jsx(Fe,{columns:f,defaultColumnWidth:r}),O]}),d,{columns:b,columnDescriptor:f}),D=oe(o,E);return A(v.jsx("div",{ref:D,className:Q("virtual-table-header",t,{"virtual-table-header-sticky":a}),style:{top:Number.isFinite(a)?a:void 0},children:L}),u,{columns:b,columnDescriptor:f})},St=s.memo(Ct);function vt(e){const{getScroller:t,root:n}=e,[r,o]=s.useState(0),[l,a]=s.useState(0),[u,d]=s.useState(800),[i,p]=s.useState(600),C=s.useRef(null);return s.useLayoutEffect(()=>{const f=t();if(f==null)return;let y;pe(f)?y=document.scrollingElement:y=f,C.current=y;const k=new ResizeObserver(R=>{const{width:w,height:H}=R[0].contentRect;o(w),a(H)});return k.observe(y),()=>{k.disconnect()}},[t]),s.useLayoutEffect(()=>{const f=n.current;if(f==null)return;const y=new ResizeObserver(k=>{const{width:R,height:w}=k[0].contentRect;d(R),p(w)});return y.observe(f),()=>{y.disconnect()}},[n]),s.useMemo(()=>({scrollContainerWidth:r,scrollContainerHeight:l,tableWidth:u,tableHeight:i}),[r,l,u,i])}function kt(e,t){const n=s.useMemo(()=>e.reduce((r,o)=>{const l=he(o,t);return r.set($(o),l),r},new Map),[e,t]);return xe(()=>n)}function Ht(e,t){let n=0,r=e.length-1,o=-1;for(;n<=r;){const l=Math.floor((n+r)/2);e[l].right>t?(o=l,r=l-1):n=l+1}if(o!==-1)return e[o]}function Et(e){let t=-1;for(let n=e.length-1;n>=0;n--){const r=e[n];if(J(r.fixed))t=n;else break}return t}function Mt(e){return ve(e,t=>G(t.fixed))}function Tt(e){const{estimateSize:t,defaultColumnWidth:n,overscan:r,columns:o,containerWidth:l,bodyWrapper:a,disabled:u=!1}=e,d=Mt(o),i=Et(o),p=d>-1?$(o[d]):null,C=i>-1?$(o[i]):null,[b,f]=s.useState(0),[y,k]=s.useState(0),R=s.useMemo(()=>{if(u)return[];let c=0;return o.map((h,x)=>{const g=he(h,n),m=c+g,T={index:x,width:g,left:c,right:m};return c=m,T})},[u,o,n]),w=s.useRef({index:0,width:t,left:0,right:t}),H=Re(c=>Ht(R,c)),E=Re((c,h)=>{const x=H(c);x!=null&&(w.current=x,f(Math.max(0,x.index-r)),k(x.index+h+r))}),z=s.useRef(0);s.useEffect(()=>{if(u)return;const c=a.current;if(c==null)return;let h=Math.ceil(l/t);const x=()=>{const T=c.scrollLeft;T>z.current?T>w.current.right&&E(T,h):T<w.current.left&&E(T,h),z.current=T};c.addEventListener("scroll",x);let g=0;const m=Se(c,({width:T})=>{if(T===g||T===0)return;g=T;const K=c.scrollLeft;h=Math.ceil(T/t),E(K,h)});return()=>{c.removeEventListener("scroll",x),m()}},[l,a,t,E,r,H,u]);const O=(c,h)=>R.slice(c,h).reduce((x,g)=>x+g.width,0),L=d>-1?O(0,d+1):0,D=i>-1?O(i):0,I=Math.max(0,O(0,b)-L),M=Math.max(0,O(y)-D),W=s.useMemo(()=>{if(u)return o;const c=[...o.slice(0,d+1),...o.slice(b,y),...o.slice(i)],h=new Set;return c.filter(x=>{const g=$(x);return h.has(g)?!1:(h.add(g),!0)})},[u,o,b,y,d,i]),B=s.useMemo(()=>W.reduce((c,h,x)=>{const g=$(h);let m=h;return m.width==null&&m.minWidth==null&&(m={...m,width:n}),u?c.push({type:"normal",key:g,column:m}):g===p?(c.push({type:"normal",key:g,column:m}),c.push({type:"blank",key:"_blank_left",width:I})):p==null&&x===0?(c.push({type:"blank",key:"_blank_left",width:I}),c.push({type:"normal",key:g,column:m})):g===C?(c.push({type:"blank",key:"_blank_right",width:M}),c.push({type:"normal",key:g,column:m})):C==null&&x===W.length-1?(c.push({type:"normal",key:g,column:m}),c.push({type:"blank",key:"_blank_right",width:M})):c.push({type:"normal",key:g,column:m}),c},[]),[W,u,n,p,C,I,M]);return{columns:s.useMemo(()=>({columns:W,descriptor:B}),[W,B]),columnSlice:W,lastFixedLeftIndex:d,firstFixedRightIndex:i}}function It(e,t){const{className:n,style:r,children:o,hasFixedLeftColumn:l,hasFixedRightColumn:a,renderRoot:u,bodyScrollContainer:d}=e,i=s.useRef(null),[p,C]=s.useState(!1),[b,f]=s.useState(!1),{listen:y}=Oe();s.useEffect(()=>{if(!l&&!a)return;const R=H=>{const{scrollLeft:E,clientWidth:z,scrollWidth:O}=H;l&&C(E!==0),a&&f(!(E+z>=O))},w=d.current;return w!=null&&R(w),y("__root",(H,E)=>{R(E)})},[d,l,a,y]);const k=oe(t,i);return A(v.jsx("div",{ref:k,className:Q("virtual-table",p&&"virtual-table-has-fix-left",b&&"virtual-table-has-fix-right",n),style:r,children:o}),u,{})}const Bt=s.forwardRef(It);function Wt(e,t){const{bodyRootRef:n,instance:r,className:o,style:l,tableBodyClassName:a,tableBodyStyle:u,columns:d,dataSource:i,rowKey:p="key",estimatedRowHeight:C=46,estimatedColumnWidth:b,overscanRows:f=5,overscanColumns:y=3,stickyHeader:k,defaultColumnWidth:R=100,pipeline:w=le.defaultPipeline,rowClassName:H,onRow:E,getOffsetTop:z,virtualHeader:O=!0}=e,L=ht(r);L.extend({getCurrentProps:()=>({estimatedRowHeight:C,overscanRows:f,overscanColumns:y,defaultColumnWidth:R,...e})});const D=s.useRef(null),I=s.useRef(null),M=s.useRef(null),W=s.useRef(null),B=oe(W,n),V=s.useRef(null),c=s.useCallback(()=>{const S=D.current;if(S!=null)return ct(S)},[]),h=s.useCallback(()=>{if(typeof z=="function")return z();const S=c(),j=D.current;if(j==null||S==null||S===j)return 0;if(pe(S)||Pe(S)){const ne=j.getBoundingClientRect().top;return window.scrollY+ne}return ut(j,S)},[z,c]),x=vt({getScroller:c,root:D}),{dataSource:g,columns:m,rowKey:T,rowClassName:K,render:q,renderRoot:N,renderContent:F,renderHeaderWrapper:X,renderHeaderRoot:_,renderHeader:ce,renderHeaderRow:ye,renderHeaderCell:me,renderBodyWrapper:P,renderBodyRoot:Y,renderBody:U,renderBodyContent:ie,renderRow:se,renderCell:ke,onRow:Z}=w.use({dataSource:i,rowKey:p,columns:d,estimatedRowHeight:C,headerWrapperRef:I,bodyWrapperRef:M,bodyRootRef:W,bodyRef:V,rootRef:D,getOffsetTop:h,getScroller:c,instance:L});L.extend({getColumns:()=>m,getDataSource:()=>g});const te=kt(m,R);L.extend({getColumnWidths:()=>te,getColumnWidthByKey:S=>te.get(S)});const Ae=s.useMemo(()=>({widthList:te}),[te]),{columns:ee}=Tt({estimateSize:b??R,defaultColumnWidth:R,overscan:y,columns:m,containerWidth:x.tableWidth,bodyWrapper:M,disabled:b==null}),Ve=s.useCallback((S,j)=>Q(H==null?void 0:H(S,j),K==null?void 0:K(S,j)),[H,K]),$e=s.useCallback((S,j)=>({...E==null?void 0:E(S,j),...Z==null?void 0:Z(S,j)}),[Z,E]),qe=m.some(S=>G(S.fixed)),Ye=m.some(S=>J(S.fixed)),He=s.useMemo(()=>({columns:m,descriptor:m.map(S=>({key:$(S),type:"normal",column:S}))}),[m]),Ue=s.useMemo(()=>O?ee:He,[O,He,ee]);L.extend({getDOM:()=>({root:D.current,headerWrapper:I.current,bodyWrapper:M.current,bodyRoot:W.current,body:V.current}),scrollTo:S=>{var re;const{left:j,top:ne}=S;if(j!=null&&((re=M.current)==null||re.scrollTo(S)),ne!=null){const ue=c();if(ue==null){console.error("The scroller DOM is not obtained, and scrolling is not possible.");return}ue.scrollTo(S)}},getScrollValueByColumnKey:S=>{let j=0,ne=0;for(const re of m){const ue=$(re),Ee=he(re,R);if(G(re.fixed)&&(ne+=Ee),ue===S)break;j+=Ee}return j-ne},scrollToColumn:(S,j)=>{L.scrollTo({left:L.getScrollValueByColumnKey(S),behavior:j})},getColumnByKey:S=>m.find(j=>$(j)===S),getColumnByIndex:S=>m[S],getColumnKeyByIndex:S=>{const j=L.getColumnByIndex(S);if(j!=null)return $(j)}});const Qe=A(v.jsxs(v.Fragment,{children:[v.jsx(St,{wrapperRef:I,defaultColumnWidth:R,columns:Ue,stickyHeader:k,renderHeaderWrapper:X,renderHeaderRoot:_,renderHeader:ce,renderHeaderRow:ye,renderHeaderCell:me}),v.jsx(Rt,{instance:L,bodyWrapperRef:M,bodyRootRef:B,bodyRef:V,className:a,style:u,defaultColumnWidth:R,columns:ee,rowKey:T,dataSource:g,overscan:f,estimateSize:C,getScroller:c,getOffsetTop:h,rowClassName:Ve,onRow:$e,renderBodyWrapper:P,renderBodyRoot:Y,renderBody:U,renderBodyContent:ie,renderRow:se,renderCell:ke})]}),F,{columns:ee.columns,columnDescriptor:ee.descriptor}),Xe=oe(D,t),Ge=A(v.jsx(Bt,{ref:Xe,className:o,style:l,hasFixedLeftColumn:qe,hasFixedRightColumn:Ye,renderRoot:N,bodyScrollContainer:M,children:Qe}),q,{columns:ee.columns,columnDescriptor:ee.descriptor});return v.jsx(We.Provider,{value:Ae,children:v.jsx(et,{columns:m,children:v.jsx(ze.Provider,{value:x,children:v.jsx(st,{children:Ge})})})})}const _t=s.memo(s.forwardRef(Wt));function jt(){const e=document.createElement("div");e.style.position="absolute",e.style.width="100px",e.style.height="100px",e.style.overflow="scroll",e.style.top="-9999px",document.body.appendChild(e);const t=e.offsetWidth-e.clientWidth,n=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),{width:t,height:n}}const Nt=e=>{const{className:t,style:n,bottom:r,zIndex:o,bodyRef:l}=e,a=Ce("virtual-table-sticky-bottom-scroll"),[u,d]=s.useState(0);s.useEffect(()=>{const p=l.current;if(p!=null)return Se(p,({width:C})=>{C!==0&&d(C)})},[l]);const[i]=s.useState(jt);return v.jsx("div",{className:Q("virtual-table-sticky-scroll",t),style:{...n,"--virtual-table-sticky-scroll-bottom":Number.isFinite(r)?`${r}px`:r,paddingTop:i.height>0?0:15,marginTop:i.height>0?0:i.height*-1,height:i.height+1,zIndex:o},ref:a,children:v.jsx("div",{className:"virtual-table-sticky-scroll-bar",style:{width:u}})})};function Lt(e,t){const{bodyRootRef:n}=e;return{...e,renderContent(r){return v.jsxs(v.Fragment,{children:[r,v.jsx(Nt,{bodyRef:n,...t})]})}}}const Pt=pt(Lt);export{Fe as C,_t as V,ht as a,pt as b,Q as c,he as d,Dt as e,Ot as f,$ as g,Pt as h,J as i,xe as j,Re as k,Be as l,ae as m,Le as n,G as o,ve as p,Se as q,jt as r,Ce as s,oe as t,Kt as u};
