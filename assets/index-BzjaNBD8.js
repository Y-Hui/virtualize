var $e=Object.defineProperty;var Ye=(e,t,n)=>t in e?$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ae=(e,t,n)=>Ye(e,typeof t!="symbol"?t+"":t,n);import{r as o,j as w}from"./index-CNvhwLru.js";function Ce(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=Ce(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function B(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=Ce(e))&&(r&&(r+=" "),r+=t);return r}function we(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),r=Object.keys(t),s=n.length;if(r.length!==s)return!1;for(let l=0;l<s;l+=1){const a=n[l];if(e[a]!==t[a]||!Object.prototype.hasOwnProperty.call(t,a))return!1}return!0}function de(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=e.length;if(t.length!==n)return!1;for(let r=0;r<n;r+=1)if(e[r]!==t[r])return!1;return!0}function ee(e,t){if(Object.is(e,t))return!0;if(Array.isArray(e)&&Array.isArray(t))return de(e,t)?!0:e.length===t.length&&e.findIndex(r=>typeof r=="object"&&r!=null)>-1?e.every((r,s)=>Array.isArray(r)?de(r,t[s]):typeof r=="object"&&r!=null?we(r,t[s]):Object.is(r,t[s])):!1;if(e instanceof Map&&t instanceof Map){const n=Array.from(e.keys()),r=Array.from(t.keys());if(ee(n,r)){const s=Array.from(e.values()),l=Array.from(t.values());if(ee(s,l))return!0}return!1}return typeof e=="object"&&e!=null?we(e,t):!1}function xe(e){const t=e(),n=o.useRef(t);return ee(t,n.current)||(n.current=t),n.current}function $(e){return"key"in e?e.key:e.dataIndex}function Y(e){return e==="left"}function q(e){return e==="right"}function Se(e){return Y(e)||q(e)}const ke=o.createContext(null);function fe(){const e=o.useContext(ke);if(e==null)throw new Error("useColumnSizes provider not found");return e}const ve=o.createContext(null);function qe(e){const{columns:t,children:n}=e,{widthList:r}=fe(),s=o.useMemo(()=>t.map(y=>({key:$(y),fixed:y.fixed})),[t]),l=o.useMemo(()=>{let y=0;const b=s.reduce((h,k,C)=>{const{fixed:f,key:S}=k;return Y(f)&&(h[C]=y,y+=r.get(S)??0),h},[]);let d=0;const m=s.reduceRight((h,k,C)=>{const{fixed:f,key:S}=k;return q(f)&&(h[C]=d,d+=r.get(S)??0),h},[]);return s.reduce((h,k,C)=>{const{key:f,fixed:S}=k;return Y(S)?(h.set(f,b[C]),h):(q(S)&&h.set(f,m[C]),h)},new Map)},[s,r]),a=xe(()=>s),i=xe(()=>l),u=o.useMemo(()=>({size:i,fixed:a}),[a,i]);return w.jsx(ve.Provider,{value:u,children:n})}function He(){const e=o.useContext(ve);if(e==null)throw new Error("useTableSticky provider not found");return e}function O(e,t,n){return typeof t=="function"?t(e,n):e}function Qe(e,t,n){const{render:r}=n,s=t;if("dataIndex"in n){const l=n.dataIndex;return typeof r!="function"?s[l]:r(s[l],t,e)}return(r==null?void 0:r(t,t,e))??null}function Ue(e){const{className:t,style:n,column:r,rowData:s,rowIndex:l,renderCell:a,...i}=e,{align:u,fixed:y,onCell:b}=r,d=$(r),{size:m}=He(),{className:h,style:k,colSpan:C,rowSpan:f,...S}=(b==null?void 0:b(s,l))??{};return C===0||f===0?null:O(w.jsx("td",{...i,...S,colSpan:C,rowSpan:f,className:B("virtual-table-cell",u!=null&&`virtual-table-align-${u}`,Se(y)&&"virtual-table-sticky-cell",t,r.className,h),style:{...n,...k,left:Y(y)?m.get(d):void 0,right:q(y)?m.get(d):void 0},children:Qe(l,s,r)}),a,{column:r})}const Xe=o.memo(Ue),Ge=e=>{const{columns:t,onColumnSizesMeasure:n}=e,r=n!=null,s=new Map,l=o.useRef(new Map);return w.jsx("colgroup",{ref:()=>{r&&(ee(s,l.current)||(n(s),l.current=s))},children:t.map(a=>{const{key:i}=a;if(a.type==="blank")return w.jsx("col",{className:"blank",style:{width:a.width}},i);const{column:u}=a;return w.jsx("col",{ref:y=>{y==null||!r||s.set(i,y.offsetWidth)},style:{width:u.width,minWidth:u.minWidth}},i)})})},Ee=o.memo(Ge),Je=/auto|scroll|overlay|hidden/;function Le(e){return e instanceof Node?e.nodeType===1:!1}function Ve(e,t=window){let n=e;for(;n!==t&&Le(n);){if(n===document.body)return t;const{overflow:r,overflowY:s,overflowX:l}=window.getComputedStyle(n);if(Je.test(r+s+l))return n;n=n.parentNode}return e.ownerDocument.defaultView??window}function le(e){return Object.prototype.toString.call(e)==="[object Window]"}function Ze(e){return Object.prototype.toString.call(e)==="[object HTMLDocument]"}function Me(e){return Object.prototype.toString.call(e)==="[object HTMLHtmlElement]"}function be(e){return Ze(e)?e.scrollingElement:Le(e)?e:document.scrollingElement}function et(e){const{getScroller:t,root:n}=e,[r,s]=o.useState(0),[l,a]=o.useState(0),[i,u]=o.useState(0),[y,b]=o.useState(0),d=o.useRef(null);return o.useLayoutEffect(()=>{const m=t();if(m==null)return;let h;le(m)?h=document.scrollingElement:h=m,d.current=h;const k=new ResizeObserver(C=>{const{width:f,height:S}=C[0].contentRect;s(f),a(S)});return k.observe(h),()=>{k.disconnect()}},[t]),o.useLayoutEffect(()=>{const m=n.current;if(m==null)return;const h=new ResizeObserver(k=>{const{width:C,height:f}=k[0].contentRect;u(C),b(f)});return h.observe(m),()=>{h.disconnect()}},[n]),{scrollContainerWidth:r,scrollContainerHeight:l,tableWidth:i,tableHeight:y}}const je=o.createContext(null);function tt(e){const{getScroller:t,root:n,children:r}=e,{scrollContainerHeight:s,scrollContainerWidth:l,tableHeight:a,tableWidth:i}=et({getScroller:t,root:n}),u=o.useMemo(()=>({scrollContainerWidth:l,scrollContainerHeight:s,tableWidth:i,tableHeight:a}),[l,s,i,a]);return w.jsx(je.Provider,{value:u,children:r})}function Ht(){const e=o.useContext(je);if(e==null)throw new Error("useContainerSize provider not found");return e}const We=o.createContext(null);function nt(e){const{children:t}=e,n=o.useRef(new Map),r=o.useMemo(()=>{const s=new Set;return{listen(l,a){return n.current.set(l,(i,u)=>{a(i,u)}),()=>{n.current.delete(l)}},notify(l,a){if(s.has(l)){s.delete(l);return}const{scrollLeft:i,node:u}=a;let y=window.requestAnimationFrame;y==null&&(y=b=>{b()}),n.current.forEach((b,d)=>{l!==d&&(s.add(d),y(()=>{b(i(),u)}))})}}},[]);return w.jsx(We.Provider,{value:r,children:t})}function ce(){const e=o.useContext(We);if(e==null)throw new Error("useHorizontalScrollContext provider not found");return e}const Ne=o.createContext(null);function rt(){const e=o.useContext(Ne);if(e==null)throw new Error("useTableRowManager provider not found");return e}function Re(e){const t=o.useRef(null);return o.useLayoutEffect(()=>{t.current=e}),o.useCallback((...r)=>{var s;return(s=t.current)==null?void 0:s.call(t,...r)},[])}function ot(e){const t={current:null,options:null};return(...n)=>{const r=s=>e(s,...n);return ee(n,t.options)?t.current??r:(t.options=n,t.current=r,r)}}function st(e){return Array.isArray(e)?e.filter(t=>t!=null&&(typeof t=="function"||typeof t.hook=="function")).map(t=>typeof t=="function"?{priority:100,hook:t}:t):[]}const se=class se{constructor(){ae(this,"hooks",[]);this.use=this.use.bind(this)}setHooks(t){this.hooks=t}use(t){if(this.hooks.length===0)return t;const n={current:t},r={render:[],renderRoot:[],renderContent:[],renderHeaderWrapper:[],renderHeaderRoot:[],renderHeader:[],renderHeaderRow:[],renderHeaderCell:[],renderBodyWrapper:[],renderBodyRoot:[],renderBody:[],renderRow:[],renderCell:[]},s=[],l=[],a=this.hooks.slice();return a.sort((i,u)=>i.priority-u.priority),a.map(i=>i.hook).forEach(i=>{const u=i(n.current),{render:y,renderRoot:b,renderContent:d,renderHeaderWrapper:m,renderHeaderRoot:h,renderHeader:k,renderHeaderRow:C,renderHeaderCell:f,renderBodyWrapper:S,renderBodyRoot:M,renderBody:z,renderRow:W,renderCell:_,rowClassName:v,onRow:H,...j}=u;Object.entries(r).forEach(([x,L])=>{const E=u[x];typeof E=="function"&&L.push(E)}),typeof v=="function"&&s.push(v),typeof H=="function"&&l.push(H),n.current=j}),Object.entries(r).forEach(([i,u])=>{u.length>0&&(n.current[i]=(y,b)=>u.reduce((d,m)=>m(d,b),y))}),s.length>0&&(n.current.rowClassName=(i,u)=>B(...s.map(y=>y(i,u)))),l.length>0&&(n.current.onRow=(i,u)=>l.reduce((y,b)=>({...y,...b(i,u)}),{})),n.current}};ae(se,"defaultPipeline",new se);let te=se;function Et(e){const{use:t,pipeline:n}=e,r=o.useMemo(()=>({current:new te}),[]);if(t!=null){const s=st([...t,...(n==null?void 0:n.hooks)??[]]);if(!de(r.current.hooks,s)){const l=new te;return l.setHooks(s),r.current=l,l}}return r.current}function he(e,t){let n=-1;for(let r=0;r<e.length;r+=1)t(e[r],r)&&(n=r);return n}function lt(e){const{className:t,rowIndex:n,rowData:r,columns:s,onRow:l,renderRow:a,renderCell:i,...u}=e,{updateRowHeight:y}=rt(),{columns:b,descriptor:d}=s,m=he(d,f=>f.type==="blank"?!1:Y(f.column.fixed)),h=d.findIndex(f=>f.type==="blank"?!1:q(f.column.fixed)),{className:k,...C}=(l==null?void 0:l(r,n))??{};return O(w.jsx("tr",{...u,...C,className:B("virtual-table-row",t,k),ref:f=>{f!=null&&y(n,n,f.offsetHeight)},children:d.map((f,S)=>{const{key:M}=f;if(f.type==="blank")return w.jsx("td",{},M);const{column:z}=f;return w.jsx(Xe,{className:B(m===S&&"virtual-table-cell-fix-left-last",h===S&&"virtual-table-cell-fix-right-first"),column:z,rowIndex:n,rowData:r,renderCell:i},M)})}),a,{columns:b,rowIndex:n,rowData:r,columnDescriptor:d})}const ct=o.memo(lt);function it(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function ut(...e){return t=>{e.forEach(n=>it(n,t))}}function V(...e){return o.useCallback(ut(...e),e)}function pe(e,t){if(le(e)){const n=()=>{t({width:window.innerWidth,height:window.innerHeight})};return n(),window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}}else{const n=new ResizeObserver(r=>{const s=r[0].contentRect;t({width:s.width,height:s.height})});return n.observe(e),()=>{n.disconnect()}}}function at(e,t){let n=0,r=e.length-1,s=-1;for(;n<=r;){const l=Math.floor((n+r)/2);e[l].bottom>t?(s=l,r=l-1):n=l+1}if(s!==-1)return e[s]}function dt(e){const{getOffsetTop:t,dataSource:n,getScroller:r,estimateSize:s,overscan:l}=e,[a,i]=o.useState(0),[u,y]=o.useState(0),b=o.useMemo(()=>n.slice(a,u),[n,a,u]),d=o.useRef([]);(()=>{const v=n.length;for(let H=0;H<v;H++)d.current[H]==null&&(d.current[H]=s);d.current=d.current.slice(0,v)})();const h=o.useRef([]),k=(v=!1)=>{if(v&&h.current.length>0)return;const{rects:H}=d.current.reduce((j,x,L)=>{const E=j.top+x;return j.rects.push({index:L,top:j.top,height:x,bottom:E}),j.top=E,j},{top:0,rects:[]});h.current=H},C=(v,H)=>{d.current[v]=H},f=o.useRef({index:0,height:s,top:0,bottom:s}),S=o.useRef(0),M=o.useRef(!1);o.useEffect(()=>{const v=r();if(v==null)return;let H=0;const j=()=>{const g=t();let p=0;return le(v)||Me(v)?p=window.scrollY:p=be(v).scrollTop,Math.max(p-g,0)},x=g=>{const p=H;return H=Math.ceil(g/s),{prevCount:p}},L=g=>{const p=at(h.current,g);p!=null&&(f.current=p,i(Math.max(0,p.index-l)),y(p.index+H+l))},E=g=>{const p=t(),F=be(g.target),T=Math.max(0,F.scrollTop-p);T>S.current?T>f.current.bottom&&L(T):T<f.current.top&&L(T),S.current=T};let c=0;const R=pe(v,g=>{if(g.height===c||g.height===0)return;c=g.height,x(g.height);const p=j();if(M.current)L(p);else{M.current=!0;let F=0;p>=s&&(F=Math.max(Math.floor(p/s)-1-l,0));const T=F+H+l;i(F),y(T)}});return v.addEventListener("scroll",E),()=>{R(),v.removeEventListener("scroll",E)}},[s,t,r,l]);const z=(v,H)=>d.current.slice(v,H).reduce((j,x)=>j+x,0),W=z(0,a),_=z(u);return{startIndex:a,endIndex:u,rowHeightList:d,updateRowRectList:k,setRowHeight:C,topBlank:W,bottomBlank:_,dataSlice:b}}function ft(e){const{bodyWrapperRef:t,bodyRootRef:n,bodyRef:r,className:s,style:l,dataSource:a,columns:i,rowKey:u,overscan:y,estimateSize:b,getScroller:d,getOffsetTop:m,rowClassName:h,onRow:k,renderBodyWrapper:C,renderBodyRoot:f,renderBody:S,renderRow:M,renderCell:z}=e,{startIndex:W,dataSlice:_,setRowHeight:v,updateRowRectList:H,rowHeightList:j,topBlank:x,bottomBlank:L}=dt({getOffsetTop:m,dataSource:a,getScroller:d,estimateSize:b,overscan:y}),E=o.useRef(new Map),c=o.useCallback((D,A,P)=>{const Q=E.current.get(D)??new Map;Q.set(A,P),E.current.set(D,Q)},[]),R=o.useMemo(()=>({updateRowHeight:c,getRowHeightList:()=>j.current}),[j,c]),{columns:g,descriptor:p}=i,F=V(r,D=>{if(D==null||D.offsetHeight===0)return;E.current.forEach((Q,Z)=>{const G=Array.from(Q.values()).reduce((J,ue)=>J+ue,0);v(Z,G)}),H(),E.current.clear()}),T=O(w.jsx("tbody",{ref:F,children:_.map((D,A)=>{const P=D[u];return w.jsx(ct,{className:B(h==null?void 0:h(D,A)),rowIndex:A+W,rowData:D,columns:i,onRow:k,renderRow:M,renderCell:z},P)})}),S,{columns:g,columnDescriptor:p}),{setWidthList:I}=fe(),X=O(w.jsxs("table",{className:B(s,"virtual-table-body"),style:{...l,paddingBottom:L,paddingTop:x},ref:n,children:[w.jsx(Ee,{columns:p,onColumnSizesMeasure:I}),T]}),f,{columns:g,columnDescriptor:p}),{listen:ne,notify:re}=ce(),oe=o.useRef(null);o.useEffect(()=>{const D=oe.current;if(D==null)return;const A="virtual-table-body",P=()=>{re(A,{scrollLeft:()=>D.scrollLeft,node:D})},Q=ne(A,Z=>{D.scrollLeft=Z});return D.addEventListener("scroll",P),()=>{D.removeEventListener("scroll",P),Q()}},[ne,re]);const ie=V(oe,t);return w.jsx(Ne.Provider,{value:R,children:O(w.jsx("div",{ref:ie,className:"virtual-table-body-wrapper",children:X}),C,{columns:g,columnDescriptor:p})})}const ht=e=>{const{className:t,style:n,wrapperRef:r,columns:s,stickyHeader:l,renderHeaderWrapper:a,renderHeaderRoot:i,renderHeader:u,renderHeaderRow:y,renderHeaderCell:b}=e,{columns:d,descriptor:m}=s,h=d[d.length-1],{widthList:k}=fe(),{size:C}=He(),f=he(m,x=>x.type==="blank"?!1:Y(x.column.fixed)),S=m.findIndex(x=>x.type==="blank"?!1:q(x.column.fixed)),{listen:M,notify:z}=ce(),W=o.useRef(null);o.useEffect(()=>{const x=W.current;if(x==null)return;const L="virtual-table-header",E=()=>{z(L,{scrollLeft:()=>x.scrollLeft,node:x})},c=M(L,R=>{x.scrollLeft=R});return x.addEventListener("scroll",E),()=>{x.removeEventListener("scroll",E),c()}},[M,z]);const _=O(w.jsx("tr",{children:m.map((x,L)=>{var T;const{key:E}=x;if(x.type==="blank")return w.jsx("th",{"data-blank":!0},E);const{column:c}=x;if(c.colSpan===0)return null;const R=$(h)===E,{className:g,style:p,...F}=((T=c.onHeaderCell)==null?void 0:T.call(c,c,L))??{};return w.jsx(o.Fragment,{children:O(o.createElement("th",{scope:"col",...F,colSpan:c.colSpan,className:B("virtual-table-header-cell",R&&"no-split",c.align!=null&&`virtual-table-align-${c.align}`,Se(c.fixed)&&"virtual-table-sticky-cell",f===L&&"virtual-table-cell-fix-left-last",S===L&&"virtual-table-cell-fix-right-first",c.className,g),style:{...p,left:Y(c.fixed)?C.get(E):void 0,right:q(c.fixed)?C.get(E):void 0}},c.title),b,{column:c,columns:d,columnWidths:k,columnDescriptor:m})},E)})}),y,{columns:d,columnDescriptor:m}),v=O(w.jsx("thead",{className:"virtual-table-thead",children:_}),u,{columns:d,columnDescriptor:m}),H=O(w.jsxs("table",{style:n,children:[w.jsx(Ee,{columns:m}),v]}),i,{columns:d,columnDescriptor:m}),j=V(r,W);return O(w.jsx("div",{ref:j,className:B("virtual-table-header",t,{"virtual-table-header-sticky":l}),style:{top:Number.isFinite(l)?l:void 0},children:H}),a,{columns:d,columnDescriptor:m})};function pt(e,t){let n=0,r=e.length-1,s=-1;for(;n<=r;){const l=Math.floor((n+r)/2);e[l].right>t?(s=l,r=l-1):n=l+1}if(s!==-1)return e[s]}function mt(e){let t=-1;for(let n=e.length-1;n>=0;n--){const r=e[n];if(q(r.fixed))t=n;else break}return t}function yt(e){return he(e,t=>Y(t.fixed))}function gt(e){const{estimateSize:t,overscan:n,columns:r,bodyWrapper:s,columnWidths:l,disabled:a=!1}=e,i=yt(r),u=mt(r),y=i>-1?$(r[i]):null,b=u>-1?$(r[u]):null,[d,m]=o.useState(0),[h,k]=o.useState(0),C=o.useMemo(()=>{if(a)return[];let c=0;return r.map((R,g)=>{const p=$(R),F=l.get(p)??t,T=c+F,I={index:g,width:F,left:c,right:T};return c=T,I})},[r,l,t,a]),f=o.useRef({index:0,width:t,left:0,right:t}),S=Re(c=>pt(C,c)),M=Re((c,R)=>{const g=S(c);g!=null&&(f.current=g,m(Math.max(0,g.index-n)),k(g.index+R+n))}),z=o.useRef(0);o.useEffect(()=>{if(a)return;const c=s.current;if(c==null)return;const R=c.offsetWidth;let g=Math.ceil(R/t);const p=()=>{const I=c.scrollLeft;I>z.current?I>f.current.right&&M(I,g):I<f.current.left&&M(I,g),z.current=I};c.addEventListener("scroll",p);let F=0;const T=pe(c,({width:I})=>{if(I===F||I===0)return;F=I;const X=c.scrollLeft;g=Math.ceil(I/t),M(X,g)});return()=>{c.removeEventListener("scroll",p),T()}},[s,t,M,n,S,a]);const W=(c,R)=>C.slice(c,R).reduce((g,p)=>g+p.width,0),_=i>-1?W(0,i+1):0,v=u>-1?W(u):0,H=Math.max(0,W(0,d)-_),j=Math.max(0,W(h)-v),x=o.useMemo(()=>{if(a)return r;const c=[...r.slice(0,i+1),...r.slice(d,h),...r.slice(u)],R=new Set;return c.filter(g=>{const p=$(g);return R.has(p)?!1:(R.add(p),!0)})},[a,r,d,h,i,u]),L=o.useMemo(()=>x.reduce((c,R,g)=>{const p=$(R);return p===y?(c.push({type:"normal",key:p,column:R}),c.push({type:"blank",key:"_blank_left",width:H})):y==null&&g===0?(c.push({type:"blank",key:"_blank_left",width:H}),c.push({type:"normal",key:p,column:R})):p===b?(c.push({type:"blank",key:"_blank_right",width:j}),c.push({type:"normal",key:p,column:R})):b==null&&g===x.length-1?(c.push({type:"normal",key:p,column:R}),c.push({type:"blank",key:"_blank_right",width:j})):c.push({type:"normal",key:p,column:R}),c},[]),[x,y,b,H,j]);return{columns:o.useMemo(()=>({columns:x,descriptor:L}),[x,L]),columnSlice:x,lastFixedLeftIndex:i,firstFixedRightIndex:u}}function wt(e,t){const{className:n,style:r,children:s,hasFixedLeftColumn:l,hasFixedRightColumn:a,renderRoot:i,bodyScrollContainer:u}=e,y=o.useRef(null),[b,d]=o.useState(!1),[m,h]=o.useState(!1),{listen:k}=ce();o.useEffect(()=>{if(!l&&!a)return;const f=M=>{const{scrollLeft:z,clientWidth:W,scrollWidth:_}=M;l&&d(z!==0),a&&h(!(z+W>=_))},S=u.current;return S!=null&&f(S),k("__root",(M,z)=>{f(z)})},[u,l,a,k]);const C=V(t,y);return O(w.jsx("div",{ref:C,className:B("virtual-table",b&&"virtual-table-has-fix-left",m&&"virtual-table-has-fix-right",n),style:r,children:s}),i,{})}const xt=o.forwardRef(wt);function bt(e,t){const{bodyRootRef:n,className:r,style:s,tableBodyClassName:l,tableBodyStyle:a,columns:i,dataSource:u,rowKey:y="key",estimatedRowHeight:b=46,estimatedColumnWidth:d,overscanRows:m=5,overscanColumns:h=3,stickyHeader:k,pipeline:C=te.defaultPipeline,rowClassName:f,onRow:S,getOffsetTop:M,virtualHeader:z=!0}=e,W=o.useRef(null),_=o.useRef(null),v=o.useRef(null),H=o.useRef(null),j=V(H,n),x=o.useRef(null),L=o.useCallback(()=>{const N=W.current;if(N!=null)return Ve(N)},[]),E=o.useCallback(()=>{var K,ge;if(typeof M=="function")return M();const N=L();if(N===W.current)return 0;if(le(N)||Me(N)){const Ke=((K=W.current)==null?void 0:K.getBoundingClientRect().top)??0;return window.scrollY+Ke}return((ge=W.current)==null?void 0:ge.offsetTop)??0},[M,L]),{dataSource:c,columns:R,rowKey:g,rowClassName:p,render:F,renderRoot:T,renderContent:I,renderHeaderWrapper:X,renderHeaderRoot:ne,renderHeader:re,renderHeaderRow:oe,renderHeaderCell:ie,renderBodyWrapper:D,renderBodyRoot:A,renderBody:P,renderRow:Q,renderCell:Z,onRow:G}=C.use({dataSource:u,rowKey:y,columns:i,estimatedRowHeight:b,headerWrapperRef:_,bodyWrapperRef:v,bodyRootRef:H,bodyRef:x,rootRef:W,getOffsetTop:E,getScroller:L}),[J,ue]=o.useState(()=>new Map),ze=o.useRef(J),me=o.useCallback(N=>{ze.current=N,ue(N)},[]),Te=o.useMemo(()=>({widthList:J,setWidthList:me}),[J,me]),{columns:U}=gt({estimateSize:d??100,overscan:h,columns:R,bodyWrapper:v,columnWidths:J,disabled:d==null}),Fe=o.useCallback((N,K)=>B(f==null?void 0:f(N,K),p==null?void 0:p(N,K)),[f,p]),Ie=o.useCallback((N,K)=>({...S==null?void 0:S(N,K),...G==null?void 0:G(N,K)}),[G,S]),De=R.some(N=>Y(N.fixed)),_e=R.some(N=>q(N.fixed)),ye=o.useMemo(()=>({columns:R,descriptor:R.map(N=>({key:$(N),type:"normal",column:N}))}),[R]),Oe=o.useMemo(()=>z?U:ye,[z,ye,U]),Be=O(w.jsxs(w.Fragment,{children:[w.jsx(ht,{wrapperRef:_,columns:Oe,stickyHeader:k,renderHeaderWrapper:X,renderHeaderRoot:ne,renderHeader:re,renderHeaderRow:oe,renderHeaderCell:ie}),w.jsx(ft,{bodyWrapperRef:v,bodyRootRef:j,bodyRef:x,className:l,style:a,columns:U,rowKey:g,dataSource:c,overscan:m,estimateSize:b,getScroller:L,getOffsetTop:E,rowClassName:Fe,onRow:Ie,renderBodyWrapper:D,renderBodyRoot:A,renderBody:P,renderRow:Q,renderCell:Z})]}),I,{columns:U.columns,columnDescriptor:U.descriptor}),Ae=V(W,t),Pe=O(w.jsx(xt,{ref:Ae,className:r,style:s,hasFixedLeftColumn:De,hasFixedRightColumn:_e,renderRoot:T,bodyScrollContainer:v,children:Be}),F,{columns:U.columns,columnDescriptor:U.descriptor});return w.jsx(ke.Provider,{value:Te,children:w.jsx(qe,{columns:R,children:w.jsx(tt,{getScroller:L,root:W,children:w.jsx(nt,{children:Pe})})})})}const Lt=o.memo(o.forwardRef(bt));function Rt(){const e=document.createElement("div");e.style.position="absolute",e.style.width="100px",e.style.height="100px",e.style.overflow="scroll",e.style.top="-9999px",document.body.appendChild(e);const t=e.offsetWidth-e.clientWidth,n=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),{width:t,height:n}}const Ct=e=>{const{className:t,style:n,bottom:r,zIndex:s,bodyRef:l}=e,{listen:a,notify:i}=ce(),u=o.useRef(null);o.useEffect(()=>{const m=u.current;if(m==null)return;const h="virtual-table-sticky-bottom-scroll",k=()=>{i(h,{scrollLeft:()=>m.scrollLeft,node:m})},C=a(h,f=>{m.scrollLeft=f});return m.addEventListener("scroll",k),()=>{m.removeEventListener("scroll",k),C()}},[a,i]);const[y,b]=o.useState(0);o.useEffect(()=>{const m=l.current;if(m!=null)return pe(m,({width:h})=>{h!==0&&b(h)})},[l]);const[d]=o.useState(Rt);return w.jsx("div",{className:B("virtual-table-sticky-scroll",t),style:{...n,paddingTop:d.height>0?0:12,marginTop:d.height>0?0:d.height*-1,height:d.height,bottom:r,zIndex:s},ref:u,children:w.jsx("div",{className:"virtual-table-sticky-scroll-bar",style:{width:y}})})};function St(e,t){const{bodyRootRef:n}=e;return{...e,renderContent(r){return w.jsxs(w.Fragment,{children:[r,w.jsx(Ct,{bodyRef:n,...t})]})}}}const Mt=ot(St);export{Ee as C,Lt as V,ot as a,Ht as b,B as c,rt as d,xe as e,Re as f,$ as g,Mt as h,Se as i,ce as j,Rt as k,He as l,Y as m,q as n,pe as o,V as p,Et as u};
