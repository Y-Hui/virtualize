var Xe=Object.defineProperty;var Je=(e,t,n)=>t in e?Xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var fe=(e,t,n)=>Je(e,typeof t!="symbol"?t+"":t,n);import{r as s,j as b}from"./index-BNzIjINb.js";function We(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=We(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function $(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=We(e))&&(r&&(r+=" "),r+=t);return r}function Ee(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),r=Object.keys(t),o=n.length;if(r.length!==o)return!1;for(let l=0;l<o;l+=1){const f=n[l];if(e[f]!==t[f]||!Object.prototype.hasOwnProperty.call(t,f))return!1}return!0}function be(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=e.length;if(t.length!==n)return!1;for(let r=0;r<n;r+=1)if(e[r]!==t[r])return!1;return!0}function le(e,t){if(Object.is(e,t))return!0;if(Array.isArray(e)&&Array.isArray(t))return be(e,t)?!0:e.length===t.length&&e.findIndex(r=>typeof r=="object"&&r!=null)>-1?e.every((r,o)=>Array.isArray(r)?be(r,t[o]):typeof r=="object"&&r!=null?Ee(r,t[o]):Object.is(r,t[o])):!1;if(e instanceof Map&&t instanceof Map){const n=Array.from(e.keys()),r=Array.from(t.keys());if(le(n,r)){const o=Array.from(e.values()),l=Array.from(t.values());if(le(o,l))return!0}return!1}return typeof e=="object"&&e!=null?Ee(e,t):!1}function Te(e){const t=e(),n=s.useRef(t);return le(t,n.current)||(n.current=t),n.current}function Y(e){return"key"in e?e.key:e.dataIndex}function Ze(e,t){return typeof t=="function"?t(e):e[t]}function G(e){return e==="left"}function U(e){return e==="right"}function Ie(e){return G(e)||U(e)}const je=s.createContext(null);function Re(){const e=s.useContext(je);if(e==null)throw new Error("useColumnSizes provider not found");return e}const Ne=s.createContext(null);function et(e){const{columns:t,children:n}=e,{widthList:r}=Re(),o=s.useMemo(()=>t.map(u=>({key:Y(u),fixed:u.fixed})),[t]),l=s.useMemo(()=>{let u=0;const R=o.reduce((m,x,v)=>{const{fixed:p,key:T}=x;return G(p)&&(m[v]=u,u+=r.get(T)??0),m},[]);let a=0;const d=o.reduceRight((m,x,v)=>{const{fixed:p,key:T}=x;return U(p)&&(m[v]=a,a+=r.get(T)??0),m},[]);return o.reduce((m,x,v)=>{const{key:p,fixed:T}=x;return G(T)?(m.set(p,R[v]),m):(U(T)&&m.set(p,d[v]),m)},new Map)},[o,r]),f=Te(()=>o),i=Te(()=>l),c=s.useMemo(()=>({size:i,fixed:f}),[f,i]);return b.jsx(Ne.Provider,{value:c,children:n})}function Be(){const e=s.useContext(Ne);if(e==null)throw new Error("useTableSticky provider not found");return e}function P(e,t,n){return typeof t=="function"?t(e,n):e}function tt(e,t,n){const{render:r}=n,o=t;if("dataIndex"in n){const l=n.dataIndex;return typeof r!="function"?o[l]:r(o[l],t,e)}return(r==null?void 0:r(t,t,e))??null}function nt(e){const{className:t,style:n,column:r,rowData:o,rowIndex:l,renderCell:f,...i}=e,{align:c,fixed:u,onCell:R}=r,a=Y(r),{size:d}=Be(),{className:m,style:x,colSpan:v,rowSpan:p,...T}=(R==null?void 0:R(o,l))??{};return v===0||p===0?null:P(b.jsx("td",{...i,...T,colSpan:v,rowSpan:p,className:$("virtual-table-cell",c!=null&&`virtual-table-align-${c}`,Ie(u)&&"virtual-table-sticky-cell",t,r.className,m),style:{...n,...x,left:G(u)?d.get(a):void 0,right:U(u)?d.get(a):void 0},"data-col-key":a,children:tt(l,o,r)}),f,{column:r})}const rt=s.memo(nt),ot=e=>{const{columns:t,onColumnSizesMeasure:n}=e,r=n!=null,o=new Map,l=s.useRef(new Map);return b.jsx("colgroup",{ref:()=>{r&&(le(o,l.current)||(n(o),l.current=o))},children:t.map(f=>{const{key:i}=f;if(f.type==="blank")return b.jsx("col",{className:"blank",style:{width:f.width}},i);const{column:c}=f;return b.jsx("col",{ref:u=>{u==null||!r||o.set(i,u.offsetWidth)},style:{width:c.width,minWidth:c.minWidth}},i)})})},ze=s.memo(ot),st=/auto|scroll|overlay|hidden/;function Fe(e){return e instanceof Node?e.nodeType===1:!1}function lt(e,t=window){let n=e;for(;n!==t&&Fe(n);){if(n===document.body)return t;const{overflow:r,overflowY:o,overflowX:l}=window.getComputedStyle(n);if(st.test(r+o+l))return n;n=n.parentNode}return e.ownerDocument.defaultView??window}function pe(e){return Object.prototype.toString.call(e)==="[object Window]"}function ct(e){return Object.prototype.toString.call(e)==="[object HTMLDocument]"}function Oe(e){return Object.prototype.toString.call(e)==="[object HTMLHtmlElement]"}function Me(e){return ct(e)?e.scrollingElement:Fe(e)?e:document.scrollingElement}function it(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),o=Number.parseFloat(window.getComputedStyle(t).borderTopWidth)||0,l=t.scrollTop;return n.top-r.top-o+l}function ut(e){const{getScroller:t,root:n}=e,[r,o]=s.useState(0),[l,f]=s.useState(0),[i,c]=s.useState(0),[u,R]=s.useState(0),a=s.useRef(null);return s.useLayoutEffect(()=>{const d=t();if(d==null)return;let m;pe(d)?m=document.scrollingElement:m=d,a.current=m;const x=new ResizeObserver(v=>{const{width:p,height:T}=v[0].contentRect;o(p),f(T)});return x.observe(m),()=>{x.disconnect()}},[t]),s.useLayoutEffect(()=>{const d=n.current;if(d==null)return;const m=new ResizeObserver(x=>{const{width:v,height:p}=x[0].contentRect;c(v),R(p)});return m.observe(d),()=>{m.disconnect()}},[n]),{scrollContainerWidth:r,scrollContainerHeight:l,tableWidth:i,tableHeight:u}}const De=s.createContext(null);function at(e){const{getScroller:t,root:n,children:r}=e,{scrollContainerHeight:o,scrollContainerWidth:l,tableHeight:f,tableWidth:i}=ut({getScroller:t,root:n}),c=s.useMemo(()=>({scrollContainerWidth:l,scrollContainerHeight:o,tableWidth:i,tableHeight:f}),[l,o,i,f]);return b.jsx(De.Provider,{value:c,children:r})}function Ot(){const e=s.useContext(De);if(e==null)throw new Error("useContainerSize provider not found");return e}const _e=s.createContext(null);function dt(e){const{children:t}=e,n=s.useRef(new Map),r=s.useMemo(()=>{const o=new Set;return{listen(l,f){return n.current.set(l,(i,c)=>{f(i,c)}),()=>{n.current.delete(l)}},notify(l,f){if(o.has(l)){o.delete(l);return}const{scrollLeft:i,node:c}=f;let u=window.requestAnimationFrame;u==null&&(u=R=>{R()}),n.current.forEach((R,a)=>{l!==a&&(o.add(a),u(()=>{R(i(),c)}))})}}},[]);return b.jsx(_e.Provider,{value:r,children:t})}function me(){const e=s.useContext(_e);if(e==null)throw new Error("useHorizontalScrollContext provider not found");return e}const Pe=s.createContext(null);function ft(){const e=s.useContext(Pe);if(e==null)throw new Error("useTableRowManager provider not found");return e}function Le(e){const t=s.useRef(null);return s.useLayoutEffect(()=>{t.current=e}),s.useCallback((...r)=>{var o;return(o=t.current)==null?void 0:o.call(t,...r)},[])}class ht{constructor(){fe(this,"instance",{getCurrentProps(){throw new Error("getCurrentProps() has not been implemented yet")},getDOM(){throw new Error("getDOM() has not been implemented yet")},getScrollValueByRowIndex(){throw new Error("getScrollValueByRowIndex() has not been implemented yet")},getScrollValueByColumnKey(){throw new Error("getScrollValueByColumnKey() has not been implemented yet")},scrollToRow(){throw new Error("scrollToRow() has not been implemented yet")},scrollToColumn(){throw new Error("scrollToColumn() has not been implemented yet")},scrollTo(){throw new Error("scrollTo() has not been implemented yet")}});this.getInstance=this.getInstance.bind(this),this.getInternalHooks=this.getInternalHooks.bind(this)}getInternalHooks(){return{implGetCurrentProps:t=>{this.instance.getCurrentProps=t},implGetDOM:t=>{this.instance.getDOM=t},implScrollValueByRowIndex:t=>{this.instance.getScrollValueByRowIndex=t},implScrollValueByColumnKey:t=>{this.instance.getScrollValueByColumnKey=t},implScrollToRow:t=>{this.instance.scrollToRow=t},implScrollToColumn:t=>{this.instance.scrollToColumn=t},implScrollTo:t=>{this.instance.scrollTo=t}}}getInstance(){return{...Object.keys(this.instance).reduce((t,n)=>(t[n]=(...r)=>this.instance[n](...r),t),{}),getInternalHooks:this.getInternalHooks}}}function pt(e){return s.useMemo(()=>e??new ht().getInstance(),[e])}function mt(e){const t={current:null,options:null};return(...n)=>{const r=o=>e(o,...n);return le(n,t.options)?t.current??r:(t.options=n,t.current=r,r)}}function yt(e){return Array.isArray(e)?e.filter(t=>t!=null&&(typeof t=="function"||typeof t.hook=="function")).map(t=>typeof t=="function"?{priority:100,hook:t}:t):[]}const he=class he{constructor(){fe(this,"hooks",[]);this.use=this.use.bind(this)}setHooks(t){this.hooks=t}use(t){if(this.hooks.length===0)return t;const n={current:t},r={render:[],renderRoot:[],renderContent:[],renderHeaderWrapper:[],renderHeaderRoot:[],renderHeader:[],renderHeaderRow:[],renderHeaderCell:[],renderBodyWrapper:[],renderBodyRoot:[],renderBody:[],renderBodyContent:[],renderRow:[],renderCell:[]},o=[],l=[],f=this.hooks.slice();return f.sort((i,c)=>i.priority-c.priority),f.map(i=>i.hook).forEach(i=>{const c=i(n.current),{render:u,renderRoot:R,renderContent:a,renderHeaderWrapper:d,renderHeaderRoot:m,renderHeader:x,renderHeaderRow:v,renderHeaderCell:p,renderBodyWrapper:T,renderBodyRoot:N,renderBody:W,renderBodyContent:O,renderRow:D,renderCell:k,rowClassName:H,onRow:I,...w}=c;Object.entries(r).forEach(([M,j])=>{const L=c[M];typeof L=="function"&&j.push(L)}),typeof H=="function"&&o.push(H),typeof I=="function"&&l.push(I),n.current=w}),Object.entries(r).forEach(([i,c])=>{c.length>0&&(n.current[i]=(u,R)=>c.reduce((a,d)=>d(a,R),u))}),o.length>0&&(n.current.rowClassName=(i,c)=>$(...o.map(u=>u(i,c)))),l.length>0&&(n.current.onRow=(i,c)=>l.reduce((u,R)=>({...u,...R(i,c)}),{})),n.current}};fe(he,"defaultPipeline",new he);let ce=he;function Dt(e){const{use:t,pipeline:n}=e,r=s.useMemo(()=>({current:new ce}),[]);if(t!=null){const o=yt([...t,...(n==null?void 0:n.hooks)??[]]);if(!be(r.current.hooks,o)){const l=new ce;return l.setHooks(o),r.current=l,l}}return r.current}function xe(e,t){let n=-1;for(let r=0;r<e.length;r+=1)t(e[r],r)&&(n=r);return n}function gt(e){const{className:t,rowIndex:n,rowData:r,columns:o,onRow:l,renderRow:f,renderCell:i,...c}=e,{updateRowHeight:u}=ft(),{columns:R,descriptor:a}=o,d=xe(a,p=>p.type==="blank"?!1:G(p.column.fixed)),m=a.findIndex(p=>p.type==="blank"?!1:U(p.column.fixed)),{className:x,...v}=(l==null?void 0:l(r,n))??{};return P(b.jsx("tr",{...c,...v,className:$("virtual-table-row",t,x),"data-row-index":n,ref:p=>{p!=null&&u(n,n,p.offsetHeight)},children:a.map((p,T)=>{const{key:N}=p;if(p.type==="blank")return b.jsx("td",{},N);const{column:W}=p;return b.jsx(rt,{className:$(d===T&&"virtual-table-cell-fix-left-last",m===T&&"virtual-table-cell-fix-right-first"),column:W,rowIndex:n,rowData:r,renderCell:i},N)})}),f,{columns:R,rowIndex:n,rowData:r,columnDescriptor:a})}const wt=s.memo(gt);function bt(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function Rt(...e){return t=>{e.forEach(n=>bt(n,t))}}function ne(...e){return s.useCallback(Rt(...e),e)}function Ce(e,t){if(pe(e)){const n=()=>{t({width:window.innerWidth,height:window.innerHeight})};return n(),window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}}else{const n=new ResizeObserver(r=>{const o=r[0].contentRect;t({width:o.width,height:o.height})});return n.observe(e),()=>{n.disconnect()}}}function xt(e,t){let n=0,r=e.length-1,o=-1;for(;n<=r;){const l=Math.floor((n+r)/2);e[l].bottom>t?(o=l,r=l-1):n=l+1}if(o!==-1)return e[o]}function Ct(e){const{getOffsetTop:t,dataSource:n,getScroller:r,estimateSize:o,overscan:l}=e,[f,i]=s.useState(0),[c,u]=s.useState(0),R=s.useMemo(()=>n.slice(f,c),[n,f,c]),a=s.useRef([]);(()=>{const k=n.length;for(let H=0;H<k;H++)a.current[H]==null&&(a.current[H]=o);a.current=a.current.slice(0,k)})();const m=s.useRef([]),x=(k=!1)=>{if(k&&m.current.length>0)return;const{rects:H}=a.current.reduce((I,w,M)=>{const j=I.top+w;return I.rects.push({index:M,top:I.top,height:w,bottom:j}),I.top=j,I},{top:0,rects:[]});m.current=H},v=(k,H)=>{a.current[k]=H},p=s.useRef({index:0,height:o,top:0,bottom:o}),T=s.useRef(0),N=s.useRef(!1);s.useEffect(()=>{const k=r();if(k==null)return;let H=0;const I=()=>{const S=t();let y=0;return pe(k)||Oe(k)?y=window.scrollY:y=Me(k).scrollTop,Math.max(y-S,0)},w=S=>{const y=H;return H=Math.ceil(S/o),{prevCount:y}},M=S=>{const y=xt(m.current,S);y!=null&&(p.current=y,i(Math.max(0,y.index-l)),u(y.index+H+l))},j=S=>{const y=t(),g=Me(S.target),C=Math.max(0,g.scrollTop-y);C>T.current?C>p.current.bottom&&M(C):C<p.current.top&&M(C),T.current=C};let L=0;const h=Ce(k,S=>{if(S.height===L||S.height===0)return;L=S.height,w(S.height);const y=I();if(N.current)M(y);else{N.current=!0;let g=0;y>=o&&(g=Math.max(Math.floor(y/o)-1-l,0));const C=g+H+l;i(g),u(C)}});return k.addEventListener("scroll",j),()=>{h(),k.removeEventListener("scroll",j)}},[o,t,r,l]);const W=(k,H)=>a.current.slice(k,H).reduce((I,w)=>I+w,0),O=W(0,f),D=W(c);return{startIndex:f,endIndex:c,rowHeightList:a,updateRowRectList:x,setRowHeight:v,topBlank:O,bottomBlank:D,dataSlice:R}}function St(e){const{bodyWrapperRef:t,bodyRootRef:n,bodyRef:r,className:o,style:l,dataSource:f,columns:i,rowKey:c,instance:u,overscan:R,estimateSize:a,getScroller:d,getOffsetTop:m,rowClassName:x,onRow:v,renderBodyWrapper:p,renderBodyRoot:T,renderBody:N,renderBodyContent:W,renderRow:O,renderCell:D}=e,{startIndex:k,dataSlice:H,setRowHeight:I,updateRowRectList:w,rowHeightList:M,topBlank:j,bottomBlank:L}=Ct({getOffsetTop:m,dataSource:f,getScroller:d,estimateSize:a,overscan:R}),h=s.useRef(new Map),S=s.useCallback((B,A,_)=>{const V=h.current.get(B)??new Map;V.set(A,_),h.current.set(B,V)},[]),y=s.useMemo(()=>({updateRowHeight:S,getRowHeightList:()=>M.current}),[M,S]),{columns:g,descriptor:C}=i,K=ne(r,B=>{if(B==null||B.offsetHeight===0)return;h.current.forEach((V,Q)=>{const J=Array.from(V.values()).reduce((q,re)=>q+re,0);I(Q,J)}),w(),h.current.clear()}),F=P(H.map((B,A)=>{const _=Ze(B,c);return b.jsx(wt,{className:$(x==null?void 0:x(B,A)),rowIndex:A+k,rowData:B,columns:i,onRow:v,renderRow:O,renderCell:D},_)}),W,{columns:g,columnDescriptor:C,startRowIndex:k}),te=P(b.jsx("tbody",{ref:K,children:F}),N,{columns:g,columnDescriptor:C,startRowIndex:k}),{setWidthList:ye}=Re(),ge=P(b.jsxs("table",{className:$(o,"virtual-table-body"),style:{...l,paddingBottom:L,paddingTop:j},ref:n,children:[b.jsx(ze,{columns:C,onColumnSizesMeasure:ye}),te]}),T,{columns:g,columnDescriptor:C,startRowIndex:k}),{listen:ie,notify:ue}=me(),ae=s.useRef(null);s.useEffect(()=>{const B=ae.current;if(B==null)return;const A="virtual-table-body",_=()=>{ue(A,{scrollLeft:()=>B.scrollLeft,node:B})},V=ie(A,Q=>{B.scrollLeft=Q});return B.addEventListener("scroll",_),()=>{B.removeEventListener("scroll",_),V()}},[ie,ue]);const we=ne(ae,t),de=u.getInternalHooks();return de.implScrollValueByRowIndex(B=>{if(d()==null)return 0;const{stickyHeader:_}=u.getCurrentProps(),{headerWrapper:V}=u.getDOM();let Q=0;return _==null||_===!1?Q=V==null?0:V.offsetHeight:Q=Number.isFinite(_)?_*-1:0,M.current.slice(0,B).reduce((q,re)=>q+re,0)+m()+Q}),de.implScrollToRow(B=>{u.scrollTo({top:u.getScrollValueByRowIndex(B)})}),b.jsx(Pe.Provider,{value:y,children:P(b.jsx("div",{ref:we,className:"virtual-table-body-wrapper",children:ge}),p,{columns:g,columnDescriptor:C,startRowIndex:k})})}const kt=e=>{const{className:t,style:n,wrapperRef:r,columns:o,stickyHeader:l,renderHeaderWrapper:f,renderHeaderRoot:i,renderHeader:c,renderHeaderRow:u,renderHeaderCell:R}=e,{columns:a,descriptor:d}=o,m=a[a.length-1],{widthList:x}=Re(),{size:v}=Be(),p=xe(d,w=>w.type==="blank"?!1:G(w.column.fixed)),T=d.findIndex(w=>w.type==="blank"?!1:U(w.column.fixed)),{listen:N,notify:W}=me(),O=s.useRef(null);s.useEffect(()=>{const w=O.current;if(w==null)return;const M="virtual-table-header",j=()=>{W(M,{scrollLeft:()=>w.scrollLeft,node:w})},L=N(M,h=>{w.scrollLeft=h});return w.addEventListener("scroll",j),()=>{w.removeEventListener("scroll",j),L()}},[N,W]);const D=P(b.jsx("tr",{children:d.map((w,M)=>{var C;const{key:j}=w;if(w.type==="blank")return b.jsx("th",{"data-blank":!0},j);const{column:L}=w;if(L.colSpan===0)return null;const h=Y(m)===j,{className:S,style:y,...g}=((C=L.onHeaderCell)==null?void 0:C.call(L,L,M))??{};return b.jsx(s.Fragment,{children:P(s.createElement("th",{scope:"col",...g,colSpan:L.colSpan,className:$("virtual-table-header-cell",h&&"no-split",L.align!=null&&`virtual-table-align-${L.align}`,Ie(L.fixed)&&"virtual-table-sticky-cell",p===M&&"virtual-table-cell-fix-left-last",T===M&&"virtual-table-cell-fix-right-first",L.className,S),style:{...y,left:G(L.fixed)?v.get(j):void 0,right:U(L.fixed)?v.get(j):void 0}},L.title),R,{column:L,columns:a,columnWidths:x,columnDescriptor:d})},j)})}),u,{columns:a,columnDescriptor:d}),k=P(b.jsx("thead",{className:"virtual-table-thead",children:D}),c,{columns:a,columnDescriptor:d}),H=P(b.jsxs("table",{style:n,children:[b.jsx(ze,{columns:d}),k]}),i,{columns:a,columnDescriptor:d}),I=ne(r,O);return P(b.jsx("div",{ref:I,className:$("virtual-table-header",t,{"virtual-table-header-sticky":l}),style:{top:Number.isFinite(l)?l:void 0},children:H}),f,{columns:a,columnDescriptor:d})},vt=s.memo(kt);function Ht(e,t){let n=0,r=e.length-1,o=-1;for(;n<=r;){const l=Math.floor((n+r)/2);e[l].right>t?(o=l,r=l-1):n=l+1}if(o!==-1)return e[o]}function Et(e){let t=-1;for(let n=e.length-1;n>=0;n--){const r=e[n];if(U(r.fixed))t=n;else break}return t}function Tt(e){return xe(e,t=>G(t.fixed))}function Mt(e){const{estimateSize:t,defaultColumnWidth:n,overscan:r,columns:o,bodyWrapper:l,columnWidths:f,disabled:i=!1}=e,c=Tt(o),u=Et(o),R=c>-1?Y(o[c]):null,a=u>-1?Y(o[u]):null,[d,m]=s.useState(0),[x,v]=s.useState(0),p=s.useMemo(()=>{if(i)return[];let h=0;return o.map((S,y)=>{const g=Y(S),C=f.get(g)??t,K=h+C,F={index:y,width:C,left:h,right:K};return h=K,F})},[o,f,t,i]),T=s.useRef({index:0,width:t,left:0,right:t}),N=Le(h=>Ht(p,h)),W=Le((h,S)=>{const y=N(h);y!=null&&(T.current=y,m(Math.max(0,y.index-r)),v(y.index+S+r))}),O=s.useRef(0);s.useEffect(()=>{if(i)return;const h=l.current;if(h==null)return;const S=h.offsetWidth;let y=Math.ceil(S/t);const g=()=>{const F=h.scrollLeft;F>O.current?F>T.current.right&&W(F,y):F<T.current.left&&W(F,y),O.current=F};h.addEventListener("scroll",g);let C=0;const K=Ce(h,({width:F})=>{if(F===C||F===0)return;C=F;const te=h.scrollLeft;y=Math.ceil(F/t),W(te,y)});return()=>{h.removeEventListener("scroll",g),K()}},[l,t,W,r,N,i]);const D=(h,S)=>p.slice(h,S).reduce((y,g)=>y+g.width,0),k=c>-1?D(0,c+1):0,H=u>-1?D(u):0,I=Math.max(0,D(0,d)-k),w=Math.max(0,D(x)-H),M=s.useMemo(()=>{if(i)return o;const h=[...o.slice(0,c+1),...o.slice(d,x),...o.slice(u)],S=new Set;return h.filter(y=>{const g=Y(y);return S.has(g)?!1:(S.add(g),!0)})},[i,o,d,x,c,u]),j=s.useMemo(()=>M.reduce((h,S,y)=>{const g=Y(S);let C=S;return C.width==null&&C.minWidth==null&&(C={...C,width:n}),g===R?(h.push({type:"normal",key:g,column:C}),h.push({type:"blank",key:"_blank_left",width:I})):R==null&&y===0?(h.push({type:"blank",key:"_blank_left",width:I}),h.push({type:"normal",key:g,column:C})):g===a?(h.push({type:"blank",key:"_blank_right",width:w}),h.push({type:"normal",key:g,column:C})):a==null&&y===M.length-1?(h.push({type:"normal",key:g,column:C}),h.push({type:"blank",key:"_blank_right",width:w})):h.push({type:"normal",key:g,column:C}),h},[]),[M,R,a,I,w,n]);return{columns:s.useMemo(()=>({columns:M,descriptor:j}),[M,j]),columnSlice:M,lastFixedLeftIndex:c,firstFixedRightIndex:u}}function Lt(e,t){const{className:n,style:r,children:o,hasFixedLeftColumn:l,hasFixedRightColumn:f,renderRoot:i,bodyScrollContainer:c}=e,u=s.useRef(null),[R,a]=s.useState(!1),[d,m]=s.useState(!1),{listen:x}=me();s.useEffect(()=>{if(!l&&!f)return;const p=N=>{const{scrollLeft:W,clientWidth:O,scrollWidth:D}=N;l&&a(W!==0),f&&m(!(W+O>=D))},T=c.current;return T!=null&&p(T),x("__root",(N,W)=>{p(W)})},[c,l,f,x]);const v=ne(t,u);return P(b.jsx("div",{ref:v,className:$("virtual-table",R&&"virtual-table-has-fix-left",d&&"virtual-table-has-fix-right",n),style:r,children:o}),i,{})}const Wt=s.forwardRef(Lt);function It(e,t){const{bodyRootRef:n,instance:r,className:o,style:l,tableBodyClassName:f,tableBodyStyle:i,columns:c,dataSource:u,rowKey:R="key",estimatedRowHeight:a=46,estimatedColumnWidth:d,overscanRows:m=5,overscanColumns:x=3,stickyHeader:v,defaultColumnWidth:p=100,pipeline:T=ce.defaultPipeline,rowClassName:N,onRow:W,getOffsetTop:O,virtualHeader:D=!0}=e,k=pt(r),H=s.useRef(null),I=s.useRef(null),w=s.useRef(null),M=s.useRef(null),j=ne(M,n),L=s.useRef(null),h=s.useCallback(()=>{const E=H.current;if(E!=null)return lt(E)},[]),S=s.useCallback(()=>{if(typeof O=="function")return O();const E=h(),z=H.current;if(z==null||E==null||E===z)return 0;if(pe(E)||Oe(E)){const X=z.getBoundingClientRect().top;return window.scrollY+X}return it(z,E)},[O,h]),{dataSource:y,columns:g,rowKey:C,rowClassName:K,render:F,renderRoot:te,renderContent:ye,renderHeaderWrapper:ge,renderHeaderRoot:ie,renderHeader:ue,renderHeaderRow:ae,renderHeaderCell:we,renderBodyWrapper:de,renderBodyRoot:B,renderBody:A,renderBodyContent:_,renderRow:V,renderCell:Q,onRow:J}=T.use({dataSource:u,rowKey:R,columns:c,estimatedRowHeight:a,headerWrapperRef:I,bodyWrapperRef:w,bodyRootRef:M,bodyRef:L,rootRef:H,getOffsetTop:S,getScroller:h,instance:k}),[q,re]=s.useState(()=>new Map),Se=s.useRef(q),ke=s.useCallback(E=>{const z=new Map(Se.current);E.forEach((X,ee)=>{z.set(ee,X)}),Se.current=z,re(z)},[]),Ke=s.useMemo(()=>({widthList:q,setWidthList:ke}),[q,ke]),{columns:Z}=Mt({estimateSize:d??p,defaultColumnWidth:p,overscan:x,columns:g,bodyWrapper:w,columnWidths:q,disabled:d==null}),Ae=s.useCallback((E,z)=>$(N==null?void 0:N(E,z),K==null?void 0:K(E,z)),[N,K]),Ve=s.useCallback((E,z)=>({...W==null?void 0:W(E,z),...J==null?void 0:J(E,z)}),[J,W]),$e=g.some(E=>G(E.fixed)),qe=g.some(E=>U(E.fixed)),ve=s.useMemo(()=>({columns:g,descriptor:g.map(E=>({key:Y(E),type:"normal",column:E}))}),[g]),Ye=s.useMemo(()=>D?Z:ve,[D,ve,Z]),oe=k.getInternalHooks();oe.implGetCurrentProps(()=>e),oe.implGetDOM(()=>({root:H.current,headerWrapper:I.current,bodyWrapper:w.current,bodyRoot:M.current,body:L.current})),oe.implScrollTo(E=>{var ee;const{left:z,top:X}=E;if(z!=null&&((ee=w.current)==null||ee.scrollTo(E)),X!=null){const se=h();if(se==null){console.error("The scroller DOM is not obtained, and scrolling is not possible.");return}se.scrollTo(E)}}),oe.implScrollValueByColumnKey(E=>{let z=0,X=0;for(const ee of g){const se=Y(ee),He=q.get(se)??0;if(G(ee.fixed)&&(X+=He),se===E)break;z+=He}return z-X}),oe.implScrollToColumn(E=>{k.scrollTo({left:k.getScrollValueByColumnKey(E)})});const Ge=P(b.jsxs(b.Fragment,{children:[b.jsx(vt,{wrapperRef:I,columns:Ye,stickyHeader:v,renderHeaderWrapper:ge,renderHeaderRoot:ie,renderHeader:ue,renderHeaderRow:ae,renderHeaderCell:we}),b.jsx(St,{instance:k,bodyWrapperRef:w,bodyRootRef:j,bodyRef:L,className:f,style:i,columns:Z,rowKey:C,dataSource:y,overscan:m,estimateSize:a,getScroller:h,getOffsetTop:S,rowClassName:Ae,onRow:Ve,renderBodyWrapper:de,renderBodyRoot:B,renderBody:A,renderBodyContent:_,renderRow:V,renderCell:Q})]}),ye,{columns:Z.columns,columnDescriptor:Z.descriptor}),Qe=ne(H,t),Ue=P(b.jsx(Wt,{ref:Qe,className:o,style:l,hasFixedLeftColumn:$e,hasFixedRightColumn:qe,renderRoot:te,bodyScrollContainer:w,children:Ge}),F,{columns:Z.columns,columnDescriptor:Z.descriptor});return b.jsx(je.Provider,{value:Ke,children:b.jsx(et,{columns:g,children:b.jsx(at,{getScroller:h,root:H,children:b.jsx(dt,{children:Ue})})})})}const _t=s.memo(s.forwardRef(It));function jt(){const e=document.createElement("div");e.style.position="absolute",e.style.width="100px",e.style.height="100px",e.style.overflow="scroll",e.style.top="-9999px",document.body.appendChild(e);const t=e.offsetWidth-e.clientWidth,n=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),{width:t,height:n}}const Nt=e=>{const{className:t,style:n,bottom:r,zIndex:o,bodyRef:l}=e,{listen:f,notify:i}=me(),c=s.useRef(null);s.useEffect(()=>{const d=c.current;if(d==null)return;const m="virtual-table-sticky-bottom-scroll",x=()=>{i(m,{scrollLeft:()=>d.scrollLeft,node:d})},v=f(m,p=>{d.scrollLeft=p});return d.addEventListener("scroll",x),()=>{d.removeEventListener("scroll",x),v()}},[f,i]);const[u,R]=s.useState(0);s.useEffect(()=>{const d=l.current;if(d!=null)return Ce(d,({width:m})=>{m!==0&&R(m)})},[l]);const[a]=s.useState(jt);return b.jsx("div",{className:$("virtual-table-sticky-scroll",t),style:{...n,"--virtual-table-sticky-scroll-bottom":Number.isFinite(r)?`${r}px`:r,paddingTop:a.height>0?0:15,marginTop:a.height>0?0:a.height*-1,height:a.height+1,zIndex:o},ref:c,children:b.jsx("div",{className:"virtual-table-sticky-scroll-bar",style:{width:u}})})};function Bt(e,t){const{bodyRootRef:n}=e;return{...e,renderContent(r){return b.jsxs(b.Fragment,{children:[r,b.jsx(Nt,{bodyRef:n,...t})]})}}}const Pt=mt(Bt);export{ze as C,_t as V,mt as a,Ot as b,$ as c,ft as d,Te as e,Le as f,Y as g,Pt as h,Ze as i,Ie as j,Be as k,U as l,G as m,xe as n,Ce as o,me as p,jt as q,ne as r,Dt as u};
