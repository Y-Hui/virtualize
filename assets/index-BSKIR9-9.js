var $e=Object.defineProperty;var Ye=(e,t,n)=>t in e?$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var he=(e,t,n)=>Ye(e,typeof t!="symbol"?t+"":t,n);import{r as o,j as w}from"./index-KleJlpsW.js";function Se(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=Se(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function P(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=Se(e))&&(r&&(r+=" "),r+=t);return r}function xe(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),r=Object.keys(t),s=n.length;if(r.length!==s)return!1;for(let l=0;l<s;l+=1){const a=n[l];if(e[a]!==t[a]||!Object.prototype.hasOwnProperty.call(t,a))return!1}return!0}function ne(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=e.length;if(t.length!==n)return!1;for(let r=0;r<n;r+=1)if(e[r]!==t[r])return!1;return!0}function oe(e,t){if(Object.is(e,t))return!0;if(Array.isArray(e)&&Array.isArray(t))return ne(e,t)?!0:e.length===t.length&&e.findIndex(r=>typeof r=="object"&&r!=null)>-1?e.every((r,s)=>Array.isArray(r)?ne(r,t[s]):typeof r=="object"&&r!=null?xe(r,t[s]):Object.is(r,t[s])):!1;if(e instanceof Map&&t instanceof Map){const n=[...e.keys()],r=[...t.keys()];if(ne(n,r)){const s=[...e.values()],l=[...t.values()];if(oe(s,l))return!0}return!1}return typeof e=="object"&&e!=null?xe(e,t):!1}function be(e){const t=e(),n=o.useRef(t);return oe(t,n.current)||(n.current=t),n.current}function Y(e){return"key"in e?e.key:e.dataIndex}function q(e){return e==="left"}function Q(e){return e==="right"}function ke(e){return q(e)||Q(e)}const ve=o.createContext(null);function pe(){const e=o.useContext(ve);if(e==null)throw new Error("useColumnSizes provider not found");return e}const He=o.createContext(null);function qe(e){const{columns:t,children:n}=e,{widthList:r}=pe(),s=o.useMemo(()=>t.map(y=>({key:Y(y),fixed:y.fixed})),[t]),l=o.useMemo(()=>{let y=0;const b=s.reduce((h,k,C)=>{const{fixed:f,key:S}=k;return q(f)&&(h[C]=y,y+=r.get(S)??0),h},[]);let d=0;const m=s.reduceRight((h,k,C)=>{const{fixed:f,key:S}=k;return Q(f)&&(h[C]=d,d+=r.get(S)??0),h},[]);return s.reduce((h,k,C)=>{const{key:f,fixed:S}=k;return q(S)?(h.set(f,b[C]),h):(Q(S)&&h.set(f,m[C]),h)},new Map)},[s,r]),a=be(()=>s),u=be(()=>l),i=o.useMemo(()=>({size:u,fixed:a}),[a,u]);return w.jsx(He.Provider,{value:i,children:n})}function Ee(){const e=o.useContext(He);if(e==null)throw new Error("useTableSticky provider not found");return e}function O(e,t,n){return typeof t=="function"?t(e,n):e}function Qe(e,t,n){const{render:r}=n,s=t;if("dataIndex"in n){const l=n.dataIndex;return typeof r!="function"?s[l]:r(s[l],t,e)}return(r==null?void 0:r(t,t,e))??null}function Ue(e){const{className:t,style:n,column:r,rowData:s,rowIndex:l,renderCell:a,...u}=e,{align:i,fixed:y,onCell:b}=r,d=Y(r),{size:m}=Ee(),{className:h,style:k,colSpan:C,rowSpan:f,...S}=(b==null?void 0:b(s,l))??{};return C===0||f===0?null:O(w.jsx("td",{...u,...S,colSpan:C,rowSpan:f,className:P("virtual-table-cell",i!=null&&`virtual-table-align-${i}`,ke(y)&&"virtual-table-sticky-cell",t,r.className,h),style:{...n,...k,left:q(y)?m.get(d):void 0,right:Q(y)?m.get(d):void 0},children:Qe(l,s,r)}),a,{column:r})}const Xe=o.memo(Ue),Le=e=>{const{columns:t,onColumnSizesMeasure:n}=e,r=n!=null,s=o.useRef(new Map);return w.jsx("colgroup",{ref:()=>{r&&n(s.current)},children:t.map(l=>{const{key:a}=l;if(l.type==="blank")return w.jsx("col",{className:"blank",style:{width:l.width,color:"#f00"}},a);const{column:u}=l;return w.jsx("col",{ref:i=>{i==null||!r||s.current.set(a,i.offsetWidth)},style:{width:u.width,minWidth:u.minWidth}},a)})})},Ge=/auto|scroll|overlay|hidden/;function Me(e){return e instanceof Node?e.nodeType===1:!1}function Je(e,t=window){let n=e;for(;n!==t&&Me(n);){if(n===document.body)return t;const{overflow:r,overflowY:s,overflowX:l}=window.getComputedStyle(n);if(Ge.test(r+s+l))return n;n=n.parentNode}return e.ownerDocument.defaultView??window}function se(e){return Object.prototype.toString.call(e)==="[object Window]"}function Ve(e){return Object.prototype.toString.call(e)==="[object HTMLDocument]"}function je(e){return Object.prototype.toString.call(e)==="[object HTMLHtmlElement]"}function Re(e){return Ve(e)?e.scrollingElement:Me(e)?e:document.scrollingElement}function Ze(e){const{getScroller:t,root:n}=e,[r,s]=o.useState(0),[l,a]=o.useState(0),[u,i]=o.useState(0),[y,b]=o.useState(0),d=o.useRef(null);return o.useLayoutEffect(()=>{const m=t();if(m==null)return;let h;se(m)?h=document.scrollingElement:h=m,d.current=h;const k=new ResizeObserver(C=>{const{width:f,height:S}=C[0].contentRect;s(f),a(S)});return k.observe(h),()=>{k.disconnect()}},[t]),o.useLayoutEffect(()=>{const m=n.current;if(m==null)return;const h=new ResizeObserver(k=>{const{width:C,height:f}=k[0].contentRect;i(C),b(f)});return h.observe(m),()=>{h.disconnect()}},[n]),{scrollContainerWidth:r,scrollContainerHeight:l,tableWidth:u,tableHeight:y}}const We=o.createContext(null);function et(e){const{getScroller:t,root:n,children:r}=e,{scrollContainerHeight:s,scrollContainerWidth:l,tableHeight:a,tableWidth:u}=Ze({getScroller:t,root:n}),i=o.useMemo(()=>({scrollContainerWidth:l,scrollContainerHeight:s,tableWidth:u,tableHeight:a}),[l,s,u,a]);return w.jsx(We.Provider,{value:i,children:r})}function vt(){const e=o.useContext(We);if(e==null)throw new Error("useContainerSize provider not found");return e}const Ne=o.createContext(null);function tt(e){const{children:t}=e,n=o.useRef(new Map),r=o.useMemo(()=>{const s=new Set;return{listen(l,a){return n.current.set(l,(u,i)=>{a(u,i)}),()=>{n.current.delete(l)}},notify(l,a){if(s.has(l)){s.delete(l);return}const{scrollLeft:u,node:i}=a;let y=window.requestAnimationFrame;y==null&&(y=b=>{b()}),n.current.forEach((b,d)=>{l!==d&&(s.add(d),y(()=>{b(u(),i)}))})}}},[]);return w.jsx(Ne.Provider,{value:r,children:t})}function le(){const e=o.useContext(Ne);if(e==null)throw new Error("useHorizontalScrollContext provider not found");return e}const ze=o.createContext(null);function nt(){const e=o.useContext(ze);if(e==null)throw new Error("useTableRowManager provider not found");return e}function Ce(e){const t=o.useRef(null);return o.useLayoutEffect(()=>{t.current=e}),o.useCallback((...r)=>{var s;return(s=t.current)==null?void 0:s.call(t,...r)},[])}function rt(e){const t={current:null,options:null};return(...n)=>{const r=s=>e(s,...n);return oe(n,t.options)?t.current??r:(t.options=n,t.current=r,r)}}function ot(e){return Array.isArray(e)?e.filter(t=>t!=null&&(typeof t=="function"||typeof t.hook=="function")).map(t=>typeof t=="function"?{priority:100,hook:t}:t):[]}const re=class re{constructor(){he(this,"hooks",[]);this.use=this.use.bind(this)}setHooks(t){this.hooks=t}use(t){if(this.hooks.length===0)return t;const n={current:t},r={render:[],renderRoot:[],renderContent:[],renderHeaderWrapper:[],renderHeaderRoot:[],renderHeader:[],renderHeaderRow:[],renderHeaderCell:[],renderBodyWrapper:[],renderBodyRoot:[],renderBody:[],renderRow:[],renderCell:[]},s=[],l=[],a=this.hooks.slice();return a.sort((u,i)=>u.priority-i.priority),a.map(u=>u.hook).forEach(u=>{const i=u(n.current),{render:y,renderRoot:b,renderContent:d,renderHeaderWrapper:m,renderHeaderRoot:h,renderHeader:k,renderHeaderRow:C,renderHeaderCell:f,renderBodyWrapper:S,renderBodyRoot:M,renderBody:z,renderRow:W,renderCell:_,rowClassName:v,onRow:H,...j}=i;Object.entries(r).forEach(([x,L])=>{const E=i[x];typeof E=="function"&&L.push(E)}),typeof v=="function"&&s.push(v),typeof H=="function"&&l.push(H),n.current=j}),Object.entries(r).forEach(([u,i])=>{i.length>0&&(n.current[u]=(y,b)=>i.reduce((d,m)=>m(d,b),y))}),s.length>0&&(n.current.rowClassName=(u,i)=>P(...s.map(y=>y(u,i)))),l.length>0&&(n.current.onRow=(u,i)=>l.reduce((y,b)=>({...y,...b(u,i)}),{})),n.current}};he(re,"defaultPipeline",new re);let V=re;function Ht(e){const{use:t,pipeline:n}=e,r=o.useMemo(()=>({current:new V}),[]);if(t!=null){const s=ot([...t,...(n==null?void 0:n.hooks)??[]]);if(!ne(r.current.hooks,s)){const l=new V;return l.setHooks(s),r.current=l,l}}return r.current}function me(e,t){let n=-1;for(let r=0;r<e.length;r+=1)t(e[r],r)&&(n=r);return n}function st(e){const{className:t,rowIndex:n,rowData:r,columns:s,onRow:l,renderRow:a,renderCell:u,...i}=e,{updateRowHeight:y}=nt(),{columns:b,descriptor:d}=s,m=me(d,f=>f.type==="blank"?!1:q(f.column.fixed)),h=d.findIndex(f=>f.type==="blank"?!1:Q(f.column.fixed)),{className:k,...C}=(l==null?void 0:l(r,n))??{};return O(w.jsx("tr",{...i,...C,className:P("virtual-table-row",t,k),ref:f=>{f!=null&&y(n,n,f.offsetHeight)},children:d.map((f,S)=>{const{key:M}=f;if(f.type==="blank")return w.jsx("td",{},M);const{column:z}=f;return w.jsx(Xe,{className:P(m===S&&"virtual-table-cell-fix-left-last",h===S&&"virtual-table-cell-fix-right-first"),column:z,rowIndex:n,rowData:r,renderCell:u},M)})}),a,{columns:b,rowIndex:n,rowData:r,columnDescriptor:d})}const lt=o.memo(st);function ct(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function it(...e){return t=>{e.forEach(n=>ct(n,t))}}function J(...e){return o.useCallback(it(...e),e)}function ye(e,t){if(se(e)){const n=()=>{t({width:window.innerWidth,height:window.innerHeight})};return n(),window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}}else{const n=new ResizeObserver(r=>{const s=r[0].contentRect;t({width:s.width,height:s.height})});return n.observe(e),()=>{n.disconnect()}}}function ut(e,t){let n=0,r=e.length-1,s=-1;for(;n<=r;){const l=Math.floor((n+r)/2);e[l].bottom>t?(s=l,r=l-1):n=l+1}if(s!==-1)return e[s]}function at(e){const{getOffsetTop:t,dataSource:n,getScroller:r,estimateSize:s,overscan:l}=e,[a,u]=o.useState(0),[i,y]=o.useState(0),b=o.useMemo(()=>n.slice(a,i),[n,a,i]),d=o.useRef([]);(()=>{const v=n.length;for(let H=0;H<v;H++)d.current[H]==null&&(d.current[H]=s);d.current=d.current.slice(0,v)})();const h=o.useRef([]),k=(v=!1)=>{if(v&&h.current.length>0)return;const{rects:H}=d.current.reduce((j,x,L)=>{const E=j.top+x;return j.rects.push({index:L,top:j.top,height:x,bottom:E}),j.top=E,j},{top:0,rects:[]});h.current=H},C=(v,H)=>{d.current[v]=H},f=o.useRef({index:0,height:s,top:0,bottom:s}),S=o.useRef(0),M=o.useRef(!1);o.useEffect(()=>{const v=r();if(v==null)return;let H=0;const j=()=>{const g=t();let p=0;return se(v)||je(v)?p=window.scrollY:p=Re(v).scrollTop,Math.max(p-g,0)},x=g=>{const p=H;return H=Math.ceil(g/s),{prevCount:p}},L=g=>{const p=ut(h.current,g);p!=null&&(f.current=p,u(Math.max(0,p.index-l)),y(p.index+H+l))},E=g=>{const p=t(),D=Re(g.target),F=Math.max(0,D.scrollTop-p);F>S.current?F>f.current.bottom&&L(F):F<f.current.top&&L(F),S.current=F};let c=0;const R=ye(v,g=>{if(g.height===c||g.height===0)return;c=g.height,x(g.height);const p=j();if(M.current)L(p);else{M.current=!0;let D=0;p>=s&&(D=Math.max(Math.floor(p/s)-1-l,0));const F=D+H+l;u(D),y(F)}});return v.addEventListener("scroll",E),()=>{R(),v.removeEventListener("scroll",E)}},[s,t,r,l]);const z=(v,H)=>d.current.slice(v,H).reduce((j,x)=>j+x,0),W=z(0,a),_=z(i);return{startIndex:a,endIndex:i,rowHeightList:d,updateRowRectList:k,setRowHeight:C,topBlank:W,bottomBlank:_,dataSlice:b}}function dt(e){const{bodyWrapperRef:t,bodyRootRef:n,bodyRef:r,className:s,style:l,dataSource:a,columns:u,rowKey:i,overscan:y,estimateSize:b,getScroller:d,getOffsetTop:m,rowClassName:h,onRow:k,renderBodyWrapper:C,renderBodyRoot:f,renderBody:S,renderRow:M,renderCell:z}=e,{startIndex:W,dataSlice:_,setRowHeight:v,updateRowRectList:H,rowHeightList:j,topBlank:x,bottomBlank:L}=at({getOffsetTop:m,dataSource:a,getScroller:d,estimateSize:b,overscan:y}),E=o.useRef(new Map),c=o.useCallback((T,K,A)=>{const B=E.current.get(T)??new Map;B.set(K,A),E.current.set(T,B)},[]),R=o.useMemo(()=>({updateRowHeight:c,getRowHeightList:()=>j.current}),[j,c]),{columns:g,descriptor:p}=u,D=J(r,T=>{if(T==null||T.offsetHeight===0)return;E.current.forEach((B,U)=>{const ae=[...B.values()].reduce((de,fe)=>de+fe,0);v(U,ae)}),H(),E.current.clear()}),F=O(w.jsx("tbody",{ref:D,children:_.map((T,K)=>{const A=T[i];return w.jsx(lt,{className:P(h==null?void 0:h(T,K)),rowIndex:K+W,rowData:T,columns:u,onRow:k,renderRow:M,renderCell:z},A)})}),S,{columns:g,columnDescriptor:p}),{widthList:I,setWidthList:X}=pe(),ce=o.useCallback(T=>{oe(I,T)||X(new Map(T))},[X,I]),ie=O(w.jsxs("table",{className:P(s,"virtual-table-body"),style:{...l,paddingBottom:L,paddingTop:x},ref:n,children:[w.jsx(Le,{columns:p,onColumnSizesMeasure:ce}),F]}),f,{columns:g,columnDescriptor:p}),{listen:Z,notify:ee}=le(),te=o.useRef(null);o.useEffect(()=>{const T=te.current;if(T==null)return;const K="virtual-table-body",A=()=>{ee(K,{scrollLeft:()=>T.scrollLeft,node:T})},B=Z(K,U=>{T.scrollLeft=U});return T.addEventListener("scroll",A),()=>{T.removeEventListener("scroll",A),B()}},[Z,ee]);const ue=J(te,t);return w.jsx(ze.Provider,{value:R,children:O(w.jsx("div",{ref:ue,className:"virtual-table-body-wrapper",children:ie}),C,{columns:g,columnDescriptor:p})})}const ft=e=>{const{className:t,style:n,wrapperRef:r,columns:s,stickyHeader:l,renderHeaderWrapper:a,renderHeaderRoot:u,renderHeader:i,renderHeaderRow:y,renderHeaderCell:b}=e,{columns:d,descriptor:m}=s,h=d[d.length-1],{widthList:k}=pe(),{size:C}=Ee(),f=me(m,x=>x.type==="blank"?!1:q(x.column.fixed)),S=m.findIndex(x=>x.type==="blank"?!1:Q(x.column.fixed)),{listen:M,notify:z}=le(),W=o.useRef(null);o.useEffect(()=>{const x=W.current;if(x==null)return;const L="virtual-table-header",E=()=>{z(L,{scrollLeft:()=>x.scrollLeft,node:x})},c=M(L,R=>{x.scrollLeft=R});return x.addEventListener("scroll",E),()=>{x.removeEventListener("scroll",E),c()}},[M,z]);const _=O(w.jsx("tr",{children:m.map((x,L)=>{var F;const{key:E}=x;if(x.type==="blank")return w.jsx("th",{"data-blank":!0},E);const{column:c}=x;if(c.colSpan===0)return null;const R=Y(h)===E,{className:g,style:p,...D}=((F=c.onHeaderCell)==null?void 0:F.call(c,c,L))??{};return w.jsx(o.Fragment,{children:O(o.createElement("th",{scope:"col",...D,colSpan:c.colSpan,className:P("virtual-table-header-cell",R&&"no-split",c.align!=null&&`virtual-table-align-${c.align}`,ke(c.fixed)&&"virtual-table-sticky-cell",f===L&&"virtual-table-cell-fix-left-last",S===L&&"virtual-table-cell-fix-right-first",c.className,g),style:{...p,left:q(c.fixed)?C.get(E):void 0,right:Q(c.fixed)?C.get(E):void 0}},c.title),b,{column:c,columns:d,columnWidths:k,columnDescriptor:m})},E)})}),y,{columns:d,columnDescriptor:m}),v=O(w.jsx("thead",{className:"virtual-table-thead",children:_}),i,{columns:d,columnDescriptor:m}),H=O(w.jsxs("table",{style:n,children:[w.jsx(Le,{columns:m}),v]}),u,{columns:d,columnDescriptor:m}),j=J(r,W);return O(w.jsx("div",{ref:j,className:P("virtual-table-header",t,{"virtual-table-header-sticky":l}),style:{top:Number.isFinite(l)?l:void 0},children:H}),a,{columns:d,columnDescriptor:m})};function ht(e,t){let n=0,r=e.length-1,s=-1;for(;n<=r;){const l=Math.floor((n+r)/2);e[l].right>t?(s=l,r=l-1):n=l+1}if(s!==-1)return e[s]}function pt(e){let t=-1;for(let n=e.length-1;n>=0;n--){const r=e[n];if(Q(r.fixed))t=n;else break}return t}function mt(e){return me(e,t=>q(t.fixed))}function yt(e){const{estimateSize:t,overscan:n,columns:r,bodyWrapper:s,columnWidths:l,disabled:a=!1}=e,u=mt(r),i=pt(r),y=u>-1?Y(r[u]):null,b=i>-1?Y(r[i]):null,[d,m]=o.useState(0),[h,k]=o.useState(0),C=o.useMemo(()=>{if(a)return[];let c=0;return r.map((R,g)=>{const p=Y(R),D=l.get(p)??t,F=c+D,I={index:g,width:D,left:c,right:F};return c=F,I})},[r,l,t,a]),f=o.useRef({index:0,width:t,left:0,right:t}),S=Ce(c=>ht(C,c)),M=Ce((c,R)=>{const g=S(c);g!=null&&(f.current=g,m(Math.max(0,g.index-n)),k(g.index+R+n))}),z=o.useRef(0);o.useEffect(()=>{if(a)return;const c=s.current;if(c==null)return;const R=c.offsetWidth;let g=Math.ceil(R/t);const p=()=>{const I=c.scrollLeft;I>z.current?I>f.current.right&&M(I,g):I<f.current.left&&M(I,g),z.current=I};c.addEventListener("scroll",p);let D=0;const F=ye(c,({width:I})=>{if(I===D||I===0)return;D=I;const X=c.scrollLeft;g=Math.ceil(I/t),M(X,g)});return()=>{c.removeEventListener("scroll",p),F()}},[s,t,M,n,S,a]);const W=(c,R)=>C.slice(c,R).reduce((g,p)=>g+p.width,0),_=u>-1?W(0,u+1):0,v=i>-1?W(i):0,H=Math.max(0,W(0,d)-_),j=Math.max(0,W(h)-v),x=o.useMemo(()=>{if(a)return r;const c=[...r.slice(0,u+1),...r.slice(d,h),...r.slice(i)],R=new Set;return c.filter(g=>{const p=Y(g);return R.has(p)?!1:(R.add(p),!0)})},[a,r,d,h,u,i]),L=o.useMemo(()=>x.reduce((c,R,g)=>{const p=Y(R);return p===y?(c.push({type:"normal",key:p,column:R}),c.push({type:"blank",key:"_blank_left",width:H})):y==null&&g===0?(c.push({type:"blank",key:"_blank_left",width:H}),c.push({type:"normal",key:p,column:R})):p===b?(c.push({type:"blank",key:"_blank_right",width:j}),c.push({type:"normal",key:p,column:R})):b==null&&g===x.length-1?(c.push({type:"normal",key:p,column:R}),c.push({type:"blank",key:"_blank_right",width:j})):c.push({type:"normal",key:p,column:R}),c},[]),[x,y,b,H,j]);return{columns:o.useMemo(()=>({columns:x,descriptor:L}),[x,L]),columnSlice:x,lastFixedLeftIndex:u,firstFixedRightIndex:i}}function gt(e,t){const{className:n,style:r,children:s,hasFixedLeftColumn:l,hasFixedRightColumn:a,renderRoot:u,bodyScrollContainer:i}=e,y=o.useRef(null),[b,d]=o.useState(!1),[m,h]=o.useState(!1),{listen:k}=le();o.useEffect(()=>{if(!l&&!a)return;const f=M=>{const{scrollLeft:z,clientWidth:W,scrollWidth:_}=M;l&&d(z!==0),a&&h(!(z+W>=_))},S=i.current;return S!=null&&f(S),k("__root",(M,z)=>{f(z)})},[i,l,a,k]);const C=J(t,y);return O(w.jsx("div",{ref:C,className:P("virtual-table",b&&"virtual-table-has-fix-left",m&&"virtual-table-has-fix-right",n),style:r,children:s}),u,{})}const wt=o.forwardRef(gt);function xt(e,t){const{bodyRootRef:n,className:r,style:s,tableBodyClassName:l,tableBodyStyle:a,columns:u,dataSource:i,rowKey:y="key",estimatedRowHeight:b=46,estimatedColumnWidth:d,overscanRows:m=5,overscanColumns:h=3,stickyHeader:k,pipeline:C=V.defaultPipeline,rowClassName:f,onRow:S,getOffsetTop:M,virtualHeader:z=!0}=e,W=o.useRef(null),_=o.useRef(null),v=o.useRef(null),H=o.useRef(null),j=J(H,n),x=o.useRef(null),L=o.useCallback(()=>{const N=W.current;if(N!=null)return Je(N)},[]),E=o.useCallback(()=>{var $,we;if(typeof M=="function")return M();const N=L();if(N===W.current)return 0;if(se(N)||je(N)){const Ae=(($=W.current)==null?void 0:$.getBoundingClientRect().top)??0;return window.scrollY+Ae}return((we=W.current)==null?void 0:we.offsetTop)??0},[M,L]),{dataSource:c,columns:R,rowKey:g,rowClassName:p,render:D,renderRoot:F,renderContent:I,renderHeaderWrapper:X,renderHeaderRoot:ce,renderHeader:ie,renderHeaderRow:Z,renderHeaderCell:ee,renderBodyWrapper:te,renderBodyRoot:ue,renderBody:T,renderRow:K,renderCell:A,onRow:B}=C.use({dataSource:i,rowKey:y,columns:u,estimatedRowHeight:b,headerWrapperRef:_,bodyWrapperRef:v,bodyRootRef:H,bodyRef:x,rootRef:W,getOffsetTop:E,getScroller:L}),[U,ae]=o.useState(()=>new Map),de=o.useRef(U),fe=N=>{de.current=N,ae(N)},Te=o.useMemo(()=>({widthList:U,setWidthList:fe}),[U]),{columns:G}=yt({estimateSize:d??100,overscan:h,columns:R,bodyWrapper:v,columnWidths:U,disabled:d==null}),Fe=o.useCallback((N,$)=>P(f==null?void 0:f(N,$),p==null?void 0:p(N,$)),[f,p]),Ie=o.useCallback((N,$)=>({...S==null?void 0:S(N,$),...B==null?void 0:B(N,$)}),[B,S]),De=R.some(N=>q(N.fixed)),_e=R.some(N=>Q(N.fixed)),ge=o.useMemo(()=>({columns:R,descriptor:R.map(N=>({key:Y(N),type:"normal",column:N}))}),[R]),Oe=o.useMemo(()=>z?G:ge,[z,ge,G]),Be=O(w.jsxs(w.Fragment,{children:[w.jsx(ft,{wrapperRef:_,columns:Oe,stickyHeader:k,renderHeaderWrapper:X,renderHeaderRoot:ce,renderHeader:ie,renderHeaderRow:Z,renderHeaderCell:ee}),w.jsx(dt,{bodyWrapperRef:v,bodyRootRef:j,bodyRef:x,className:l,style:a,columns:G,rowKey:g,dataSource:c,overscan:m,estimateSize:b,getScroller:L,getOffsetTop:E,rowClassName:Fe,onRow:Ie,renderBodyWrapper:te,renderBodyRoot:ue,renderBody:T,renderRow:K,renderCell:A})]}),I,{columns:G.columns,columnDescriptor:G.descriptor}),Pe=J(W,t),Ke=O(w.jsx(wt,{ref:Pe,className:r,style:s,hasFixedLeftColumn:De,hasFixedRightColumn:_e,renderRoot:F,bodyScrollContainer:v,children:Be}),D,{columns:G.columns,columnDescriptor:G.descriptor});return w.jsx(ve.Provider,{value:Te,children:w.jsx(qe,{columns:R,children:w.jsx(et,{getScroller:L,root:W,children:w.jsx(tt,{children:Ke})})})})}const Et=o.memo(o.forwardRef(xt));function bt(){const e=document.createElement("div");e.style.position="absolute",e.style.width="100px",e.style.height="100px",e.style.overflow="scroll",e.style.top="-9999px",document.body.appendChild(e);const t=e.offsetWidth-e.clientWidth,n=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),{width:t,height:n}}const Rt=e=>{const{className:t,style:n,bottom:r,zIndex:s,bodyRef:l}=e,{listen:a,notify:u}=le(),i=o.useRef(null);o.useEffect(()=>{const m=i.current;if(m==null)return;const h="virtual-table-sticky-bottom-scroll",k=()=>{u(h,{scrollLeft:()=>m.scrollLeft,node:m})},C=a(h,f=>{m.scrollLeft=f});return m.addEventListener("scroll",k),()=>{m.removeEventListener("scroll",k),C()}},[a,u]);const[y,b]=o.useState(0);o.useEffect(()=>{const m=l.current;if(m!=null)return ye(m,({width:h})=>{h!==0&&b(h)})},[l]);const[d]=o.useState(bt);return w.jsx("div",{className:P("virtual-table-sticky-scroll",t),style:{...n,paddingTop:d.height>0?0:12,marginTop:d.height>0?0:d.height*-1,height:d.height,bottom:r,zIndex:s},ref:i,children:w.jsx("div",{className:"virtual-table-sticky-scroll-bar",style:{width:y}})})};function Ct(e,t){const{bodyRootRef:n}=e;return{...e,renderContent(r){return w.jsxs(w.Fragment,{children:[r,w.jsx(Rt,{bodyRef:n,...t})]})}}}const Lt=rt(Ct);export{Le as C,Et as V,rt as a,vt as b,P as c,nt as d,be as e,Ce as f,Y as g,Lt as h,ke as i,le as j,bt as k,Ee as l,q as m,Q as n,ye as o,J as p,Ht as u};
