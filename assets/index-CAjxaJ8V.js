var $e=Object.defineProperty;var Ye=(e,t,n)=>t in e?$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var de=(e,t,n)=>Ye(e,typeof t!="symbol"?t+"":t,n);import{r as o,j as w}from"./index-CbLO7zDj.js";function Se(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=Se(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function A(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=Se(e))&&(r&&(r+=" "),r+=t);return r}function xe(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),r=Object.keys(t),s=n.length;if(r.length!==s)return!1;for(let l=0;l<s;l+=1){const c=n[l];if(e[c]!==t[c]||!Object.prototype.hasOwnProperty.call(t,c))return!1}return!0}function fe(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=e.length;if(t.length!==n)return!1;for(let r=0;r<n;r+=1)if(e[r]!==t[r])return!1;return!0}function Z(e,t){if(Object.is(e,t))return!0;if(Array.isArray(e)&&Array.isArray(t))return fe(e,t)?!0:e.length===t.length&&e.findIndex(r=>typeof r=="object"&&r!=null)>-1?e.every((r,s)=>Array.isArray(r)?fe(r,t[s]):typeof r=="object"&&r!=null?xe(r,t[s]):Object.is(r,t[s])):!1;if(e instanceof Map&&t instanceof Map){const n=Array.from(e.keys()),r=Array.from(t.keys());if(Z(n,r)){const s=Array.from(e.values()),l=Array.from(t.values());if(Z(s,l))return!0}return!1}return typeof e=="object"&&e!=null?xe(e,t):!1}function be(e){const t=e(),n=o.useRef(t);return Z(t,n.current)||(n.current=t),n.current}function $(e){return"key"in e?e.key:e.dataIndex}function Y(e){return e==="left"}function q(e){return e==="right"}function ke(e){return Y(e)||q(e)}const ve=o.createContext(null);function he(){const e=o.useContext(ve);if(e==null)throw new Error("useColumnSizes provider not found");return e}const He=o.createContext(null);function qe(e){const{columns:t,children:n}=e,{widthList:r}=he(),s=o.useMemo(()=>t.map(y=>({key:$(y),fixed:y.fixed})),[t]),l=o.useMemo(()=>{let y=0;const b=s.reduce((h,k,C)=>{const{fixed:f,key:S}=k;return Y(f)&&(h[C]=y,y+=r.get(S)??0),h},[]);let d=0;const m=s.reduceRight((h,k,C)=>{const{fixed:f,key:S}=k;return q(f)&&(h[C]=d,d+=r.get(S)??0),h},[]);return s.reduce((h,k,C)=>{const{key:f,fixed:S}=k;return Y(S)?(h.set(f,b[C]),h):(q(S)&&h.set(f,m[C]),h)},new Map)},[s,r]),c=be(()=>s),u=be(()=>l),a=o.useMemo(()=>({size:u,fixed:c}),[c,u]);return w.jsx(He.Provider,{value:a,children:n})}function Ee(){const e=o.useContext(He);if(e==null)throw new Error("useTableSticky provider not found");return e}function O(e,t,n){return typeof t=="function"?t(e,n):e}function Qe(e,t,n){const{render:r}=n,s=t;if("dataIndex"in n){const l=n.dataIndex;return typeof r!="function"?s[l]:r(s[l],t,e)}return(r==null?void 0:r(t,t,e))??null}function Ue(e){const{className:t,style:n,column:r,rowData:s,rowIndex:l,renderCell:c,...u}=e,{align:a,fixed:y,onCell:b}=r,d=$(r),{size:m}=Ee(),{className:h,style:k,colSpan:C,rowSpan:f,...S}=(b==null?void 0:b(s,l))??{};return C===0||f===0?null:O(w.jsx("td",{...u,...S,colSpan:C,rowSpan:f,className:A("virtual-table-cell",a!=null&&`virtual-table-align-${a}`,ke(y)&&"virtual-table-sticky-cell",t,r.className,h),style:{...n,...k,left:Y(y)?m.get(d):void 0,right:q(y)?m.get(d):void 0},children:Qe(l,s,r)}),c,{column:r})}const Xe=o.memo(Ue),Ge=e=>{const{columns:t,onColumnSizesMeasure:n}=e,r=n!=null,s=o.useRef(new Map),l=o.useRef(new Map);return w.jsx("colgroup",{ref:()=>{if(!r)return;const c=s.current;n(c,l.current),l.current=c,s.current=new Map},children:t.map(c=>{const{key:u}=c;if(c.type==="blank")return w.jsx("col",{className:"blank",style:{width:c.width}},u);const{column:a}=c;return w.jsx("col",{ref:y=>{y==null||!r||s.current.set(u,y.offsetWidth)},style:{width:a.width,minWidth:a.minWidth}},u)})})},Le=o.memo(Ge),Je=/auto|scroll|overlay|hidden/;function Me(e){return e instanceof Node?e.nodeType===1:!1}function Ve(e,t=window){let n=e;for(;n!==t&&Me(n);){if(n===document.body)return t;const{overflow:r,overflowY:s,overflowX:l}=window.getComputedStyle(n);if(Je.test(r+s+l))return n;n=n.parentNode}return e.ownerDocument.defaultView??window}function se(e){return Object.prototype.toString.call(e)==="[object Window]"}function Ze(e){return Object.prototype.toString.call(e)==="[object HTMLDocument]"}function je(e){return Object.prototype.toString.call(e)==="[object HTMLHtmlElement]"}function Re(e){return Ze(e)?e.scrollingElement:Me(e)?e:document.scrollingElement}function et(e){const{getScroller:t,root:n}=e,[r,s]=o.useState(0),[l,c]=o.useState(0),[u,a]=o.useState(0),[y,b]=o.useState(0),d=o.useRef(null);return o.useLayoutEffect(()=>{const m=t();if(m==null)return;let h;se(m)?h=document.scrollingElement:h=m,d.current=h;const k=new ResizeObserver(C=>{const{width:f,height:S}=C[0].contentRect;s(f),c(S)});return k.observe(h),()=>{k.disconnect()}},[t]),o.useLayoutEffect(()=>{const m=n.current;if(m==null)return;const h=new ResizeObserver(k=>{const{width:C,height:f}=k[0].contentRect;a(C),b(f)});return h.observe(m),()=>{h.disconnect()}},[n]),{scrollContainerWidth:r,scrollContainerHeight:l,tableWidth:u,tableHeight:y}}const We=o.createContext(null);function tt(e){const{getScroller:t,root:n,children:r}=e,{scrollContainerHeight:s,scrollContainerWidth:l,tableHeight:c,tableWidth:u}=et({getScroller:t,root:n}),a=o.useMemo(()=>({scrollContainerWidth:l,scrollContainerHeight:s,tableWidth:u,tableHeight:c}),[l,s,u,c]);return w.jsx(We.Provider,{value:a,children:r})}function Ht(){const e=o.useContext(We);if(e==null)throw new Error("useContainerSize provider not found");return e}const Ne=o.createContext(null);function nt(e){const{children:t}=e,n=o.useRef(new Map),r=o.useMemo(()=>{const s=new Set;return{listen(l,c){return n.current.set(l,(u,a)=>{c(u,a)}),()=>{n.current.delete(l)}},notify(l,c){if(s.has(l)){s.delete(l);return}const{scrollLeft:u,node:a}=c;let y=window.requestAnimationFrame;y==null&&(y=b=>{b()}),n.current.forEach((b,d)=>{l!==d&&(s.add(d),y(()=>{b(u(),a)}))})}}},[]);return w.jsx(Ne.Provider,{value:r,children:t})}function le(){const e=o.useContext(Ne);if(e==null)throw new Error("useHorizontalScrollContext provider not found");return e}const ze=o.createContext(null);function rt(){const e=o.useContext(ze);if(e==null)throw new Error("useTableRowManager provider not found");return e}function Ce(e){const t=o.useRef(null);return o.useLayoutEffect(()=>{t.current=e}),o.useCallback((...r)=>{var s;return(s=t.current)==null?void 0:s.call(t,...r)},[])}function ot(e){const t={current:null,options:null};return(...n)=>{const r=s=>e(s,...n);return Z(n,t.options)?t.current??r:(t.options=n,t.current=r,r)}}function st(e){return Array.isArray(e)?e.filter(t=>t!=null&&(typeof t=="function"||typeof t.hook=="function")).map(t=>typeof t=="function"?{priority:100,hook:t}:t):[]}const oe=class oe{constructor(){de(this,"hooks",[]);this.use=this.use.bind(this)}setHooks(t){this.hooks=t}use(t){if(this.hooks.length===0)return t;const n={current:t},r={render:[],renderRoot:[],renderContent:[],renderHeaderWrapper:[],renderHeaderRoot:[],renderHeader:[],renderHeaderRow:[],renderHeaderCell:[],renderBodyWrapper:[],renderBodyRoot:[],renderBody:[],renderRow:[],renderCell:[]},s=[],l=[],c=this.hooks.slice();return c.sort((u,a)=>u.priority-a.priority),c.map(u=>u.hook).forEach(u=>{const a=u(n.current),{render:y,renderRoot:b,renderContent:d,renderHeaderWrapper:m,renderHeaderRoot:h,renderHeader:k,renderHeaderRow:C,renderHeaderCell:f,renderBodyWrapper:S,renderBodyRoot:M,renderBody:z,renderRow:W,renderCell:_,rowClassName:v,onRow:H,...j}=a;Object.entries(r).forEach(([x,L])=>{const E=a[x];typeof E=="function"&&L.push(E)}),typeof v=="function"&&s.push(v),typeof H=="function"&&l.push(H),n.current=j}),Object.entries(r).forEach(([u,a])=>{a.length>0&&(n.current[u]=(y,b)=>a.reduce((d,m)=>m(d,b),y))}),s.length>0&&(n.current.rowClassName=(u,a)=>A(...s.map(y=>y(u,a)))),l.length>0&&(n.current.onRow=(u,a)=>l.reduce((y,b)=>({...y,...b(u,a)}),{})),n.current}};de(oe,"defaultPipeline",new oe);let ee=oe;function Et(e){const{use:t,pipeline:n}=e,r=o.useMemo(()=>({current:new ee}),[]);if(t!=null){const s=st([...t,...(n==null?void 0:n.hooks)??[]]);if(!fe(r.current.hooks,s)){const l=new ee;return l.setHooks(s),r.current=l,l}}return r.current}function pe(e,t){let n=-1;for(let r=0;r<e.length;r+=1)t(e[r],r)&&(n=r);return n}function lt(e){const{className:t,rowIndex:n,rowData:r,columns:s,onRow:l,renderRow:c,renderCell:u,...a}=e,{updateRowHeight:y}=rt(),{columns:b,descriptor:d}=s,m=pe(d,f=>f.type==="blank"?!1:Y(f.column.fixed)),h=d.findIndex(f=>f.type==="blank"?!1:q(f.column.fixed)),{className:k,...C}=(l==null?void 0:l(r,n))??{};return O(w.jsx("tr",{...a,...C,className:A("virtual-table-row",t,k),ref:f=>{f!=null&&y(n,n,f.offsetHeight)},children:d.map((f,S)=>{const{key:M}=f;if(f.type==="blank")return w.jsx("td",{},M);const{column:z}=f;return w.jsx(Xe,{className:A(m===S&&"virtual-table-cell-fix-left-last",h===S&&"virtual-table-cell-fix-right-first"),column:z,rowIndex:n,rowData:r,renderCell:u},M)})}),c,{columns:b,rowIndex:n,rowData:r,columnDescriptor:d})}const ct=o.memo(lt);function it(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function ut(...e){return t=>{e.forEach(n=>it(n,t))}}function V(...e){return o.useCallback(ut(...e),e)}function me(e,t){if(se(e)){const n=()=>{t({width:window.innerWidth,height:window.innerHeight})};return n(),window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}}else{const n=new ResizeObserver(r=>{const s=r[0].contentRect;t({width:s.width,height:s.height})});return n.observe(e),()=>{n.disconnect()}}}function at(e,t){let n=0,r=e.length-1,s=-1;for(;n<=r;){const l=Math.floor((n+r)/2);e[l].bottom>t?(s=l,r=l-1):n=l+1}if(s!==-1)return e[s]}function dt(e){const{getOffsetTop:t,dataSource:n,getScroller:r,estimateSize:s,overscan:l}=e,[c,u]=o.useState(0),[a,y]=o.useState(0),b=o.useMemo(()=>n.slice(c,a),[n,c,a]),d=o.useRef([]);(()=>{const v=n.length;for(let H=0;H<v;H++)d.current[H]==null&&(d.current[H]=s);d.current=d.current.slice(0,v)})();const h=o.useRef([]),k=(v=!1)=>{if(v&&h.current.length>0)return;const{rects:H}=d.current.reduce((j,x,L)=>{const E=j.top+x;return j.rects.push({index:L,top:j.top,height:x,bottom:E}),j.top=E,j},{top:0,rects:[]});h.current=H},C=(v,H)=>{d.current[v]=H},f=o.useRef({index:0,height:s,top:0,bottom:s}),S=o.useRef(0),M=o.useRef(!1);o.useEffect(()=>{const v=r();if(v==null)return;let H=0;const j=()=>{const g=t();let p=0;return se(v)||je(v)?p=window.scrollY:p=Re(v).scrollTop,Math.max(p-g,0)},x=g=>{const p=H;return H=Math.ceil(g/s),{prevCount:p}},L=g=>{const p=at(h.current,g);p!=null&&(f.current=p,u(Math.max(0,p.index-l)),y(p.index+H+l))},E=g=>{const p=t(),D=Re(g.target),F=Math.max(0,D.scrollTop-p);F>S.current?F>f.current.bottom&&L(F):F<f.current.top&&L(F),S.current=F};let i=0;const R=me(v,g=>{if(g.height===i||g.height===0)return;i=g.height,x(g.height);const p=j();if(M.current)L(p);else{M.current=!0;let D=0;p>=s&&(D=Math.max(Math.floor(p/s)-1-l,0));const F=D+H+l;u(D),y(F)}});return v.addEventListener("scroll",E),()=>{R(),v.removeEventListener("scroll",E)}},[s,t,r,l]);const z=(v,H)=>d.current.slice(v,H).reduce((j,x)=>j+x,0),W=z(0,c),_=z(a);return{startIndex:c,endIndex:a,rowHeightList:d,updateRowRectList:k,setRowHeight:C,topBlank:W,bottomBlank:_,dataSlice:b}}function ft(e){const{bodyWrapperRef:t,bodyRootRef:n,bodyRef:r,className:s,style:l,dataSource:c,columns:u,rowKey:a,overscan:y,estimateSize:b,getScroller:d,getOffsetTop:m,rowClassName:h,onRow:k,renderBodyWrapper:C,renderBodyRoot:f,renderBody:S,renderRow:M,renderCell:z}=e,{startIndex:W,dataSlice:_,setRowHeight:v,updateRowRectList:H,rowHeightList:j,topBlank:x,bottomBlank:L}=dt({getOffsetTop:m,dataSource:c,getScroller:d,estimateSize:b,overscan:y}),E=o.useRef(new Map),i=o.useCallback((T,B,P)=>{const Q=E.current.get(T)??new Map;Q.set(B,P),E.current.set(T,Q)},[]),R=o.useMemo(()=>({updateRowHeight:i,getRowHeightList:()=>j.current}),[j,i]),{columns:g,descriptor:p}=u,D=V(r,T=>{if(T==null||T.offsetHeight===0)return;E.current.forEach((Q,U)=>{const J=Array.from(Q.values()).reduce((ue,ae)=>ue+ae,0);v(U,J)}),H(),E.current.clear()}),F=O(w.jsx("tbody",{ref:D,children:_.map((T,B)=>{const P=T[a];return w.jsx(ct,{className:A(h==null?void 0:h(T,B)),rowIndex:B+W,rowData:T,columns:u,onRow:k,renderRow:M,renderCell:z},P)})}),S,{columns:g,columnDescriptor:p}),{setWidthList:I}=he(),G=o.useCallback((T,B)=>{Z(B,T)||I(T)},[I]),ce=O(w.jsxs("table",{className:A(s,"virtual-table-body"),style:{...l,paddingBottom:L,paddingTop:x},ref:n,children:[w.jsx(Le,{columns:p,onColumnSizesMeasure:G}),F]}),f,{columns:g,columnDescriptor:p}),{listen:te,notify:ne}=le(),re=o.useRef(null);o.useEffect(()=>{const T=re.current;if(T==null)return;const B="virtual-table-body",P=()=>{ne(B,{scrollLeft:()=>T.scrollLeft,node:T})},Q=te(B,U=>{T.scrollLeft=U});return T.addEventListener("scroll",P),()=>{T.removeEventListener("scroll",P),Q()}},[te,ne]);const ie=V(re,t);return w.jsx(ze.Provider,{value:R,children:O(w.jsx("div",{ref:ie,className:"virtual-table-body-wrapper",children:ce}),C,{columns:g,columnDescriptor:p})})}const ht=e=>{const{className:t,style:n,wrapperRef:r,columns:s,stickyHeader:l,renderHeaderWrapper:c,renderHeaderRoot:u,renderHeader:a,renderHeaderRow:y,renderHeaderCell:b}=e,{columns:d,descriptor:m}=s,h=d[d.length-1],{widthList:k}=he(),{size:C}=Ee(),f=pe(m,x=>x.type==="blank"?!1:Y(x.column.fixed)),S=m.findIndex(x=>x.type==="blank"?!1:q(x.column.fixed)),{listen:M,notify:z}=le(),W=o.useRef(null);o.useEffect(()=>{const x=W.current;if(x==null)return;const L="virtual-table-header",E=()=>{z(L,{scrollLeft:()=>x.scrollLeft,node:x})},i=M(L,R=>{x.scrollLeft=R});return x.addEventListener("scroll",E),()=>{x.removeEventListener("scroll",E),i()}},[M,z]);const _=O(w.jsx("tr",{children:m.map((x,L)=>{var F;const{key:E}=x;if(x.type==="blank")return w.jsx("th",{"data-blank":!0},E);const{column:i}=x;if(i.colSpan===0)return null;const R=$(h)===E,{className:g,style:p,...D}=((F=i.onHeaderCell)==null?void 0:F.call(i,i,L))??{};return w.jsx(o.Fragment,{children:O(o.createElement("th",{scope:"col",...D,colSpan:i.colSpan,className:A("virtual-table-header-cell",R&&"no-split",i.align!=null&&`virtual-table-align-${i.align}`,ke(i.fixed)&&"virtual-table-sticky-cell",f===L&&"virtual-table-cell-fix-left-last",S===L&&"virtual-table-cell-fix-right-first",i.className,g),style:{...p,left:Y(i.fixed)?C.get(E):void 0,right:q(i.fixed)?C.get(E):void 0}},i.title),b,{column:i,columns:d,columnWidths:k,columnDescriptor:m})},E)})}),y,{columns:d,columnDescriptor:m}),v=O(w.jsx("thead",{className:"virtual-table-thead",children:_}),a,{columns:d,columnDescriptor:m}),H=O(w.jsxs("table",{style:n,children:[w.jsx(Le,{columns:m}),v]}),u,{columns:d,columnDescriptor:m}),j=V(r,W);return O(w.jsx("div",{ref:j,className:A("virtual-table-header",t,{"virtual-table-header-sticky":l}),style:{top:Number.isFinite(l)?l:void 0},children:H}),c,{columns:d,columnDescriptor:m})};function pt(e,t){let n=0,r=e.length-1,s=-1;for(;n<=r;){const l=Math.floor((n+r)/2);e[l].right>t?(s=l,r=l-1):n=l+1}if(s!==-1)return e[s]}function mt(e){let t=-1;for(let n=e.length-1;n>=0;n--){const r=e[n];if(q(r.fixed))t=n;else break}return t}function yt(e){return pe(e,t=>Y(t.fixed))}function gt(e){const{estimateSize:t,overscan:n,columns:r,bodyWrapper:s,columnWidths:l,disabled:c=!1}=e,u=yt(r),a=mt(r),y=u>-1?$(r[u]):null,b=a>-1?$(r[a]):null,[d,m]=o.useState(0),[h,k]=o.useState(0),C=o.useMemo(()=>{if(c)return[];let i=0;return r.map((R,g)=>{const p=$(R),D=l.get(p)??t,F=i+D,I={index:g,width:D,left:i,right:F};return i=F,I})},[r,l,t,c]),f=o.useRef({index:0,width:t,left:0,right:t}),S=Ce(i=>pt(C,i)),M=Ce((i,R)=>{const g=S(i);g!=null&&(f.current=g,m(Math.max(0,g.index-n)),k(g.index+R+n))}),z=o.useRef(0);o.useEffect(()=>{if(c)return;const i=s.current;if(i==null)return;const R=i.offsetWidth;let g=Math.ceil(R/t);const p=()=>{const I=i.scrollLeft;I>z.current?I>f.current.right&&M(I,g):I<f.current.left&&M(I,g),z.current=I};i.addEventListener("scroll",p);let D=0;const F=me(i,({width:I})=>{if(I===D||I===0)return;D=I;const G=i.scrollLeft;g=Math.ceil(I/t),M(G,g)});return()=>{i.removeEventListener("scroll",p),F()}},[s,t,M,n,S,c]);const W=(i,R)=>C.slice(i,R).reduce((g,p)=>g+p.width,0),_=u>-1?W(0,u+1):0,v=a>-1?W(a):0,H=Math.max(0,W(0,d)-_),j=Math.max(0,W(h)-v),x=o.useMemo(()=>{if(c)return r;const i=[...r.slice(0,u+1),...r.slice(d,h),...r.slice(a)],R=new Set;return i.filter(g=>{const p=$(g);return R.has(p)?!1:(R.add(p),!0)})},[c,r,d,h,u,a]),L=o.useMemo(()=>x.reduce((i,R,g)=>{const p=$(R);return p===y?(i.push({type:"normal",key:p,column:R}),i.push({type:"blank",key:"_blank_left",width:H})):y==null&&g===0?(i.push({type:"blank",key:"_blank_left",width:H}),i.push({type:"normal",key:p,column:R})):p===b?(i.push({type:"blank",key:"_blank_right",width:j}),i.push({type:"normal",key:p,column:R})):b==null&&g===x.length-1?(i.push({type:"normal",key:p,column:R}),i.push({type:"blank",key:"_blank_right",width:j})):i.push({type:"normal",key:p,column:R}),i},[]),[x,y,b,H,j]);return{columns:o.useMemo(()=>({columns:x,descriptor:L}),[x,L]),columnSlice:x,lastFixedLeftIndex:u,firstFixedRightIndex:a}}function wt(e,t){const{className:n,style:r,children:s,hasFixedLeftColumn:l,hasFixedRightColumn:c,renderRoot:u,bodyScrollContainer:a}=e,y=o.useRef(null),[b,d]=o.useState(!1),[m,h]=o.useState(!1),{listen:k}=le();o.useEffect(()=>{if(!l&&!c)return;const f=M=>{const{scrollLeft:z,clientWidth:W,scrollWidth:_}=M;l&&d(z!==0),c&&h(!(z+W>=_))},S=a.current;return S!=null&&f(S),k("__root",(M,z)=>{f(z)})},[a,l,c,k]);const C=V(t,y);return O(w.jsx("div",{ref:C,className:A("virtual-table",b&&"virtual-table-has-fix-left",m&&"virtual-table-has-fix-right",n),style:r,children:s}),u,{})}const xt=o.forwardRef(wt);function bt(e,t){const{bodyRootRef:n,className:r,style:s,tableBodyClassName:l,tableBodyStyle:c,columns:u,dataSource:a,rowKey:y="key",estimatedRowHeight:b=46,estimatedColumnWidth:d,overscanRows:m=5,overscanColumns:h=3,stickyHeader:k,pipeline:C=ee.defaultPipeline,rowClassName:f,onRow:S,getOffsetTop:M,virtualHeader:z=!0}=e,W=o.useRef(null),_=o.useRef(null),v=o.useRef(null),H=o.useRef(null),j=V(H,n),x=o.useRef(null),L=o.useCallback(()=>{const N=W.current;if(N!=null)return Ve(N)},[]),E=o.useCallback(()=>{var K,we;if(typeof M=="function")return M();const N=L();if(N===W.current)return 0;if(se(N)||je(N)){const Ke=((K=W.current)==null?void 0:K.getBoundingClientRect().top)??0;return window.scrollY+Ke}return((we=W.current)==null?void 0:we.offsetTop)??0},[M,L]),{dataSource:i,columns:R,rowKey:g,rowClassName:p,render:D,renderRoot:F,renderContent:I,renderHeaderWrapper:G,renderHeaderRoot:ce,renderHeader:te,renderHeaderRow:ne,renderHeaderCell:re,renderBodyWrapper:ie,renderBodyRoot:T,renderBody:B,renderRow:P,renderCell:Q,onRow:U}=C.use({dataSource:a,rowKey:y,columns:u,estimatedRowHeight:b,headerWrapperRef:_,bodyWrapperRef:v,bodyRootRef:H,bodyRef:x,rootRef:W,getOffsetTop:E,getScroller:L}),[J,ue]=o.useState(()=>new Map),ae=o.useRef(J),ye=o.useCallback(N=>{ae.current=N,ue(N)},[]),Te=o.useMemo(()=>({widthList:J,setWidthList:ye}),[J,ye]),{columns:X}=gt({estimateSize:d??100,overscan:h,columns:R,bodyWrapper:v,columnWidths:J,disabled:d==null}),Fe=o.useCallback((N,K)=>A(f==null?void 0:f(N,K),p==null?void 0:p(N,K)),[f,p]),Ie=o.useCallback((N,K)=>({...S==null?void 0:S(N,K),...U==null?void 0:U(N,K)}),[U,S]),De=R.some(N=>Y(N.fixed)),_e=R.some(N=>q(N.fixed)),ge=o.useMemo(()=>({columns:R,descriptor:R.map(N=>({key:$(N),type:"normal",column:N}))}),[R]),Oe=o.useMemo(()=>z?X:ge,[z,ge,X]),Be=O(w.jsxs(w.Fragment,{children:[w.jsx(ht,{wrapperRef:_,columns:Oe,stickyHeader:k,renderHeaderWrapper:G,renderHeaderRoot:ce,renderHeader:te,renderHeaderRow:ne,renderHeaderCell:re}),w.jsx(ft,{bodyWrapperRef:v,bodyRootRef:j,bodyRef:x,className:l,style:c,columns:X,rowKey:g,dataSource:i,overscan:m,estimateSize:b,getScroller:L,getOffsetTop:E,rowClassName:Fe,onRow:Ie,renderBodyWrapper:ie,renderBodyRoot:T,renderBody:B,renderRow:P,renderCell:Q})]}),I,{columns:X.columns,columnDescriptor:X.descriptor}),Ae=V(W,t),Pe=O(w.jsx(xt,{ref:Ae,className:r,style:s,hasFixedLeftColumn:De,hasFixedRightColumn:_e,renderRoot:F,bodyScrollContainer:v,children:Be}),D,{columns:X.columns,columnDescriptor:X.descriptor});return w.jsx(ve.Provider,{value:Te,children:w.jsx(qe,{columns:R,children:w.jsx(tt,{getScroller:L,root:W,children:w.jsx(nt,{children:Pe})})})})}const Lt=o.memo(o.forwardRef(bt));function Rt(){const e=document.createElement("div");e.style.position="absolute",e.style.width="100px",e.style.height="100px",e.style.overflow="scroll",e.style.top="-9999px",document.body.appendChild(e);const t=e.offsetWidth-e.clientWidth,n=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),{width:t,height:n}}const Ct=e=>{const{className:t,style:n,bottom:r,zIndex:s,bodyRef:l}=e,{listen:c,notify:u}=le(),a=o.useRef(null);o.useEffect(()=>{const m=a.current;if(m==null)return;const h="virtual-table-sticky-bottom-scroll",k=()=>{u(h,{scrollLeft:()=>m.scrollLeft,node:m})},C=c(h,f=>{m.scrollLeft=f});return m.addEventListener("scroll",k),()=>{m.removeEventListener("scroll",k),C()}},[c,u]);const[y,b]=o.useState(0);o.useEffect(()=>{const m=l.current;if(m!=null)return me(m,({width:h})=>{h!==0&&b(h)})},[l]);const[d]=o.useState(Rt);return w.jsx("div",{className:A("virtual-table-sticky-scroll",t),style:{...n,paddingTop:d.height>0?0:12,marginTop:d.height>0?0:d.height*-1,height:d.height,bottom:r,zIndex:s},ref:a,children:w.jsx("div",{className:"virtual-table-sticky-scroll-bar",style:{width:y}})})};function St(e,t){const{bodyRootRef:n}=e;return{...e,renderContent(r){return w.jsxs(w.Fragment,{children:[r,w.jsx(Ct,{bodyRef:n,...t})]})}}}const Mt=ot(St);export{Le as C,Lt as V,ot as a,Ht as b,A as c,rt as d,be as e,Ce as f,$ as g,Mt as h,ke as i,le as j,Rt as k,Ee as l,Y as m,q as n,me as o,V as p,Et as u};
