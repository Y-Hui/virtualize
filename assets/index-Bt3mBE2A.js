var Je=Object.defineProperty;var Ze=(e,t,r)=>t in e?Je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var be=(e,t,r)=>Ze(e,typeof t!="symbol"?t+"":t,r);import{r as s,j as S}from"./index-B4Z_if47.js";function je(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(r=je(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Y(){for(var e,t,r=0,n="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=je(e))&&(n&&(n+=" "),n+=t);return n}function Me(e,t){if(e===t)return!0;if(!e||!t)return!1;const r=Object.keys(e),n=Object.keys(t),o=r.length;if(n.length!==o)return!1;for(let l=0;l<o;l+=1){const f=r[l];if(e[f]!==t[f]||!Object.prototype.hasOwnProperty.call(t,f))return!1}return!0}function Re(e,t){if(e===t)return!0;if(!e||!t)return!1;const r=e.length;if(t.length!==r)return!1;for(let n=0;n<r;n+=1)if(e[n]!==t[n])return!1;return!0}function se(e,t){if(Object.is(e,t))return!0;if(Array.isArray(e)&&Array.isArray(t))return Re(e,t)?!0:e.length===t.length&&e.findIndex(n=>typeof n=="object"&&n!=null)>-1?e.every((n,o)=>Array.isArray(n)?Re(n,t[o]):typeof n=="object"&&n!=null?Me(n,t[o]):Object.is(n,t[o])):!1;if(e instanceof Map&&t instanceof Map){const r=Array.from(e.keys()),n=Array.from(t.keys());if(se(r,n)){const o=Array.from(e.values()),l=Array.from(t.values());if(se(o,l))return!0}return!1}return typeof e=="object"&&e!=null?Me(e,t):!1}function Le(e){const t=e(),r=s.useRef(t);return se(t,r.current)||(r.current=t),r.current}function q(e){return"key"in e?e.key:e.dataIndex}function fe(e,t){return typeof t=="function"?t(e):e[t]}function Q(e){return e==="left"}function U(e){return e==="right"}function Ie(e){return Q(e)||U(e)}const Be=s.createContext(null);function Se(){const e=s.useContext(Be);if(e==null)throw new Error("useColumnSizes provider not found");return e}const Ne=s.createContext(null);function et(e){const{columns:t,children:r}=e,{widthList:n}=Se(),o=s.useMemo(()=>t.map(c=>({key:q(c),fixed:c.fixed})),[t]),l=s.useMemo(()=>{let c=0;const m=o.reduce((y,k,M)=>{const{fixed:x,key:w}=k;return Q(x)&&(y[M]=c,c+=n.get(w)??0),y},[]);let p=0;const i=o.reduceRight((y,k,M)=>{const{fixed:x,key:w}=k;return U(x)&&(y[M]=p,p+=n.get(w)??0),y},[]);return o.reduce((y,k,M)=>{const{key:x,fixed:w}=k;return Q(w)?(y.set(x,m[M]),y):(U(w)&&y.set(x,i[M]),y)},new Map)},[o,n]),f=Le(()=>o),u=Le(()=>l),a=s.useMemo(()=>({size:u,fixed:f}),[f,u]);return S.jsx(Ne.Provider,{value:a,children:r})}function ze(){const e=s.useContext(Ne);if(e==null)throw new Error("useTableSticky provider not found");return e}function A(e,t,r){return typeof t=="function"?t(e,r):e}function tt(e,t,r){const{render:n}=r,o=t;if("dataIndex"in r){const l=r.dataIndex;return typeof n!="function"?o[l]:n(o[l],t,e)}return(n==null?void 0:n(t,t,e))??null}function nt(e){const{className:t,style:r,column:n,rowData:o,rowIndex:l,renderCell:f,...u}=e,{align:a,fixed:c,onCell:m}=n,p=q(n),{size:i}=ze(),{className:y,style:k,colSpan:M,rowSpan:x,...w}=(m==null?void 0:m(o,l))??{};return M===0||x===0?null:A(S.jsx("td",{...u,...w,colSpan:M,rowSpan:x,className:Y("virtual-table-cell",a!=null&&`virtual-table-align-${a}`,Ie(c)&&"virtual-table-sticky-cell",t,n.className,y),style:{...r,...k,left:Q(c)?i.get(p):void 0,right:U(c)?i.get(p):void 0},"data-col-key":p,children:tt(l,o,n)}),f,{column:n})}const rt=s.memo(nt),ot=/auto|scroll|overlay|hidden/;function Fe(e){return e instanceof Node?e.nodeType===1:!1}function st(e,t=window){let r=e;for(;r!==t&&Fe(r);){if(r===document.body)return t;const{overflow:n,overflowY:o,overflowX:l}=window.getComputedStyle(r);if(ot.test(n+o+l))return r;r=r.parentNode}return e.ownerDocument.defaultView??window}function pe(e){return Object.prototype.toString.call(e)==="[object Window]"}function lt(e){return Object.prototype.toString.call(e)==="[object HTMLDocument]"}function De(e){return Object.prototype.toString.call(e)==="[object HTMLHtmlElement]"}function We(e){return lt(e)?e.scrollingElement:Fe(e)?e:document.scrollingElement}function ct(e,t){const r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),o=Number.parseFloat(window.getComputedStyle(t).borderTopWidth)||0,l=t.scrollTop;return r.top-n.top-o+l}function ye(e,t){if(pe(e)){const r=()=>{t({width:window.innerWidth,height:window.innerHeight})};return r(),window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}}else{const r=new ResizeObserver(n=>{const o=n[0].contentRect;t({width:o.width,height:o.height})});return r.observe(e),()=>{r.disconnect()}}}const it=e=>{const{columns:t,onColumnSizesMeasure:r}=e,n=r!=null,o=new Map,l=s.useRef(new Map),f=s.useRef(null);return s.useLayoutEffect(()=>{if(!n)return;const u=f.current;if(u!=null)return ye(u,({width:a})=>{if(a===0)return;const c=new Map;o.forEach((m,p)=>{c.set(p,m())}),se(c,l.current)||(r(c),l.current=c)})}),S.jsx("colgroup",{ref:f,children:t.map(u=>{const{key:a}=u;if(u.type==="blank")return S.jsx("col",{className:"blank",style:{width:u.width}},a);const{column:c}=u;return S.jsx("col",{ref:m=>{m==null||!n||o.set(a,()=>m.offsetWidth)},"data-col-key":a,style:{width:c.width,minWidth:c.minWidth}},a)})})},Oe=s.memo(it);function ut(e){const{getScroller:t,root:r}=e,[n,o]=s.useState(0),[l,f]=s.useState(0),[u,a]=s.useState(0),[c,m]=s.useState(0),p=s.useRef(null);return s.useLayoutEffect(()=>{const i=t();if(i==null)return;let y;pe(i)?y=document.scrollingElement:y=i,p.current=y;const k=new ResizeObserver(M=>{const{width:x,height:w}=M[0].contentRect;o(x),f(w)});return k.observe(y),()=>{k.disconnect()}},[t]),s.useLayoutEffect(()=>{const i=r.current;if(i==null)return;const y=new ResizeObserver(k=>{const{width:M,height:x}=k[0].contentRect;a(M),m(x)});return y.observe(i),()=>{y.disconnect()}},[r]),{scrollContainerWidth:n,scrollContainerHeight:l,tableWidth:u,tableHeight:c}}const Ke=s.createContext(null);function at(e){const{getScroller:t,root:r,children:n}=e,{scrollContainerHeight:o,scrollContainerWidth:l,tableHeight:f,tableWidth:u}=ut({getScroller:t,root:r}),a=s.useMemo(()=>({scrollContainerWidth:l,scrollContainerHeight:o,tableWidth:u,tableHeight:f}),[l,o,u,f]);return S.jsx(Ke.Provider,{value:a,children:n})}function Ft(){const e=s.useContext(Ke);if(e==null)throw new Error("useContainerSize provider not found");return e}const _e=s.createContext(null);function dt(e){const{children:t}=e,r=s.useRef(new Map),n=s.useMemo(()=>{const o=new Set;return{listen(l,f){return r.current.set(l,(u,a)=>{f(u,a)}),()=>{r.current.delete(l)}},notify(l,f){if(o.has(l)){o.delete(l);return}const{scrollLeft:u,node:a}=f;let c=window.requestAnimationFrame;c==null&&(c=m=>{m()}),r.current.forEach((m,p)=>{l!==p&&(o.add(p),c(()=>{m(u(),a)}))})}}},[]);return S.jsx(_e.Provider,{value:n,children:t})}function me(){const e=s.useContext(_e);if(e==null)throw new Error("useHorizontalScrollContext provider not found");return e}const Pe=s.createContext(null);function Dt(){const e=s.useContext(Pe);if(e==null)throw new Error("useTableRowManager provider not found");return e}function ft(e,t){let r=0,n=e.length-1,o=-1;for(;r<=n;){const l=Math.floor((r+n)/2);e[l].bottom>t?(o=l,n=l-1):r=l+1}if(o!==-1)return e[o]}const Ce="NormalRow";function ht(e){const{getOffsetTop:t,rowKey:r,dataSource:n,getScroller:o,estimateSize:l,overscan:f}=e,[u,a]=s.useState(0),[c,m]=s.useState(0),p=s.useMemo(()=>n.slice(u,c),[n,u,c]),i=s.useRef(new Map),y=s.useCallback((h,b,g)=>{const d=i.current.get(h)??new Map;d.set(b,g),i.current.set(h,d)},[]),k=()=>{const h=[];return n.forEach(b=>{const g=fe(b,r),d=i.current.get(g);if(d==null)h.push(l);else{let T=0;d.forEach(v=>T+=v),h.push(T)}}),h};(()=>{if(n.length===0){i.current.clear();return}n.forEach(h=>{const b=fe(h,r),g=i.current.get(b)??new Map;g.get(Ce)==null&&g.set(Ce,l),i.current.set(b,g)})})();const x=s.useRef();(x.current==null||n.length!==x.current.length)&&(x.current=k());const w=s.useRef([]),N=()=>{const{rects:h}=n.reduce((b,g,d)=>{var L;const T=fe(g,r);let v=0;(L=i.current.get(T))==null||L.forEach(W=>{v+=W});const R=b.top+v;return b.rects.push({index:d,top:b.top,height:v,bottom:R}),b.top=R,b},{top:0,rects:[]});w.current=h},I=h=>{h==null||h(),N(),x.current=w.current.map(b=>b.height)},F=s.useRef({index:0,height:l,top:0,bottom:l}),O=s.useRef(0),B=s.useRef(!1);s.useEffect(()=>{const h=o();if(h==null)return;let b=0;const g=()=>{const W=t();let H=0;return pe(h)||De(h)?H=window.scrollY:H=We(h).scrollTop,Math.max(H-W,0)},d=W=>{const H=b;return b=Math.ceil(W/l),{prevCount:H}},T=W=>{const H=ft(w.current,W);H!=null&&(F.current=H,a(Math.max(0,H.index-f)),m(H.index+b+f))},v=W=>{const H=t(),$=We(W.target),V=Math.max(0,$.scrollTop-H);V>O.current?V>F.current.bottom&&T(V):V<F.current.top&&T(V),O.current=V};let R=0;const L=ye(h,W=>{if(W.height===R||W.height===0)return;R=W.height,d(W.height);const H=g();if(B.current)T(H);else{B.current=!0;let $=0;H>=l&&($=Math.max(Math.floor(H/l)-1-f,0));const V=$+b+f;a($),m(V)}});return h.addEventListener("scroll",v),()=>{L(),h.removeEventListener("scroll",v)}},[l,t,o,f]);const D=(h,b)=>x.current.slice(h,b).reduce((g,d)=>g+d,0),K=D(0,u),E=D(c);return{startIndex:u,endIndex:c,rowHeightList:x,flushLayout:I,rowHeightByRowKey:i,setRowHeightByRowKey:y,topBlank:K,bottomBlank:E,dataSlice:p}}function Te(e){const t=s.useRef(null);return s.useLayoutEffect(()=>{t.current=e}),s.useCallback((...n)=>{var o;return(o=t.current)==null?void 0:o.call(t,...n)},[])}class pt{constructor(){this.getInstance=this.getInstance.bind(this)}getInstance(){const r={...["getCurrentProps","getColumns","getDataSource","getDOM","getRowHeightMap","getRowVirtualizeState","getScrollValueByRowIndex","getScrollValueByColumnKey","scrollToRow","scrollToColumn","scrollTo","getColumnByKey","getColumnByIndex","getColumnKeyByIndex","getColumnWidths","getColumnWidthByKey"].reduce((n,o)=>(n[o]=()=>{throw new Error(`${o}() has not been implemented yet`)},n),{}),extend:n=>{Object.keys(n).forEach(o=>{r[o]=n[o]})}};return r}}function yt(e){const[t]=s.useState(()=>e??new pt().getInstance());return t}function mt(e){const t={current:null,options:null};return(...r)=>{const n=o=>e(o,...r);return se(r,t.options)?t.current??n:(t.options=r,t.current=n,n)}}function gt(e){return Array.isArray(e)?e.filter(t=>t!=null&&(typeof t=="function"||typeof t.hook=="function")).map(t=>typeof t=="function"?{priority:100,hook:t}:t):[]}const he=class he{constructor(){be(this,"hooks",[]);this.use=this.use.bind(this)}setHooks(t){this.hooks=t}use(t){if(this.hooks.length===0)return t;const r={current:t},n={render:[],renderRoot:[],renderContent:[],renderHeaderWrapper:[],renderHeaderRoot:[],renderHeader:[],renderHeaderRow:[],renderHeaderCell:[],renderBodyWrapper:[],renderBodyRoot:[],renderBody:[],renderBodyContent:[],renderRow:[],renderCell:[]},o=[],l=[],f=this.hooks.slice();return f.sort((u,a)=>u.priority-a.priority),f.map(u=>u.hook).forEach(u=>{const a=u(r.current),{render:c,renderRoot:m,renderContent:p,renderHeaderWrapper:i,renderHeaderRoot:y,renderHeader:k,renderHeaderRow:M,renderHeaderCell:x,renderBodyWrapper:w,renderBodyRoot:N,renderBody:I,renderBodyContent:F,renderRow:O,renderCell:B,rowClassName:D,onRow:K,...E}=a;Object.entries(n).forEach(([h,b])=>{const g=a[h];typeof g=="function"&&b.push(g)}),typeof D=="function"&&o.push(D),typeof K=="function"&&l.push(K),r.current=E}),Object.entries(n).forEach(([u,a])=>{a.length>0&&(r.current[u]=(c,m)=>a.reduce((p,i)=>i(p,m),c))}),o.length>0&&(r.current.rowClassName=(u,a)=>Y(...o.map(c=>c(u,a)))),l.length>0&&(r.current.onRow=(u,a)=>l.reduce((c,m)=>({...c,...m(u,a)}),{})),r.current}};be(he,"defaultPipeline",new he);let le=he;function Ot(e){const{use:t,pipeline:r}=e,n=s.useMemo(()=>({current:new le}),[]);if(t!=null){const o=gt([...t,...(r==null?void 0:r.hooks)??[]]);if(!Re(n.current.hooks,o)){const l=new le;return l.setHooks(o),n.current=l,l}}return n.current}function ke(e,t){let r=-1;for(let n=0;n<e.length;n+=1)t(e[n],n)&&(r=n);return r}function wt(e){const{className:t,rowKey:r,rowIndex:n,rowData:o,columns:l,onRow:f,renderRow:u,renderCell:a,onRefCallback:c,...m}=e,{columns:p,descriptor:i}=l,y=ke(i,w=>w.type==="blank"?!1:Q(w.column.fixed)),k=i.findIndex(w=>w.type==="blank"?!1:U(w.column.fixed)),{className:M,...x}=(f==null?void 0:f(o,n))??{};return A(S.jsx("tr",{...m,...x,className:Y("virtual-table-row",t,M),"data-row-index":n,ref:w=>{c==null||c({node:w,rowKey:r,rowIndex:n,rowData:o})},children:i.map((w,N)=>{const{key:I}=w;if(w.type==="blank")return S.jsx("td",{},I);const{column:F}=w;return S.jsx(rt,{className:Y(y===N&&"virtual-table-cell-fix-left-last",k===N&&"virtual-table-cell-fix-right-first"),column:F,rowIndex:n,rowData:o,renderCell:a},I)})}),u,{columns:p,rowKey:r,rowIndex:n,rowData:o,columnDescriptor:i})}const xt=s.memo(wt);function bt(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function Rt(...e){return t=>{e.forEach(r=>bt(r,t))}}function ne(...e){return s.useCallback(Rt(...e),e)}function Ct(e){const{bodyWrapperRef:t,bodyRootRef:r,bodyRef:n,className:o,style:l,dataSource:f,columns:u,rowKey:a,instance:c,overscan:m,estimateSize:p,getScroller:i,getOffsetTop:y,rowClassName:k,onRow:M,renderBodyWrapper:x,renderBodyRoot:w,renderBody:N,renderBodyContent:I,renderRow:F,renderCell:O}=e,{startIndex:B,endIndex:D,dataSlice:K,rowHeightByRowKey:E,setRowHeightByRowKey:h,flushLayout:b,rowHeightList:g,topBlank:d,bottomBlank:T}=ht({getOffsetTop:y,rowKey:a,dataSource:f,getScroller:i,estimateSize:p,overscan:m});c.extend({getRowVirtualizeState:()=>({startIndex:B,endIndex:D,overscan:m,estimateSize:p}),getRowHeightMap:()=>E.current});const v=ne(n,z=>{z==null||z.offsetHeight===0||b()}),R=s.useCallback(z=>{const{node:_,rowKey:P}=z;_!=null&&h(P,Ce,_.offsetHeight)},[h]),{columns:L,descriptor:W}=u,H=A(K.map((z,_)=>{const P=fe(z,a);return S.jsx(xt,{className:Y(k==null?void 0:k(z,_)),rowKey:P,rowIndex:_+B,rowData:z,columns:u,onRow:M,renderRow:F,renderCell:O,onRefCallback:R},P)}),I,{columns:L,columnDescriptor:W,startRowIndex:B}),$=A(S.jsx("tbody",{ref:v,children:H}),N,{columns:L,columnDescriptor:W,startRowIndex:B}),{setWidthList:V}=Se(),ce=A(S.jsxs("table",{className:Y(o,"virtual-table-body"),style:{...l,paddingBottom:T,paddingTop:d},ref:r,children:[S.jsx(Oe,{columns:W,onColumnSizesMeasure:V}),$]}),w,{columns:L,columnDescriptor:W,startRowIndex:B}),{listen:ie,notify:ue}=me(),ae=s.useRef(null);s.useEffect(()=>{const z=ae.current;if(z==null)return;const _="virtual-table-body",P=()=>{ue(_,{scrollLeft:()=>z.scrollLeft,node:z})},te=ie(_,J=>{z.scrollLeft=J});return z.addEventListener("scroll",P),()=>{z.removeEventListener("scroll",P),te()}},[ie,ue]);const ge=ne(ae,t);c.extend({getScrollValueByRowIndex(z){if(i()==null)return 0;const{stickyHeader:P}=c.getCurrentProps(),{headerWrapper:te}=c.getDOM();let J=0;return P==null||P===!1?J=te==null?0:te.offsetHeight:J=Number.isFinite(P)?P*-1:0,g.current.slice(0,z).reduce((X,xe)=>X+xe,0)+y()+J},scrollToRow(z,_){c.scrollTo({top:c.getScrollValueByRowIndex(z),behavior:_})}});const we=s.useMemo(()=>({setRowHeightByRowKey:h,getRowHeightList:()=>g.current}),[g,h]);return S.jsx(Pe.Provider,{value:we,children:A(S.jsx("div",{ref:ge,className:"virtual-table-body-wrapper",children:ce}),x,{columns:L,columnDescriptor:W,startRowIndex:B})})}const St=e=>{const{className:t,style:r,wrapperRef:n,columns:o,stickyHeader:l,renderHeaderWrapper:f,renderHeaderRoot:u,renderHeader:a,renderHeaderRow:c,renderHeaderCell:m}=e,{columns:p,descriptor:i}=o,y=p[p.length-1],{widthList:k}=Se(),{size:M}=ze(),x=ke(i,E=>E.type==="blank"?!1:Q(E.column.fixed)),w=i.findIndex(E=>E.type==="blank"?!1:U(E.column.fixed)),{listen:N,notify:I}=me(),F=s.useRef(null);s.useEffect(()=>{const E=F.current;if(E==null)return;const h="virtual-table-header",b=()=>{I(h,{scrollLeft:()=>E.scrollLeft,node:E})},g=N(h,d=>{E.scrollLeft=d});return E.addEventListener("scroll",b),()=>{E.removeEventListener("scroll",b),g()}},[N,I]);const O=A(S.jsx("tr",{children:i.map((E,h)=>{var L;const{key:b}=E;if(E.type==="blank")return S.jsx("th",{"data-blank":!0},b);const{column:g}=E;if(g.colSpan===0)return null;const d=q(y)===b,{className:T,style:v,...R}=((L=g.onHeaderCell)==null?void 0:L.call(g,g,h))??{};return S.jsx(s.Fragment,{children:A(s.createElement("th",{scope:"col",...R,colSpan:g.colSpan,className:Y("virtual-table-header-cell",d&&"no-split",g.align!=null&&`virtual-table-align-${g.align}`,Ie(g.fixed)&&"virtual-table-sticky-cell",x===h&&"virtual-table-cell-fix-left-last",w===h&&"virtual-table-cell-fix-right-first",g.className,T),style:{...v,left:Q(g.fixed)?M.get(b):void 0,right:U(g.fixed)?M.get(b):void 0}},g.title),m,{column:g,columns:p,columnWidths:k,columnDescriptor:i})},b)})}),c,{columns:p,columnDescriptor:i}),B=A(S.jsx("thead",{className:"virtual-table-thead",children:O}),a,{columns:p,columnDescriptor:i}),D=A(S.jsxs("table",{style:r,children:[S.jsx(Oe,{columns:i}),B]}),u,{columns:p,columnDescriptor:i}),K=ne(n,F);return A(S.jsx("div",{ref:K,className:Y("virtual-table-header",t,{"virtual-table-header-sticky":l}),style:{top:Number.isFinite(l)?l:void 0},children:D}),f,{columns:p,columnDescriptor:i})},kt=s.memo(St);function vt(e,t){let r=0,n=e.length-1,o=-1;for(;r<=n;){const l=Math.floor((r+n)/2);e[l].right>t?(o=l,n=l-1):r=l+1}if(o!==-1)return e[o]}function Ht(e){let t=-1;for(let r=e.length-1;r>=0;r--){const n=e[r];if(U(n.fixed))t=r;else break}return t}function Et(e){return ke(e,t=>Q(t.fixed))}function Mt(e){const{estimateSize:t,defaultColumnWidth:r,overscan:n,columns:o,bodyWrapper:l,columnWidths:f,disabled:u=!1}=e,a=Et(o),c=Ht(o),m=a>-1?q(o[a]):null,p=c>-1?q(o[c]):null,[i,y]=s.useState(0),[k,M]=s.useState(0),x=s.useMemo(()=>{if(u)return[];let d=0;return o.map((T,v)=>{const R=q(T),L=f.get(R)??t,W=d+L,H={index:v,width:L,left:d,right:W};return d=W,H})},[o,f,t,u]),w=s.useRef({index:0,width:t,left:0,right:t}),N=Te(d=>vt(x,d)),I=Te((d,T)=>{const v=N(d);v!=null&&(w.current=v,y(Math.max(0,v.index-n)),M(v.index+T+n))}),F=s.useRef(0);s.useEffect(()=>{if(u)return;const d=l.current;if(d==null)return;const T=d.offsetWidth;let v=Math.ceil(T/t);const R=()=>{const H=d.scrollLeft;H>F.current?H>w.current.right&&I(H,v):H<w.current.left&&I(H,v),F.current=H};d.addEventListener("scroll",R);let L=0;const W=ye(d,({width:H})=>{if(H===L||H===0)return;L=H;const $=d.scrollLeft;v=Math.ceil(H/t),I($,v)});return()=>{d.removeEventListener("scroll",R),W()}},[l,t,I,n,N,u]);const O=(d,T)=>x.slice(d,T).reduce((v,R)=>v+R.width,0),B=a>-1?O(0,a+1):0,D=c>-1?O(c):0,K=Math.max(0,O(0,i)-B),E=Math.max(0,O(k)-D),h=s.useMemo(()=>{if(u)return o;const d=[...o.slice(0,a+1),...o.slice(i,k),...o.slice(c)],T=new Set;return d.filter(v=>{const R=q(v);return T.has(R)?!1:(T.add(R),!0)})},[u,o,i,k,a,c]),b=s.useMemo(()=>h.reduce((d,T,v)=>{const R=q(T);let L=T;return L.width==null&&L.minWidth==null&&(L={...L,width:r}),R===m?(d.push({type:"normal",key:R,column:L}),d.push({type:"blank",key:"_blank_left",width:K})):m==null&&v===0?(d.push({type:"blank",key:"_blank_left",width:K}),d.push({type:"normal",key:R,column:L})):R===p?(d.push({type:"blank",key:"_blank_right",width:E}),d.push({type:"normal",key:R,column:L})):p==null&&v===h.length-1?(d.push({type:"normal",key:R,column:L}),d.push({type:"blank",key:"_blank_right",width:E})):d.push({type:"normal",key:R,column:L}),d},[]),[h,m,p,K,E,r]);return{columns:s.useMemo(()=>({columns:h,descriptor:b}),[h,b]),columnSlice:h,lastFixedLeftIndex:a,firstFixedRightIndex:c}}function Lt(e,t){const{className:r,style:n,children:o,hasFixedLeftColumn:l,hasFixedRightColumn:f,renderRoot:u,bodyScrollContainer:a}=e,c=s.useRef(null),[m,p]=s.useState(!1),[i,y]=s.useState(!1),{listen:k}=me();s.useEffect(()=>{if(!l&&!f)return;const x=N=>{const{scrollLeft:I,clientWidth:F,scrollWidth:O}=N;l&&p(I!==0),f&&y(!(I+F>=O))},w=a.current;return w!=null&&x(w),k("__root",(N,I)=>{x(I)})},[a,l,f,k]);const M=ne(t,c);return A(S.jsx("div",{ref:M,className:Y("virtual-table",m&&"virtual-table-has-fix-left",i&&"virtual-table-has-fix-right",r),style:n,children:o}),u,{})}const Wt=s.forwardRef(Lt);function Tt(e,t){const{bodyRootRef:r,instance:n,className:o,style:l,tableBodyClassName:f,tableBodyStyle:u,columns:a,dataSource:c,rowKey:m="key",estimatedRowHeight:p=46,estimatedColumnWidth:i,overscanRows:y=5,overscanColumns:k=3,stickyHeader:M,defaultColumnWidth:x=100,pipeline:w=le.defaultPipeline,rowClassName:N,onRow:I,getOffsetTop:F,virtualHeader:O=!0}=e,B=yt(n);B.extend({getCurrentProps:()=>e});const D=s.useRef(null),K=s.useRef(null),E=s.useRef(null),h=s.useRef(null),b=ne(h,r),g=s.useRef(null),d=s.useCallback(()=>{const C=D.current;if(C!=null)return st(C)},[]),T=s.useCallback(()=>{if(typeof F=="function")return F();const C=d(),j=D.current;if(j==null||C==null||C===j)return 0;if(pe(C)||De(C)){const G=j.getBoundingClientRect().top;return window.scrollY+G}return ct(j,C)},[F,d]),{dataSource:v,columns:R,rowKey:L,rowClassName:W,render:H,renderRoot:$,renderContent:V,renderHeaderWrapper:ce,renderHeaderRoot:ie,renderHeader:ue,renderHeaderRow:ae,renderHeaderCell:ge,renderBodyWrapper:we,renderBodyRoot:z,renderBody:_,renderBodyContent:P,renderRow:te,renderCell:J,onRow:re}=w.use({dataSource:c,rowKey:m,columns:a,estimatedRowHeight:p,headerWrapperRef:K,bodyWrapperRef:E,bodyRootRef:h,bodyRef:g,rootRef:D,getOffsetTop:T,getScroller:d,instance:B});B.extend({getColumns:()=>R,getDataSource:()=>v});const[X,xe]=s.useState(()=>new Map),de=s.useRef(X),ve=s.useCallback(C=>{const j=new Map(de.current);C.forEach((G,ee)=>{j.set(ee,G)}),de.current=j,xe(j)},[]);B.extend({getColumnWidths:()=>de.current,getColumnWidthByKey:C=>de.current.get(C)});const Ae=s.useMemo(()=>({widthList:X,setWidthList:ve}),[X,ve]),{columns:Z}=Mt({estimateSize:i??x,defaultColumnWidth:x,overscan:k,columns:R,bodyWrapper:E,columnWidths:X,disabled:i==null}),$e=s.useCallback((C,j)=>Y(N==null?void 0:N(C,j),W==null?void 0:W(C,j)),[N,W]),Ve=s.useCallback((C,j)=>({...I==null?void 0:I(C,j),...re==null?void 0:re(C,j)}),[re,I]),qe=R.some(C=>Q(C.fixed)),Ye=R.some(C=>U(C.fixed)),He=s.useMemo(()=>({columns:R,descriptor:R.map(C=>({key:q(C),type:"normal",column:C}))}),[R]),Qe=s.useMemo(()=>O?Z:He,[O,He,Z]);B.extend({getDOM:()=>({root:D.current,headerWrapper:K.current,bodyWrapper:E.current,bodyRoot:h.current,body:g.current}),scrollTo:C=>{var ee;const{left:j,top:G}=C;if(j!=null&&((ee=E.current)==null||ee.scrollTo(C)),G!=null){const oe=d();if(oe==null){console.error("The scroller DOM is not obtained, and scrolling is not possible.");return}oe.scrollTo(C)}},getScrollValueByColumnKey:C=>{let j=0,G=0;for(const ee of R){const oe=q(ee),Ee=X.get(oe)??0;if(Q(ee.fixed)&&(G+=Ee),oe===C)break;j+=Ee}return j-G},scrollToColumn:(C,j)=>{B.scrollTo({left:B.getScrollValueByColumnKey(C),behavior:j})},getColumnByKey:C=>R.find(j=>q(j)===C),getColumnByIndex:C=>R[C],getColumnKeyByIndex:C=>{const j=B.getColumnByIndex(C);if(j!=null)return q(j)}});const Ue=A(S.jsxs(S.Fragment,{children:[S.jsx(kt,{wrapperRef:K,columns:Qe,stickyHeader:M,renderHeaderWrapper:ce,renderHeaderRoot:ie,renderHeader:ue,renderHeaderRow:ae,renderHeaderCell:ge}),S.jsx(Ct,{instance:B,bodyWrapperRef:E,bodyRootRef:b,bodyRef:g,className:f,style:u,columns:Z,rowKey:L,dataSource:v,overscan:y,estimateSize:p,getScroller:d,getOffsetTop:T,rowClassName:$e,onRow:Ve,renderBodyWrapper:we,renderBodyRoot:z,renderBody:_,renderBodyContent:P,renderRow:te,renderCell:J})]}),V,{columns:Z.columns,columnDescriptor:Z.descriptor}),Xe=ne(D,t),Ge=A(S.jsx(Wt,{ref:Xe,className:o,style:l,hasFixedLeftColumn:qe,hasFixedRightColumn:Ye,renderRoot:$,bodyScrollContainer:E,children:Ue}),H,{columns:Z.columns,columnDescriptor:Z.descriptor});return S.jsx(Be.Provider,{value:Ae,children:S.jsx(et,{columns:R,children:S.jsx(at,{getScroller:d,root:D,children:S.jsx(dt,{children:Ge})})})})}const Kt=s.memo(s.forwardRef(Tt));function jt(){const e=document.createElement("div");e.style.position="absolute",e.style.width="100px",e.style.height="100px",e.style.overflow="scroll",e.style.top="-9999px",document.body.appendChild(e);const t=e.offsetWidth-e.clientWidth,r=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),{width:t,height:r}}const It=e=>{const{className:t,style:r,bottom:n,zIndex:o,bodyRef:l}=e,{listen:f,notify:u}=me(),a=s.useRef(null);s.useEffect(()=>{const i=a.current;if(i==null)return;const y="virtual-table-sticky-bottom-scroll",k=()=>{u(y,{scrollLeft:()=>i.scrollLeft,node:i})},M=f(y,x=>{i.scrollLeft=x});return i.addEventListener("scroll",k),()=>{i.removeEventListener("scroll",k),M()}},[f,u]);const[c,m]=s.useState(0);s.useEffect(()=>{const i=l.current;if(i!=null)return ye(i,({width:y})=>{y!==0&&m(y)})},[l]);const[p]=s.useState(jt);return S.jsx("div",{className:Y("virtual-table-sticky-scroll",t),style:{...r,"--virtual-table-sticky-scroll-bottom":Number.isFinite(n)?`${n}px`:n,paddingTop:p.height>0?0:15,marginTop:p.height>0?0:p.height*-1,height:p.height+1,zIndex:o},ref:a,children:S.jsx("div",{className:"virtual-table-sticky-scroll-bar",style:{width:c}})})};function Bt(e,t){const{bodyRootRef:r}=e;return{...e,renderContent(n){return S.jsxs(S.Fragment,{children:[n,S.jsx(It,{bodyRef:r,...t})]})}}}const _t=mt(Bt);export{Oe as C,Kt as V,yt as a,mt as b,Y as c,Ft as d,Dt as e,Le as f,q as g,_t as h,Te as i,Ie as j,fe as k,ze as l,U as m,Q as n,ke as o,ye as p,me as q,jt as r,ne as s,Ot as u};
