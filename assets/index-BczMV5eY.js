import{r as p,j as c,C as x}from"./index-CbLO7zDj.js";import{c as I,a as z,u as O,h as w,V as A}from"./index-CAjxaJ8V.js";import{t as L}from"./table-selection-BX3nK1Mw.js";import{t as V,c as F,a as $,b as D,d as H}from"./index-DHgKrO4T.js";import{P as K,F as S,C as j,D as M}from"./Table-m0-TehCA.js";import{a as U,R as W,E as P}from"./index-B4q5Yk4T.js";const B=t=>{const{position:r,className:u,defaultCurrent:i=1,defaultPageSize:a=10,onChange:e,current:n,pageSize:b,...o}=t,E=((r==null?void 0:r[0])??"bottomRight").toLowerCase().replace(/top|bottom/,""),l="current"in t,s="pageSize"in t,[m,C]=p.useState(i),[d,f]=p.useState(a),N=l?n:m,h=l?b:d,T=(y,k)=>{l||C(y),s||f(k),e==null||e(y,k)};return c.jsx(K,{showSizeChanger:!0,...o,current:N,pageSize:h,className:I("virtual-table-pagination",`virtual-table-pagination-${E}`,u),onChange:T})},G=p.memo(B);function Y(t,r){if(r===!1)return t;const{position:u=["bottomRight"],...i}=r??{},a=u[0];return a==="none"?t:{...t,render(e){const n=p.createElement(G,{...i,key:"__pagination__"});return a.includes("top")?c.jsxs(c.Fragment,{children:[n,e]}):c.jsxs(c.Fragment,{children:[e,n]})}}}const q=z(Y),R=[S.SELECTION_ALL,S.SELECTION_INVERT,S.SELECTION_NONE];function J(t){const{checked:r,onChange:u,indeterminate:i,selections:a,onClear:e,onSelectAll:n,onSelectInvert:b,allKeys:o,disabled:g}=t,{locale:E}=p.useContext(x.ConfigContext),l=E==null?void 0:E.Table,s={[S.SELECTION_ALL]:{key:S.SELECTION_ALL,label:l==null?void 0:l.selectAll,onClick:n},[S.SELECTION_INVERT]:{key:S.SELECTION_INVERT,label:l==null?void 0:l.selectInvert,onClick:b},[S.SELECTION_NONE]:{key:S.SELECTION_NONE,label:l==null?void 0:l.selectNone,onClick:e}},m=a===!0?R:Array.isArray(a)?a:void 0;return c.jsxs("div",{className:I("virtual-table-selection"),children:[c.jsx(j,{checked:r,indeterminate:i,disabled:g,onChange:u}),m&&c.jsx("div",{className:"virtual-table-selection-extra",children:c.jsx(M,{menu:{items:m.reduce((C,d)=>(typeof d=="string"?R.includes(d)&&C.push(s[d]):"key"in d&&C.push({key:d.key,label:d.text,onClick:()=>{var f;(f=d.onSelect)==null||f.call(d,o)}}),C),[])},children:c.jsx(U,{})})})]})}function Q(t){if(t==null)return L();const{type:r,selections:u,columnWidth:i,columnTitle:a,...e}=t,n=r==="checkbox";return L({...e,component:X,multiple:n,columnWidth:i??(u==null||!n?32:48),columnTitle:u!=null?(b,o)=>{if(a!=null){if(p.isValidElement(a))return a;if(typeof a=="function")return a(b,o)}return n?c.jsx(J,{checked:o.value,indeterminate:o.indeterminate,disabled:o.disabled,onChange:g=>{var E;(E=o.onChange)==null||E.call(o,g.target.checked,g.nativeEvent)},onSelectAll:o.onSelectAll,onSelectInvert:o.onSelectInvert,onClear:o.onClear,allKeys:o.allKeys,selections:u}):null}:void 0})}function X(t){const{multiple:r,value:u,onChange:i,indeterminate:a,disabled:e}=t;return r?c.jsx(j,{checked:u,indeterminate:a,disabled:e,onChange:n=>i==null?void 0:i(n.target.checked,n.nativeEvent)}):c.jsx(W,{checked:u,disabled:e,onChange:n=>i==null?void 0:i(n.target.checked,n.nativeEvent)})}function Z(t,r){if(typeof r=="number"&&Number.isFinite(r))return r;switch(t){case"small":return 39;case"large":return 65;case"middle":default:return 57}}const ee={disableResize:!0};function ne(t,r){const{className:u,size:i="middle",estimatedRowHeight:a,sticky:e,rowSelection:n,loading:b,bordered:o,pipeline:g,expandable:E,summary:l,pagination:s,onChange:m,storageKey:C,...d}=t,f=p.useRef({});p.useEffect(()=>{s!=null&&typeof s=="object"&&(f.current={...s,current:f.current.current??s.current,pageSize:f.current.pageSize??s.pageSize})},[s]);const N=p.useCallback(()=>{m==null||m(f.current)},[m]),h=s===!1||s==null?void 0:s.onChange,T=p.useCallback((v,_)=>{h==null||h(v,_),f.current={...f.current,current:v,pageSize:_},N()},[N,h]),y=O({pipeline:g,use:[Q(n==null?void 0:{...n,extraColumnProps:ee}),V(E),F(C==null?void 0:{storageKey:C}),q(s===!1?!1:{...s,onChange:T}),{priority:200,hook:$({loading:b})},{priority:200,hook:D({children:c.jsx(P,{image:P.PRESENTED_IMAGE_SIMPLE})})},{priority:200,hook:H(l==null?void 0:{summary:l})},{priority:200,hook:w()}]}),k=Z(i,a);return c.jsx(A,{...d,pipeline:y,className:I(`virtual-table-${i}`,o&&"virtual-table-bordered",u),ref:r,estimatedRowHeight:k,stickyHeader:typeof e=="boolean"?e:e==null?void 0:e.offsetHeader})}const se=p.forwardRef(ne);export{se as V};
