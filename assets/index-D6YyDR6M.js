var Je=Object.defineProperty;var Ze=(e,t,r)=>t in e?Je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var xe=(e,t,r)=>Ze(e,typeof t!="symbol"?t+"":t,r);import{r as s,j as C}from"./index-CGWxZbOx.js";function je(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(r=je(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Y(){for(var e,t,r=0,n="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=je(e))&&(n&&(n+=" "),n+=t);return n}function Me(e,t){if(e===t)return!0;if(!e||!t)return!1;const r=Object.keys(e),n=Object.keys(t),o=r.length;if(n.length!==o)return!1;for(let l=0;l<o;l+=1){const f=r[l];if(e[f]!==t[f]||!Object.prototype.hasOwnProperty.call(t,f))return!1}return!0}function be(e,t){if(e===t)return!0;if(!e||!t)return!1;const r=e.length;if(t.length!==r)return!1;for(let n=0;n<r;n+=1)if(e[n]!==t[n])return!1;return!0}function se(e,t){if(Object.is(e,t))return!0;if(Array.isArray(e)&&Array.isArray(t))return be(e,t)?!0:e.length===t.length&&e.findIndex(n=>typeof n=="object"&&n!=null)>-1?e.every((n,o)=>Array.isArray(n)?be(n,t[o]):typeof n=="object"&&n!=null?Me(n,t[o]):Object.is(n,t[o])):!1;if(e instanceof Map&&t instanceof Map){const r=Array.from(e.keys()),n=Array.from(t.keys());if(se(r,n)){const o=Array.from(e.values()),l=Array.from(t.values());if(se(o,l))return!0}return!1}return typeof e=="object"&&e!=null?Me(e,t):!1}function Le(e){const t=e(),r=s.useRef(t);return se(t,r.current)||(r.current=t),r.current}function q(e){return"key"in e?e.key:e.dataIndex}function fe(e,t){return typeof t=="function"?t(e):e[t]}function Q(e){return e==="left"}function U(e){return e==="right"}function Ie(e){return Q(e)||U(e)}const Be=s.createContext(null);function Ce(){const e=s.useContext(Be);if(e==null)throw new Error("useColumnSizes provider not found");return e}const Ne=s.createContext(null);function et(e){const{columns:t,children:r}=e,{widthList:n}=Ce(),o=s.useMemo(()=>t.map(i=>({key:q(i),fixed:i.fixed})),[t]),l=s.useMemo(()=>{let i=0;const S=o.reduce((m,k,M)=>{const{fixed:w,key:g}=k;return Q(w)&&(m[M]=i,i+=n.get(g)??0),m},[]);let p=0;const c=o.reduceRight((m,k,M)=>{const{fixed:w,key:g}=k;return U(w)&&(m[M]=p,p+=n.get(g)??0),m},[]);return o.reduce((m,k,M)=>{const{key:w,fixed:g}=k;return Q(g)?(m.set(w,S[M]),m):(U(g)&&m.set(w,c[M]),m)},new Map)},[o,n]),f=Le(()=>o),a=Le(()=>l),d=s.useMemo(()=>({size:a,fixed:f}),[f,a]);return C.jsx(Ne.Provider,{value:d,children:r})}function ze(){const e=s.useContext(Ne);if(e==null)throw new Error("useTableSticky provider not found");return e}function A(e,t,r){return typeof t=="function"?t(e,r):e}function tt(e,t,r){const{render:n}=r,o=t;if("dataIndex"in r){const l=r.dataIndex;return typeof n!="function"?o[l]:n(o[l],t,e)}return(n==null?void 0:n(t,t,e))??null}function nt(e){const{className:t,style:r,column:n,rowData:o,rowIndex:l,renderCell:f,...a}=e,{align:d,fixed:i,onCell:S}=n,p=q(n),{size:c}=ze(),{className:m,style:k,colSpan:M,rowSpan:w,...g}=(S==null?void 0:S(o,l))??{};return M===0||w===0?null:A(C.jsx("td",{...a,...g,colSpan:M,rowSpan:w,className:Y("virtual-table-cell",d!=null&&`virtual-table-align-${d}`,Ie(i)&&"virtual-table-sticky-cell",t,n.className,m),style:{...r,...k,left:Q(i)?c.get(p):void 0,right:U(i)?c.get(p):void 0},"data-col-key":p,children:tt(l,o,n)}),f,{column:n})}const rt=s.memo(nt),ot=e=>{const{columns:t,onColumnSizesMeasure:r}=e,n=r!=null,o=new Map,l=s.useRef(new Map);return C.jsx("colgroup",{ref:()=>{n&&(se(o,l.current)||(r(o),l.current=o))},children:t.map(f=>{const{key:a}=f;if(f.type==="blank")return C.jsx("col",{className:"blank",style:{width:f.width}},a);const{column:d}=f;return C.jsx("col",{ref:i=>{i==null||!n||o.set(a,i.offsetWidth)},style:{width:d.width,minWidth:d.minWidth}},a)})})},Fe=s.memo(ot),st=/auto|scroll|overlay|hidden/;function De(e){return e instanceof Node?e.nodeType===1:!1}function lt(e,t=window){let r=e;for(;r!==t&&De(r);){if(r===document.body)return t;const{overflow:n,overflowY:o,overflowX:l}=window.getComputedStyle(r);if(st.test(n+o+l))return r;r=r.parentNode}return e.ownerDocument.defaultView??window}function pe(e){return Object.prototype.toString.call(e)==="[object Window]"}function ct(e){return Object.prototype.toString.call(e)==="[object HTMLDocument]"}function Oe(e){return Object.prototype.toString.call(e)==="[object HTMLHtmlElement]"}function We(e){return ct(e)?e.scrollingElement:De(e)?e:document.scrollingElement}function it(e,t){const r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),o=Number.parseFloat(window.getComputedStyle(t).borderTopWidth)||0,l=t.scrollTop;return r.top-n.top-o+l}function ut(e){const{getScroller:t,root:r}=e,[n,o]=s.useState(0),[l,f]=s.useState(0),[a,d]=s.useState(0),[i,S]=s.useState(0),p=s.useRef(null);return s.useLayoutEffect(()=>{const c=t();if(c==null)return;let m;pe(c)?m=document.scrollingElement:m=c,p.current=m;const k=new ResizeObserver(M=>{const{width:w,height:g}=M[0].contentRect;o(w),f(g)});return k.observe(m),()=>{k.disconnect()}},[t]),s.useLayoutEffect(()=>{const c=r.current;if(c==null)return;const m=new ResizeObserver(k=>{const{width:M,height:w}=k[0].contentRect;d(M),S(w)});return m.observe(c),()=>{m.disconnect()}},[r]),{scrollContainerWidth:n,scrollContainerHeight:l,tableWidth:a,tableHeight:i}}const Ke=s.createContext(null);function at(e){const{getScroller:t,root:r,children:n}=e,{scrollContainerHeight:o,scrollContainerWidth:l,tableHeight:f,tableWidth:a}=ut({getScroller:t,root:r}),d=s.useMemo(()=>({scrollContainerWidth:l,scrollContainerHeight:o,tableWidth:a,tableHeight:f}),[l,o,a,f]);return C.jsx(Ke.Provider,{value:d,children:n})}function Ft(){const e=s.useContext(Ke);if(e==null)throw new Error("useContainerSize provider not found");return e}const _e=s.createContext(null);function dt(e){const{children:t}=e,r=s.useRef(new Map),n=s.useMemo(()=>{const o=new Set;return{listen(l,f){return r.current.set(l,(a,d)=>{f(a,d)}),()=>{r.current.delete(l)}},notify(l,f){if(o.has(l)){o.delete(l);return}const{scrollLeft:a,node:d}=f;let i=window.requestAnimationFrame;i==null&&(i=S=>{S()}),r.current.forEach((S,p)=>{l!==p&&(o.add(p),i(()=>{S(a(),d)}))})}}},[]);return C.jsx(_e.Provider,{value:n,children:t})}function me(){const e=s.useContext(_e);if(e==null)throw new Error("useHorizontalScrollContext provider not found");return e}const Pe=s.createContext(null);function Dt(){const e=s.useContext(Pe);if(e==null)throw new Error("useTableRowManager provider not found");return e}function Se(e,t){if(pe(e)){const r=()=>{t({width:window.innerWidth,height:window.innerHeight})};return r(),window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}}else{const r=new ResizeObserver(n=>{const o=n[0].contentRect;t({width:o.width,height:o.height})});return r.observe(e),()=>{r.disconnect()}}}function ft(e,t){let r=0,n=e.length-1,o=-1;for(;r<=n;){const l=Math.floor((r+n)/2);e[l].bottom>t?(o=l,n=l-1):r=l+1}if(o!==-1)return e[o]}const Re="NormalRow";function ht(e){const{getOffsetTop:t,rowKey:r,dataSource:n,getScroller:o,estimateSize:l,overscan:f}=e,[a,d]=s.useState(0),[i,S]=s.useState(0),p=s.useMemo(()=>n.slice(a,i),[n,a,i]),c=s.useRef(new Map),m=s.useCallback((h,x,y)=>{const u=c.current.get(h)??new Map;u.set(x,y),c.current.set(h,u)},[]),k=()=>{const h=[];return n.forEach(x=>{const y=fe(x,r),u=c.current.get(y);if(u==null)h.push(l);else{let T=0;u.forEach(v=>T+=v),h.push(T)}}),h};(()=>{if(n.length===0){c.current.clear();return}n.forEach(h=>{const x=fe(h,r),y=c.current.get(x)??new Map;y.get(Re)==null&&y.set(Re,l),c.current.set(x,y)})})();const w=s.useRef();(w.current==null||n.length!==w.current.length)&&(w.current=k());const g=s.useRef([]),N=()=>{const{rects:h}=n.reduce((x,y,u)=>{var L;const T=fe(y,r);let v=0;(L=c.current.get(T))==null||L.forEach(W=>{v+=W});const b=x.top+v;return x.rects.push({index:u,top:x.top,height:v,bottom:b}),x.top=b,x},{top:0,rects:[]});g.current=h},I=h=>{h==null||h(),N(),w.current=g.current.map(x=>x.height)},F=s.useRef({index:0,height:l,top:0,bottom:l}),O=s.useRef(0),B=s.useRef(!1);s.useEffect(()=>{const h=o();if(h==null)return;let x=0;const y=()=>{const W=t();let H=0;return pe(h)||Oe(h)?H=window.scrollY:H=We(h).scrollTop,Math.max(H-W,0)},u=W=>{const H=x;return x=Math.ceil(W/l),{prevCount:H}},T=W=>{const H=ft(g.current,W);H!=null&&(F.current=H,d(Math.max(0,H.index-f)),S(H.index+x+f))},v=W=>{const H=t(),$=We(W.target),V=Math.max(0,$.scrollTop-H);V>O.current?V>F.current.bottom&&T(V):V<F.current.top&&T(V),O.current=V};let b=0;const L=Se(h,W=>{if(W.height===b||W.height===0)return;b=W.height,u(W.height);const H=y();if(B.current)T(H);else{B.current=!0;let $=0;H>=l&&($=Math.max(Math.floor(H/l)-1-f,0));const V=$+x+f;d($),S(V)}});return h.addEventListener("scroll",v),()=>{L(),h.removeEventListener("scroll",v)}},[l,t,o,f]);const D=(h,x)=>w.current.slice(h,x).reduce((y,u)=>y+u,0),K=D(0,a),E=D(i);return{startIndex:a,endIndex:i,rowHeightList:w,flushLayout:I,rowHeightByRowKey:c,setRowHeightByRowKey:m,topBlank:K,bottomBlank:E,dataSlice:p}}function Te(e){const t=s.useRef(null);return s.useLayoutEffect(()=>{t.current=e}),s.useCallback((...n)=>{var o;return(o=t.current)==null?void 0:o.call(t,...n)},[])}class pt{constructor(){this.getInstance=this.getInstance.bind(this)}getInstance(){const r={...["getCurrentProps","getColumns","getDataSource","getDOM","getRowHeightMap","getRowVirtualizeState","getScrollValueByRowIndex","getScrollValueByColumnKey","scrollToRow","scrollToColumn","scrollTo","getColumnByKey","getColumnByIndex","getColumnKeyByIndex","getColumnWidths","getColumnWidthByKey"].reduce((n,o)=>(n[o]=()=>{throw new Error(`${o}() has not been implemented yet`)},n),{}),extend:n=>{Object.keys(n).forEach(o=>{r[o]=n[o]})}};return r}}function mt(e){const[t]=s.useState(()=>e??new pt().getInstance());return t}function yt(e){const t={current:null,options:null};return(...r)=>{const n=o=>e(o,...r);return se(r,t.options)?t.current??n:(t.options=r,t.current=n,n)}}function gt(e){return Array.isArray(e)?e.filter(t=>t!=null&&(typeof t=="function"||typeof t.hook=="function")).map(t=>typeof t=="function"?{priority:100,hook:t}:t):[]}const he=class he{constructor(){xe(this,"hooks",[]);this.use=this.use.bind(this)}setHooks(t){this.hooks=t}use(t){if(this.hooks.length===0)return t;const r={current:t},n={render:[],renderRoot:[],renderContent:[],renderHeaderWrapper:[],renderHeaderRoot:[],renderHeader:[],renderHeaderRow:[],renderHeaderCell:[],renderBodyWrapper:[],renderBodyRoot:[],renderBody:[],renderBodyContent:[],renderRow:[],renderCell:[]},o=[],l=[],f=this.hooks.slice();return f.sort((a,d)=>a.priority-d.priority),f.map(a=>a.hook).forEach(a=>{const d=a(r.current),{render:i,renderRoot:S,renderContent:p,renderHeaderWrapper:c,renderHeaderRoot:m,renderHeader:k,renderHeaderRow:M,renderHeaderCell:w,renderBodyWrapper:g,renderBodyRoot:N,renderBody:I,renderBodyContent:F,renderRow:O,renderCell:B,rowClassName:D,onRow:K,...E}=d;Object.entries(n).forEach(([h,x])=>{const y=d[h];typeof y=="function"&&x.push(y)}),typeof D=="function"&&o.push(D),typeof K=="function"&&l.push(K),r.current=E}),Object.entries(n).forEach(([a,d])=>{d.length>0&&(r.current[a]=(i,S)=>d.reduce((p,c)=>c(p,S),i))}),o.length>0&&(r.current.rowClassName=(a,d)=>Y(...o.map(i=>i(a,d)))),l.length>0&&(r.current.onRow=(a,d)=>l.reduce((i,S)=>({...i,...S(a,d)}),{})),r.current}};xe(he,"defaultPipeline",new he);let le=he;function Ot(e){const{use:t,pipeline:r}=e,n=s.useMemo(()=>({current:new le}),[]);if(t!=null){const o=gt([...t,...(r==null?void 0:r.hooks)??[]]);if(!be(n.current.hooks,o)){const l=new le;return l.setHooks(o),n.current=l,l}}return n.current}function ke(e,t){let r=-1;for(let n=0;n<e.length;n+=1)t(e[n],n)&&(r=n);return r}function wt(e){const{className:t,rowKey:r,rowIndex:n,rowData:o,columns:l,onRow:f,renderRow:a,renderCell:d,onRefCallback:i,...S}=e,{columns:p,descriptor:c}=l,m=ke(c,g=>g.type==="blank"?!1:Q(g.column.fixed)),k=c.findIndex(g=>g.type==="blank"?!1:U(g.column.fixed)),{className:M,...w}=(f==null?void 0:f(o,n))??{};return A(C.jsx("tr",{...S,...w,className:Y("virtual-table-row",t,M),"data-row-index":n,ref:g=>{i==null||i({node:g,rowKey:r,rowIndex:n,rowData:o})},children:c.map((g,N)=>{const{key:I}=g;if(g.type==="blank")return C.jsx("td",{},I);const{column:F}=g;return C.jsx(rt,{className:Y(m===N&&"virtual-table-cell-fix-left-last",k===N&&"virtual-table-cell-fix-right-first"),column:F,rowIndex:n,rowData:o,renderCell:d},I)})}),a,{columns:p,rowKey:r,rowIndex:n,rowData:o,columnDescriptor:c})}const xt=s.memo(wt);function bt(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function Rt(...e){return t=>{e.forEach(r=>bt(r,t))}}function ne(...e){return s.useCallback(Rt(...e),e)}function Ct(e){const{bodyWrapperRef:t,bodyRootRef:r,bodyRef:n,className:o,style:l,dataSource:f,columns:a,rowKey:d,instance:i,overscan:S,estimateSize:p,getScroller:c,getOffsetTop:m,rowClassName:k,onRow:M,renderBodyWrapper:w,renderBodyRoot:g,renderBody:N,renderBodyContent:I,renderRow:F,renderCell:O}=e,{startIndex:B,endIndex:D,dataSlice:K,rowHeightByRowKey:E,setRowHeightByRowKey:h,flushLayout:x,rowHeightList:y,topBlank:u,bottomBlank:T}=ht({getOffsetTop:m,rowKey:d,dataSource:f,getScroller:c,estimateSize:p,overscan:S});i.extend({getRowVirtualizeState:()=>({startIndex:B,endIndex:D,overscan:S,estimateSize:p}),getRowHeightMap:()=>E.current});const v=ne(n,z=>{z==null||z.offsetHeight===0||x()}),b=s.useCallback(z=>{const{node:_,rowKey:P}=z;_!=null&&h(P,Re,_.offsetHeight)},[h]),{columns:L,descriptor:W}=a,H=A(K.map((z,_)=>{const P=fe(z,d);return C.jsx(xt,{className:Y(k==null?void 0:k(z,_)),rowKey:P,rowIndex:_+B,rowData:z,columns:a,onRow:M,renderRow:F,renderCell:O,onRefCallback:b},P)}),I,{columns:L,columnDescriptor:W,startRowIndex:B}),$=A(C.jsx("tbody",{ref:v,children:H}),N,{columns:L,columnDescriptor:W,startRowIndex:B}),{setWidthList:V}=Ce(),ce=A(C.jsxs("table",{className:Y(o,"virtual-table-body"),style:{...l,paddingBottom:T,paddingTop:u},ref:r,children:[C.jsx(Fe,{columns:W,onColumnSizesMeasure:V}),$]}),g,{columns:L,columnDescriptor:W,startRowIndex:B}),{listen:ie,notify:ue}=me(),ae=s.useRef(null);s.useEffect(()=>{const z=ae.current;if(z==null)return;const _="virtual-table-body",P=()=>{ue(_,{scrollLeft:()=>z.scrollLeft,node:z})},te=ie(_,J=>{z.scrollLeft=J});return z.addEventListener("scroll",P),()=>{z.removeEventListener("scroll",P),te()}},[ie,ue]);const ye=ne(ae,t);i.extend({getScrollValueByRowIndex(z){if(c()==null)return 0;const{stickyHeader:P}=i.getCurrentProps(),{headerWrapper:te}=i.getDOM();let J=0;return P==null||P===!1?J=te==null?0:te.offsetHeight:J=Number.isFinite(P)?P*-1:0,y.current.slice(0,z).reduce((X,we)=>X+we,0)+m()+J},scrollToRow(z,_){i.scrollTo({top:i.getScrollValueByRowIndex(z),behavior:_})}});const ge=s.useMemo(()=>({setRowHeightByRowKey:h,getRowHeightList:()=>y.current}),[y,h]);return C.jsx(Pe.Provider,{value:ge,children:A(C.jsx("div",{ref:ye,className:"virtual-table-body-wrapper",children:ce}),w,{columns:L,columnDescriptor:W,startRowIndex:B})})}const St=e=>{const{className:t,style:r,wrapperRef:n,columns:o,stickyHeader:l,renderHeaderWrapper:f,renderHeaderRoot:a,renderHeader:d,renderHeaderRow:i,renderHeaderCell:S}=e,{columns:p,descriptor:c}=o,m=p[p.length-1],{widthList:k}=Ce(),{size:M}=ze(),w=ke(c,E=>E.type==="blank"?!1:Q(E.column.fixed)),g=c.findIndex(E=>E.type==="blank"?!1:U(E.column.fixed)),{listen:N,notify:I}=me(),F=s.useRef(null);s.useEffect(()=>{const E=F.current;if(E==null)return;const h="virtual-table-header",x=()=>{I(h,{scrollLeft:()=>E.scrollLeft,node:E})},y=N(h,u=>{E.scrollLeft=u});return E.addEventListener("scroll",x),()=>{E.removeEventListener("scroll",x),y()}},[N,I]);const O=A(C.jsx("tr",{children:c.map((E,h)=>{var L;const{key:x}=E;if(E.type==="blank")return C.jsx("th",{"data-blank":!0},x);const{column:y}=E;if(y.colSpan===0)return null;const u=q(m)===x,{className:T,style:v,...b}=((L=y.onHeaderCell)==null?void 0:L.call(y,y,h))??{};return C.jsx(s.Fragment,{children:A(s.createElement("th",{scope:"col",...b,colSpan:y.colSpan,className:Y("virtual-table-header-cell",u&&"no-split",y.align!=null&&`virtual-table-align-${y.align}`,Ie(y.fixed)&&"virtual-table-sticky-cell",w===h&&"virtual-table-cell-fix-left-last",g===h&&"virtual-table-cell-fix-right-first",y.className,T),style:{...v,left:Q(y.fixed)?M.get(x):void 0,right:U(y.fixed)?M.get(x):void 0}},y.title),S,{column:y,columns:p,columnWidths:k,columnDescriptor:c})},x)})}),i,{columns:p,columnDescriptor:c}),B=A(C.jsx("thead",{className:"virtual-table-thead",children:O}),d,{columns:p,columnDescriptor:c}),D=A(C.jsxs("table",{style:r,children:[C.jsx(Fe,{columns:c}),B]}),a,{columns:p,columnDescriptor:c}),K=ne(n,F);return A(C.jsx("div",{ref:K,className:Y("virtual-table-header",t,{"virtual-table-header-sticky":l}),style:{top:Number.isFinite(l)?l:void 0},children:D}),f,{columns:p,columnDescriptor:c})},kt=s.memo(St);function vt(e,t){let r=0,n=e.length-1,o=-1;for(;r<=n;){const l=Math.floor((r+n)/2);e[l].right>t?(o=l,n=l-1):r=l+1}if(o!==-1)return e[o]}function Ht(e){let t=-1;for(let r=e.length-1;r>=0;r--){const n=e[r];if(U(n.fixed))t=r;else break}return t}function Et(e){return ke(e,t=>Q(t.fixed))}function Mt(e){const{estimateSize:t,defaultColumnWidth:r,overscan:n,columns:o,bodyWrapper:l,columnWidths:f,disabled:a=!1}=e,d=Et(o),i=Ht(o),S=d>-1?q(o[d]):null,p=i>-1?q(o[i]):null,[c,m]=s.useState(0),[k,M]=s.useState(0),w=s.useMemo(()=>{if(a)return[];let u=0;return o.map((T,v)=>{const b=q(T),L=f.get(b)??t,W=u+L,H={index:v,width:L,left:u,right:W};return u=W,H})},[o,f,t,a]),g=s.useRef({index:0,width:t,left:0,right:t}),N=Te(u=>vt(w,u)),I=Te((u,T)=>{const v=N(u);v!=null&&(g.current=v,m(Math.max(0,v.index-n)),M(v.index+T+n))}),F=s.useRef(0);s.useEffect(()=>{if(a)return;const u=l.current;if(u==null)return;const T=u.offsetWidth;let v=Math.ceil(T/t);const b=()=>{const H=u.scrollLeft;H>F.current?H>g.current.right&&I(H,v):H<g.current.left&&I(H,v),F.current=H};u.addEventListener("scroll",b);let L=0;const W=Se(u,({width:H})=>{if(H===L||H===0)return;L=H;const $=u.scrollLeft;v=Math.ceil(H/t),I($,v)});return()=>{u.removeEventListener("scroll",b),W()}},[l,t,I,n,N,a]);const O=(u,T)=>w.slice(u,T).reduce((v,b)=>v+b.width,0),B=d>-1?O(0,d+1):0,D=i>-1?O(i):0,K=Math.max(0,O(0,c)-B),E=Math.max(0,O(k)-D),h=s.useMemo(()=>{if(a)return o;const u=[...o.slice(0,d+1),...o.slice(c,k),...o.slice(i)],T=new Set;return u.filter(v=>{const b=q(v);return T.has(b)?!1:(T.add(b),!0)})},[a,o,c,k,d,i]),x=s.useMemo(()=>h.reduce((u,T,v)=>{const b=q(T);let L=T;return L.width==null&&L.minWidth==null&&(L={...L,width:r}),b===S?(u.push({type:"normal",key:b,column:L}),u.push({type:"blank",key:"_blank_left",width:K})):S==null&&v===0?(u.push({type:"blank",key:"_blank_left",width:K}),u.push({type:"normal",key:b,column:L})):b===p?(u.push({type:"blank",key:"_blank_right",width:E}),u.push({type:"normal",key:b,column:L})):p==null&&v===h.length-1?(u.push({type:"normal",key:b,column:L}),u.push({type:"blank",key:"_blank_right",width:E})):u.push({type:"normal",key:b,column:L}),u},[]),[h,S,p,K,E,r]);return{columns:s.useMemo(()=>({columns:h,descriptor:x}),[h,x]),columnSlice:h,lastFixedLeftIndex:d,firstFixedRightIndex:i}}function Lt(e,t){const{className:r,style:n,children:o,hasFixedLeftColumn:l,hasFixedRightColumn:f,renderRoot:a,bodyScrollContainer:d}=e,i=s.useRef(null),[S,p]=s.useState(!1),[c,m]=s.useState(!1),{listen:k}=me();s.useEffect(()=>{if(!l&&!f)return;const w=N=>{const{scrollLeft:I,clientWidth:F,scrollWidth:O}=N;l&&p(I!==0),f&&m(!(I+F>=O))},g=d.current;return g!=null&&w(g),k("__root",(N,I)=>{w(I)})},[d,l,f,k]);const M=ne(t,i);return A(C.jsx("div",{ref:M,className:Y("virtual-table",S&&"virtual-table-has-fix-left",c&&"virtual-table-has-fix-right",r),style:n,children:o}),a,{})}const Wt=s.forwardRef(Lt);function Tt(e,t){const{bodyRootRef:r,instance:n,className:o,style:l,tableBodyClassName:f,tableBodyStyle:a,columns:d,dataSource:i,rowKey:S="key",estimatedRowHeight:p=46,estimatedColumnWidth:c,overscanRows:m=5,overscanColumns:k=3,stickyHeader:M,defaultColumnWidth:w=100,pipeline:g=le.defaultPipeline,rowClassName:N,onRow:I,getOffsetTop:F,virtualHeader:O=!0}=e,B=mt(n);B.extend({getCurrentProps:()=>e});const D=s.useRef(null),K=s.useRef(null),E=s.useRef(null),h=s.useRef(null),x=ne(h,r),y=s.useRef(null),u=s.useCallback(()=>{const R=D.current;if(R!=null)return lt(R)},[]),T=s.useCallback(()=>{if(typeof F=="function")return F();const R=u(),j=D.current;if(j==null||R==null||R===j)return 0;if(pe(R)||Oe(R)){const G=j.getBoundingClientRect().top;return window.scrollY+G}return it(j,R)},[F,u]),{dataSource:v,columns:b,rowKey:L,rowClassName:W,render:H,renderRoot:$,renderContent:V,renderHeaderWrapper:ce,renderHeaderRoot:ie,renderHeader:ue,renderHeaderRow:ae,renderHeaderCell:ye,renderBodyWrapper:ge,renderBodyRoot:z,renderBody:_,renderBodyContent:P,renderRow:te,renderCell:J,onRow:re}=g.use({dataSource:i,rowKey:S,columns:d,estimatedRowHeight:p,headerWrapperRef:K,bodyWrapperRef:E,bodyRootRef:h,bodyRef:y,rootRef:D,getOffsetTop:T,getScroller:u,instance:B});B.extend({getColumns:()=>b,getDataSource:()=>v});const[X,we]=s.useState(()=>new Map),de=s.useRef(X),ve=s.useCallback(R=>{const j=new Map(de.current);R.forEach((G,ee)=>{j.set(ee,G)}),de.current=j,we(j)},[]);B.extend({getColumnWidths:()=>de.current,getColumnWidthByKey:R=>de.current.get(R)});const Ae=s.useMemo(()=>({widthList:X,setWidthList:ve}),[X,ve]),{columns:Z}=Mt({estimateSize:c??w,defaultColumnWidth:w,overscan:k,columns:b,bodyWrapper:E,columnWidths:X,disabled:c==null}),$e=s.useCallback((R,j)=>Y(N==null?void 0:N(R,j),W==null?void 0:W(R,j)),[N,W]),Ve=s.useCallback((R,j)=>({...I==null?void 0:I(R,j),...re==null?void 0:re(R,j)}),[re,I]),qe=b.some(R=>Q(R.fixed)),Ye=b.some(R=>U(R.fixed)),He=s.useMemo(()=>({columns:b,descriptor:b.map(R=>({key:q(R),type:"normal",column:R}))}),[b]),Qe=s.useMemo(()=>O?Z:He,[O,He,Z]);B.extend({getDOM:()=>({root:D.current,headerWrapper:K.current,bodyWrapper:E.current,bodyRoot:h.current,body:y.current}),scrollTo:R=>{var ee;const{left:j,top:G}=R;if(j!=null&&((ee=E.current)==null||ee.scrollTo(R)),G!=null){const oe=u();if(oe==null){console.error("The scroller DOM is not obtained, and scrolling is not possible.");return}oe.scrollTo(R)}},getScrollValueByColumnKey:R=>{let j=0,G=0;for(const ee of b){const oe=q(ee),Ee=X.get(oe)??0;if(Q(ee.fixed)&&(G+=Ee),oe===R)break;j+=Ee}return j-G},scrollToColumn:(R,j)=>{B.scrollTo({left:B.getScrollValueByColumnKey(R),behavior:j})},getColumnByKey:R=>b.find(j=>q(j)===R),getColumnByIndex:R=>b[R],getColumnKeyByIndex:R=>{const j=B.getColumnByIndex(R);if(j!=null)return q(j)}});const Ue=A(C.jsxs(C.Fragment,{children:[C.jsx(kt,{wrapperRef:K,columns:Qe,stickyHeader:M,renderHeaderWrapper:ce,renderHeaderRoot:ie,renderHeader:ue,renderHeaderRow:ae,renderHeaderCell:ye}),C.jsx(Ct,{instance:B,bodyWrapperRef:E,bodyRootRef:x,bodyRef:y,className:f,style:a,columns:Z,rowKey:L,dataSource:v,overscan:m,estimateSize:p,getScroller:u,getOffsetTop:T,rowClassName:$e,onRow:Ve,renderBodyWrapper:ge,renderBodyRoot:z,renderBody:_,renderBodyContent:P,renderRow:te,renderCell:J})]}),V,{columns:Z.columns,columnDescriptor:Z.descriptor}),Xe=ne(D,t),Ge=A(C.jsx(Wt,{ref:Xe,className:o,style:l,hasFixedLeftColumn:qe,hasFixedRightColumn:Ye,renderRoot:$,bodyScrollContainer:E,children:Ue}),H,{columns:Z.columns,columnDescriptor:Z.descriptor});return C.jsx(Be.Provider,{value:Ae,children:C.jsx(et,{columns:b,children:C.jsx(at,{getScroller:u,root:D,children:C.jsx(dt,{children:Ge})})})})}const Kt=s.memo(s.forwardRef(Tt));function jt(){const e=document.createElement("div");e.style.position="absolute",e.style.width="100px",e.style.height="100px",e.style.overflow="scroll",e.style.top="-9999px",document.body.appendChild(e);const t=e.offsetWidth-e.clientWidth,r=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),{width:t,height:r}}const It=e=>{const{className:t,style:r,bottom:n,zIndex:o,bodyRef:l}=e,{listen:f,notify:a}=me(),d=s.useRef(null);s.useEffect(()=>{const c=d.current;if(c==null)return;const m="virtual-table-sticky-bottom-scroll",k=()=>{a(m,{scrollLeft:()=>c.scrollLeft,node:c})},M=f(m,w=>{c.scrollLeft=w});return c.addEventListener("scroll",k),()=>{c.removeEventListener("scroll",k),M()}},[f,a]);const[i,S]=s.useState(0);s.useEffect(()=>{const c=l.current;if(c!=null)return Se(c,({width:m})=>{m!==0&&S(m)})},[l]);const[p]=s.useState(jt);return C.jsx("div",{className:Y("virtual-table-sticky-scroll",t),style:{...r,"--virtual-table-sticky-scroll-bottom":Number.isFinite(n)?`${n}px`:n,paddingTop:p.height>0?0:15,marginTop:p.height>0?0:p.height*-1,height:p.height+1,zIndex:o},ref:d,children:C.jsx("div",{className:"virtual-table-sticky-scroll-bar",style:{width:i}})})};function Bt(e,t){const{bodyRootRef:r}=e;return{...e,renderContent(n){return C.jsxs(C.Fragment,{children:[n,C.jsx(It,{bodyRef:r,...t})]})}}}const _t=yt(Bt);export{Fe as C,Kt as V,mt as a,yt as b,Y as c,Ft as d,Dt as e,Le as f,q as g,_t as h,Te as i,Ie as j,fe as k,ze as l,U as m,Q as n,ke as o,Se as p,me as q,jt as r,ne as s,Ot as u};
