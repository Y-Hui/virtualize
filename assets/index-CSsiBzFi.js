var Ge=Object.defineProperty;var Je=(e,t,r)=>t in e?Ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var we=(e,t,r)=>Je(e,typeof t!="symbol"?t+"":t,r);import{r as s,j as S}from"./index-BQeishnX.js";function Te(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(r=Te(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function q(){for(var e,t,r=0,n="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=Te(e))&&(n&&(n+=" "),n+=t);return n}function Ee(e,t){if(e===t)return!0;if(!e||!t)return!1;const r=Object.keys(e),n=Object.keys(t),o=r.length;if(n.length!==o)return!1;for(let l=0;l<o;l+=1){const y=r[l];if(e[y]!==t[y]||!Object.prototype.hasOwnProperty.call(t,y))return!1}return!0}function xe(e,t){if(e===t)return!0;if(!e||!t)return!1;const r=e.length;if(t.length!==r)return!1;for(let n=0;n<r;n+=1)if(e[n]!==t[n])return!1;return!0}function de(e,t){if(Object.is(e,t))return!0;if(Array.isArray(e)&&Array.isArray(t))return xe(e,t)?!0:e.length===t.length&&e.findIndex(n=>typeof n=="object"&&n!=null)>-1?e.every((n,o)=>Array.isArray(n)?xe(n,t[o]):typeof n=="object"&&n!=null?Ee(n,t[o]):Object.is(n,t[o])):!1;if(e instanceof Map&&t instanceof Map){const r=Array.from(e.keys()),n=Array.from(t.keys());if(de(r,n)){const o=Array.from(e.values()),l=Array.from(t.values());if(de(o,l))return!0}return!1}return typeof e=="object"&&e!=null?Ee(e,t):!1}function be(e){const t=e(),r=s.useRef(t);return de(t,r.current)||(r.current=t),r.current}function V(e){return"key"in e?e.key:e.dataIndex}function ae(e,t){return typeof t=="function"?t(e):e[t]}function Q(e){return e==="left"}function U(e){return e==="right"}function Ie(e){return Q(e)||U(e)}const We=s.createContext(null);function je(){const e=s.useContext(We);if(e==null)throw new Error("useColumnSizes provider not found");return e}const Be=s.createContext(null);function Ze(e){const{columns:t,children:r}=e,{widthList:n}=je(),o=s.useMemo(()=>t.map(a=>({key:V(a),fixed:a.fixed})),[t]),l=s.useMemo(()=>{let a=0;const g=o.reduce((d,x,H)=>{const{fixed:p,key:m}=x;return Q(p)&&(d[H]=a,a+=n.get(m)??0),d},[]);let b=0;const u=o.reduceRight((d,x,H)=>{const{fixed:p,key:m}=x;return U(p)&&(d[H]=b,b+=n.get(m)??0),d},[]);return o.reduce((d,x,H)=>{const{key:p,fixed:m}=x;return Q(m)?(d.set(p,g[H]),d):(U(m)&&d.set(p,u[H]),d)},new Map)},[o,n]),y=be(()=>o),f=be(()=>l),h=s.useMemo(()=>({size:f,fixed:y}),[y,f]);return S.jsx(Be.Provider,{value:h,children:r})}function Ne(){const e=s.useContext(Be);if(e==null)throw new Error("useTableSticky provider not found");return e}function A(e,t,r){return typeof t=="function"?t(e,r):e}function et(e,t,r){const{render:n}=r,o=t;if("dataIndex"in r){const l=r.dataIndex;return typeof n!="function"?o[l]:n(o[l],t,e)}return(n==null?void 0:n(t,t,e))??null}function tt(e){const{className:t,style:r,column:n,rowData:o,rowIndex:l,renderCell:y,...f}=e,{align:h,fixed:a,onCell:g}=n,b=V(n),{size:u}=Ne(),{className:d,style:x,colSpan:H,rowSpan:p,...m}=(g==null?void 0:g(o,l))??{};return H===0||p===0?null:A(S.jsx("td",{...f,...m,colSpan:H,rowSpan:p,className:q("virtual-table-cell",h!=null&&`virtual-table-align-${h}`,Ie(a)&&"virtual-table-sticky-cell",t,n.className,d),style:{...r,...x,left:Q(a)?u.get(b):void 0,right:U(a)?u.get(b):void 0},"data-col-key":b,children:et(l,o,n)}),y,{column:n})}const nt=s.memo(tt);function he(e,t){return Number.isFinite(e.width)?e.width:t}const rt=e=>{const{columns:t,defaultColumnWidth:r}=e;return S.jsx("colgroup",{children:t.map(n=>{const{key:o}=n;if(n.type==="blank")return S.jsx("col",{className:"blank",style:{width:n.width}},o);const{column:l}=n,y=he(l,r);return S.jsx("col",{"data-col-key":o,style:{width:y}},o)})})},Fe=s.memo(rt),ze=s.createContext(null);function Ft(){const e=s.useContext(ze);if(e==null)throw new Error("useContainerSize provider not found");return e}const De=s.createContext(null);function ot(e){const{children:t}=e,r=s.useRef(new Map),n=s.useMemo(()=>{const o=new Set;return{listen(l,y){return r.current.set(l,(f,h)=>{y(f,h)}),()=>{r.current.delete(l)}},notify(l,y){if(o.has(l)){o.delete(l);return}const{scrollLeft:f,node:h}=y;let a=window.requestAnimationFrame;a==null&&(a=g=>{g()}),r.current.forEach((g,b)=>{l!==b&&(o.add(b),a(()=>{g(f(),h)}))})}}},[]);return S.jsx(De.Provider,{value:n,children:t})}function ye(){const e=s.useContext(De);if(e==null)throw new Error("useHorizontalScrollContext provider not found");return e}const Oe=s.createContext(null);function zt(){const e=s.useContext(Oe);if(e==null)throw new Error("useTableRowManager provider not found");return e}const st=/auto|scroll|overlay|hidden/;function Ke(e){return e instanceof Node?e.nodeType===1:!1}function lt(e,t=window){let r=e;for(;r!==t&&Ke(r);){if(r===document.body)return t;const{overflow:n,overflowY:o,overflowX:l}=window.getComputedStyle(r);if(st.test(n+o+l))return r;r=r.parentNode}return e.ownerDocument.defaultView??window}function pe(e){return Object.prototype.toString.call(e)==="[object Window]"}function ct(e){return Object.prototype.toString.call(e)==="[object HTMLDocument]"}function _e(e){return Object.prototype.toString.call(e)==="[object HTMLHtmlElement]"}function Me(e){return ct(e)?e.scrollingElement:Ke(e)?e:document.scrollingElement}function it(e,t){const r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),o=Number.parseFloat(window.getComputedStyle(t).borderTopWidth)||0,l=t.scrollTop;return r.top-n.top-o+l}function Ce(e,t){if(pe(e)){const r=()=>{t({width:window.innerWidth,height:window.innerHeight})};return r(),window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}}else{const r=new ResizeObserver(n=>{const o=n[0].contentRect;t({width:o.width,height:o.height})});return r.observe(e),()=>{r.disconnect()}}}function ut(e,t){let r=0,n=e.length-1,o=-1;for(;r<=n;){const l=Math.floor((r+n)/2);e[l].bottom>t?(o=l,n=l-1):r=l+1}if(o!==-1)return e[o]}const Re="NormalRow";function at(e){const{getOffsetTop:t,rowKey:r,dataSource:n,getScroller:o,estimateSize:l,overscan:y}=e,[f,h]=s.useState(0),[a,g]=s.useState(0),b=s.useMemo(()=>n.slice(f,a),[n,f,a]),u=s.useRef(new Map),d=s.useCallback((i,w,E)=>{const c=u.current.get(i)??new Map;c.set(w,E),u.current.set(i,c)},[]),x=()=>{const i=[];return n.forEach(w=>{const E=ae(w,r),c=u.current.get(E);if(c==null)i.push(l);else{let v=0;c.forEach(M=>v+=M),i.push(v)}}),i};(()=>{if(n.length===0){u.current.clear();return}n.forEach(i=>{const w=ae(i,r),E=u.current.get(w)??new Map;E.get(Re)==null&&E.set(Re,l),u.current.set(w,E)})})();const p=s.useRef();(p.current==null||n.length!==p.current.length)&&(p.current=x());const m=s.useRef([]),B=()=>{const{rects:i}=n.reduce((w,E,c)=>{var k;const v=ae(E,r);let M=0;(k=u.current.get(v))==null||k.forEach(R=>{M+=R});const L=w.top+M;return w.rects.push({index:c,top:w.top,height:M,bottom:L}),w.top=L,w},{top:0,rects:[]});m.current=i},I=i=>{i==null||i(),B(),p.current=m.current.map(w=>w.height)},F=s.useRef({index:0,height:l,top:0,bottom:l}),D=s.useRef(0),z=s.useRef(!1);s.useEffect(()=>{const i=o();if(i==null)return;let w=0;const E=()=>{const R=t();let T=0;return pe(i)||_e(i)?T=window.scrollY:T=Me(i).scrollTop,Math.max(T-R,0)},c=R=>{const T=w;return w=Math.ceil(R/l),{prevCount:T}},v=R=>{const T=ut(m.current,R);T!=null&&(F.current=T,h(Math.max(0,T.index-y)),g(T.index+w+y))},M=R=>{const T=t(),Y=Me(R.target),$=Math.max(0,Y.scrollTop-T);$>D.current?$>F.current.bottom&&v($):$<F.current.top&&v($),D.current=$};let L=0;const k=Ce(i,R=>{if(R.height===L||R.height===0)return;L=R.height,c(R.height);const T=E();if(z.current)v(T);else{z.current=!0;let Y=0;T>=l&&(Y=Math.max(Math.floor(T/l)-1-y,0));const $=Y+w+y;h(Y),g($)}});return i.addEventListener("scroll",M),()=>{k(),i.removeEventListener("scroll",M)}},[l,t,o,y]);const W=(i,w)=>p.current.slice(i,w).reduce((E,c)=>E+c,0),K=W(0,f),O=W(a);return{startIndex:f,endIndex:a,rowHeightList:p,flushLayout:I,rowHeightByRowKey:u,setRowHeightByRowKey:d,topBlank:K,bottomBlank:O,dataSlice:b}}function Le(e){const t=s.useRef(null);return s.useLayoutEffect(()=>{t.current=e}),s.useCallback((...n)=>{var o;return(o=t.current)==null?void 0:o.call(t,...n)},[])}class dt{constructor(){this.getInstance=this.getInstance.bind(this)}getInstance(){const r={...["getCurrentProps","getColumns","getDataSource","getDOM","getRowHeightMap","getRowVirtualizeState","getScrollValueByRowIndex","getScrollValueByColumnKey","scrollToRow","scrollToColumn","scrollTo","getColumnByKey","getColumnByIndex","getColumnKeyByIndex","getColumnWidths","getColumnWidthByKey"].reduce((n,o)=>(n[o]=()=>{throw new Error(`${o}() has not been implemented yet`)},n),{}),extend:n=>{Object.keys(n).forEach(o=>{r[o]=n[o]})}};return r}}function ft(e){const[t]=s.useState(()=>e??new dt().getInstance());return t}function ht(e){const t={current:null,options:null};return(...r)=>{const n=o=>e(o,...r);return de(r,t.options)?t.current??n:(t.options=r,t.current=n,n)}}function yt(e){return Array.isArray(e)?e.filter(t=>t!=null&&(typeof t=="function"||typeof t.hook=="function")).map(t=>typeof t=="function"?{priority:100,hook:t}:t):[]}const fe=class fe{constructor(){we(this,"hooks",[]);this.use=this.use.bind(this)}setHooks(t){this.hooks=t}use(t){if(this.hooks.length===0)return t;const r={current:t},n={render:[],renderRoot:[],renderContent:[],renderHeaderWrapper:[],renderHeaderRoot:[],renderHeader:[],renderHeaderRow:[],renderHeaderCell:[],renderBodyWrapper:[],renderBodyRoot:[],renderBody:[],renderBodyContent:[],renderRow:[],renderCell:[]},o=[],l=[],y=this.hooks.slice();return y.sort((f,h)=>f.priority-h.priority),y.map(f=>f.hook).forEach(f=>{const h=f(r.current),{render:a,renderRoot:g,renderContent:b,renderHeaderWrapper:u,renderHeaderRoot:d,renderHeader:x,renderHeaderRow:H,renderHeaderCell:p,renderBodyWrapper:m,renderBodyRoot:B,renderBody:I,renderBodyContent:F,renderRow:D,renderCell:z,rowClassName:W,onRow:K,...O}=h;Object.entries(n).forEach(([i,w])=>{const E=h[i];typeof E=="function"&&w.push(E)}),typeof W=="function"&&o.push(W),typeof K=="function"&&l.push(K),r.current=O}),Object.entries(n).forEach(([f,h])=>{h.length>0&&(r.current[f]=(a,g)=>h.reduce((b,u)=>u(b,g),a))}),o.length>0&&(r.current.rowClassName=(f,h)=>q(...o.map(a=>a(f,h)))),l.length>0&&(r.current.onRow=(f,h)=>l.reduce((a,g)=>({...a,...g(f,h)}),{})),r.current}};we(fe,"defaultPipeline",new fe);let oe=fe;function Dt(e){const{use:t,pipeline:r}=e,n=s.useMemo(()=>({current:new oe}),[]);if(t!=null){const o=yt([...t,...(r==null?void 0:r.hooks)??[]]);if(!xe(n.current.hooks,o)){const l=new oe;return l.setHooks(o),n.current=l,l}}return n.current}function Se(e,t){let r=-1;for(let n=0;n<e.length;n+=1)t(e[n],n)&&(r=n);return r}function pt(e){const{className:t,rowKey:r,rowIndex:n,rowData:o,columns:l,onRow:y,renderRow:f,renderCell:h,onRefCallback:a,...g}=e,{columns:b,descriptor:u}=l,d=Se(u,m=>m.type==="blank"?!1:Q(m.column.fixed)),x=u.findIndex(m=>m.type==="blank"?!1:U(m.column.fixed)),{className:H,...p}=(y==null?void 0:y(o,n))??{};return A(S.jsx("tr",{...g,...p,className:q("virtual-table-row",t,H),"data-row-index":n,ref:m=>{a==null||a({node:m,rowKey:r,rowIndex:n,rowData:o})},children:u.map((m,B)=>{const{key:I}=m;if(m.type==="blank")return S.jsx("td",{},I);const{column:F}=m;return S.jsx(nt,{className:q(d===B&&"virtual-table-cell-fix-left-last",x===B&&"virtual-table-cell-fix-right-first"),column:F,rowIndex:n,rowData:o,renderCell:h},I)})}),f,{columns:b,rowKey:r,rowIndex:n,rowData:o,columnDescriptor:u})}const mt=s.memo(pt);function gt(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function wt(...e){return t=>{e.forEach(r=>gt(r,t))}}function re(...e){return s.useCallback(wt(...e),e)}function xt(e){const{bodyWrapperRef:t,bodyRootRef:r,bodyRef:n,className:o,style:l,defaultColumnWidth:y,dataSource:f,columns:h,rowKey:a,instance:g,overscan:b,estimateSize:u,getScroller:d,getOffsetTop:x,rowClassName:H,onRow:p,renderBodyWrapper:m,renderBodyRoot:B,renderBody:I,renderBodyContent:F,renderRow:D,renderCell:z}=e,{startIndex:W,endIndex:K,dataSlice:O,rowHeightByRowKey:i,setRowHeightByRowKey:w,flushLayout:E,rowHeightList:c,topBlank:v,bottomBlank:M}=at({getOffsetTop:x,rowKey:a,dataSource:f,getScroller:d,estimateSize:u,overscan:b});g.extend({getRowVirtualizeState:()=>({startIndex:W,endIndex:K,overscan:b,estimateSize:u}),getRowHeightMap:()=>i.current});const L=re(n,N=>{N==null||N.offsetHeight===0||E()}),k=s.useCallback(N=>{const{node:_,rowKey:P}=N;_!=null&&w(P,Re,_.offsetHeight)},[w]),{columns:R,descriptor:T}=h,Y=A(O.map((N,_)=>{const P=ae(N,a);return S.jsx(mt,{className:q(H==null?void 0:H(N,_)),rowKey:P,rowIndex:_+W,rowData:N,columns:h,onRow:p,renderRow:D,renderCell:z,onRefCallback:k},P)}),F,{columns:R,columnDescriptor:T,startRowIndex:W}),$=A(S.jsx("tbody",{ref:L,children:Y}),I,{columns:R,columnDescriptor:T,startRowIndex:W}),se=A(S.jsxs("table",{className:q(o,"virtual-table-body"),style:{...l,paddingBottom:M,paddingTop:v},ref:r,children:[S.jsx(Fe,{columns:T,defaultColumnWidth:y}),$]}),B,{columns:R,columnDescriptor:T,startRowIndex:W}),{listen:le,notify:ce}=ye(),ie=s.useRef(null);s.useEffect(()=>{const N=ie.current;if(N==null)return;const _="virtual-table-body",P=()=>{ce(_,{scrollLeft:()=>N.scrollLeft,node:N})},Z=le(_,X=>{N.scrollLeft=X});return N.addEventListener("scroll",P),()=>{N.removeEventListener("scroll",P),Z()}},[le,ce]);const me=re(ie,t);g.extend({getScrollValueByRowIndex(N){if(d()==null)return 0;const{stickyHeader:P}=g.getCurrentProps(),{headerWrapper:Z}=g.getDOM();let X=0;return P==null||P===!1?X=Z==null?0:Z.offsetHeight:X=Number.isFinite(P)?P*-1:0,c.current.slice(0,N).reduce((G,ee)=>G+ee,0)+x()+X},scrollToRow(N,_){g.scrollTo({top:g.getScrollValueByRowIndex(N),behavior:_})}});const ge=s.useMemo(()=>({setRowHeightByRowKey:w,getRowHeightList:()=>c.current}),[c,w]);return S.jsx(Oe.Provider,{value:ge,children:A(S.jsx("div",{ref:me,className:"virtual-table-body-wrapper",children:se}),m,{columns:R,columnDescriptor:T,startRowIndex:W})})}const bt=e=>{const{className:t,style:r,defaultColumnWidth:n,wrapperRef:o,columns:l,stickyHeader:y,renderHeaderWrapper:f,renderHeaderRoot:h,renderHeader:a,renderHeaderRow:g,renderHeaderCell:b}=e,{columns:u,descriptor:d}=l,x=u[u.length-1],{widthList:H}=je(),{size:p}=Ne(),m=Se(d,i=>i.type==="blank"?!1:Q(i.column.fixed)),B=d.findIndex(i=>i.type==="blank"?!1:U(i.column.fixed)),{listen:I,notify:F}=ye(),D=s.useRef(null);s.useEffect(()=>{const i=D.current;if(i==null)return;const w="virtual-table-header",E=()=>{F(w,{scrollLeft:()=>i.scrollLeft,node:i})},c=I(w,v=>{i.scrollLeft=v});return i.addEventListener("scroll",E),()=>{i.removeEventListener("scroll",E),c()}},[I,F]);const z=A(S.jsx("tr",{children:d.map((i,w)=>{var R;const{key:E}=i;if(i.type==="blank")return S.jsx("th",{"data-blank":!0},E);const{column:c}=i;if(c.colSpan===0)return null;const v=V(x)===E,{className:M,style:L,...k}=((R=c.onHeaderCell)==null?void 0:R.call(c,c,w))??{};return S.jsx(s.Fragment,{children:A(s.createElement("th",{scope:"col",...k,colSpan:c.colSpan,className:q("virtual-table-header-cell",v&&"no-split",c.align!=null&&`virtual-table-align-${c.align}`,Ie(c.fixed)&&"virtual-table-sticky-cell",m===w&&"virtual-table-cell-fix-left-last",B===w&&"virtual-table-cell-fix-right-first",c.className,M),style:{...L,left:Q(c.fixed)?p.get(E):void 0,right:U(c.fixed)?p.get(E):void 0}},c.title),b,{column:c,columns:u,columnWidths:H,columnDescriptor:d})},E)})}),g,{columns:u,columnDescriptor:d}),W=A(S.jsx("thead",{className:"virtual-table-thead",children:z}),a,{columns:u,columnDescriptor:d}),K=A(S.jsxs("table",{style:r,children:[S.jsx(Fe,{columns:d,defaultColumnWidth:n}),W]}),h,{columns:u,columnDescriptor:d}),O=re(o,D);return A(S.jsx("div",{ref:O,className:q("virtual-table-header",t,{"virtual-table-header-sticky":y}),style:{top:Number.isFinite(y)?y:void 0},children:K}),f,{columns:u,columnDescriptor:d})},Rt=s.memo(bt);function Ct(e){const{getScroller:t,root:r}=e,[n,o]=s.useState(0),[l,y]=s.useState(0),[f,h]=s.useState(800),[a,g]=s.useState(600),b=s.useRef(null);return s.useLayoutEffect(()=>{const d=t();if(d==null)return;let x;pe(d)?x=document.scrollingElement:x=d,b.current=x;const H=new ResizeObserver(p=>{const{width:m,height:B}=p[0].contentRect;o(m),y(B)});return H.observe(x),()=>{H.disconnect()}},[t]),s.useLayoutEffect(()=>{const d=r.current;if(d==null)return;const x=new ResizeObserver(H=>{const{width:p,height:m}=H[0].contentRect;h(p),g(m)});return x.observe(d),()=>{x.disconnect()}},[r]),s.useMemo(()=>({scrollContainerWidth:n,scrollContainerHeight:l,tableWidth:f,tableHeight:a}),[n,l,f,a])}function St(e,t){const r=s.useMemo(()=>e.reduce((n,o)=>{const l=he(o,t);return n.set(V(o),l),n},new Map),[e,t]);return be(()=>r)}function kt(e,t){let r=0,n=e.length-1,o=-1;for(;r<=n;){const l=Math.floor((r+n)/2);e[l].right>t?(o=l,n=l-1):r=l+1}if(o!==-1)return e[o]}function vt(e){let t=-1;for(let r=e.length-1;r>=0;r--){const n=e[r];if(U(n.fixed))t=r;else break}return t}function Ht(e){return Se(e,t=>Q(t.fixed))}function Et(e){const{estimateSize:t,defaultColumnWidth:r,overscan:n,columns:o,containerWidth:l,bodyWrapper:y,disabled:f=!1}=e,h=Ht(o),a=vt(o),g=h>-1?V(o[h]):null,b=a>-1?V(o[a]):null,[u,d]=s.useState(0),[x,H]=s.useState(0),p=s.useMemo(()=>{if(f)return[];let c=0;return o.map((v,M)=>{const L=he(v,r),k=c+L,R={index:M,width:L,left:c,right:k};return c=k,R})},[f,o,r]),m=s.useRef({index:0,width:t,left:0,right:t}),B=Le(c=>kt(p,c)),I=Le((c,v)=>{const M=B(c);M!=null&&(m.current=M,d(Math.max(0,M.index-n)),H(M.index+v+n))}),F=s.useRef(0);s.useEffect(()=>{if(f)return;const c=y.current;if(c==null)return;let v=Math.ceil(l/t);const M=()=>{const R=c.scrollLeft;R>F.current?R>m.current.right&&I(R,v):R<m.current.left&&I(R,v),F.current=R};c.addEventListener("scroll",M);let L=0;const k=Ce(c,({width:R})=>{if(R===L||R===0)return;L=R;const T=c.scrollLeft;v=Math.ceil(R/t),I(T,v)});return()=>{c.removeEventListener("scroll",M),k()}},[l,y,t,I,n,B,f]);const D=(c,v)=>p.slice(c,v).reduce((M,L)=>M+L.width,0),z=h>-1?D(0,h+1):0,W=a>-1?D(a):0,K=Math.max(0,D(0,u)-z),O=Math.max(0,D(x)-W),i=s.useMemo(()=>{if(f)return o;const c=[...o.slice(0,h+1),...o.slice(u,x),...o.slice(a)],v=new Set;return c.filter(M=>{const L=V(M);return v.has(L)?!1:(v.add(L),!0)})},[f,o,u,x,h,a]),w=s.useMemo(()=>i.reduce((c,v,M)=>{const L=V(v);let k=v;return k.width==null&&k.minWidth==null&&(k={...k,width:r}),L===g?(c.push({type:"normal",key:L,column:k}),c.push({type:"blank",key:"_blank_left",width:K})):g==null&&M===0?(c.push({type:"blank",key:"_blank_left",width:K}),c.push({type:"normal",key:L,column:k})):L===b?(c.push({type:"blank",key:"_blank_right",width:O}),c.push({type:"normal",key:L,column:k})):b==null&&M===i.length-1?(c.push({type:"normal",key:L,column:k}),c.push({type:"blank",key:"_blank_right",width:O})):c.push({type:"normal",key:L,column:k}),c},[]),[i,g,b,K,O,r]);return{columns:s.useMemo(()=>({columns:i,descriptor:w}),[i,w]),columnSlice:i,lastFixedLeftIndex:h,firstFixedRightIndex:a}}function Mt(e,t){const{className:r,style:n,children:o,hasFixedLeftColumn:l,hasFixedRightColumn:y,renderRoot:f,bodyScrollContainer:h}=e,a=s.useRef(null),[g,b]=s.useState(!1),[u,d]=s.useState(!1),{listen:x}=ye();s.useEffect(()=>{if(!l&&!y)return;const p=B=>{const{scrollLeft:I,clientWidth:F,scrollWidth:D}=B;l&&b(I!==0),y&&d(!(I+F>=D))},m=h.current;return m!=null&&p(m),x("__root",(B,I)=>{p(I)})},[h,l,y,x]);const H=re(t,a);return A(S.jsx("div",{ref:H,className:q("virtual-table",g&&"virtual-table-has-fix-left",u&&"virtual-table-has-fix-right",r),style:n,children:o}),f,{})}const Lt=s.forwardRef(Mt);function Tt(e,t){const{bodyRootRef:r,instance:n,className:o,style:l,tableBodyClassName:y,tableBodyStyle:f,columns:h,dataSource:a,rowKey:g="key",estimatedRowHeight:b=46,estimatedColumnWidth:u,overscanRows:d=5,overscanColumns:x=3,stickyHeader:H,defaultColumnWidth:p=100,pipeline:m=oe.defaultPipeline,rowClassName:B,onRow:I,getOffsetTop:F,virtualHeader:D=!0}=e,z=ft(n);z.extend({getCurrentProps:()=>({estimatedRowHeight:b,overscanRows:d,overscanColumns:x,defaultColumnWidth:p,...e})});const W=s.useRef(null),K=s.useRef(null),O=s.useRef(null),i=s.useRef(null),w=re(i,r),E=s.useRef(null),c=s.useCallback(()=>{const C=W.current;if(C!=null)return lt(C)},[]),v=s.useCallback(()=>{if(typeof F=="function")return F();const C=c(),j=W.current;if(j==null||C==null||C===j)return 0;if(pe(C)||_e(C)){const te=j.getBoundingClientRect().top;return window.scrollY+te}return it(j,C)},[F,c]),M=Ct({getScroller:c,root:W}),{dataSource:L,columns:k,rowKey:R,rowClassName:T,render:Y,renderRoot:$,renderContent:se,renderHeaderWrapper:le,renderHeaderRoot:ce,renderHeader:ie,renderHeaderRow:me,renderHeaderCell:ge,renderBodyWrapper:N,renderBodyRoot:_,renderBody:P,renderBodyContent:Z,renderRow:X,renderCell:ke,onRow:G}=m.use({dataSource:a,rowKey:g,columns:h,estimatedRowHeight:b,headerWrapperRef:K,bodyWrapperRef:O,bodyRootRef:i,bodyRef:E,rootRef:W,getOffsetTop:v,getScroller:c,instance:z});z.extend({getColumns:()=>k,getDataSource:()=>L});const ee=St(k,p);z.extend({getColumnWidths:()=>ee,getColumnWidthByKey:C=>ee.get(C)});const Pe=s.useMemo(()=>({widthList:ee}),[ee]),{columns:J}=Et({estimateSize:u??p,defaultColumnWidth:p,overscan:x,columns:k,containerWidth:M.tableWidth,bodyWrapper:O,disabled:u==null}),Ae=s.useCallback((C,j)=>q(B==null?void 0:B(C,j),T==null?void 0:T(C,j)),[B,T]),$e=s.useCallback((C,j)=>({...I==null?void 0:I(C,j),...G==null?void 0:G(C,j)}),[G,I]),Ve=k.some(C=>Q(C.fixed)),qe=k.some(C=>U(C.fixed)),ve=s.useMemo(()=>({columns:k,descriptor:k.map(C=>({key:V(C),type:"normal",column:C}))}),[k]),Ye=s.useMemo(()=>D?J:ve,[D,ve,J]);z.extend({getDOM:()=>({root:W.current,headerWrapper:K.current,bodyWrapper:O.current,bodyRoot:i.current,body:E.current}),scrollTo:C=>{var ne;const{left:j,top:te}=C;if(j!=null&&((ne=O.current)==null||ne.scrollTo(C)),te!=null){const ue=c();if(ue==null){console.error("The scroller DOM is not obtained, and scrolling is not possible.");return}ue.scrollTo(C)}},getScrollValueByColumnKey:C=>{let j=0,te=0;for(const ne of k){const ue=V(ne),He=he(ne,p);if(Q(ne.fixed)&&(te+=He),ue===C)break;j+=He}return j-te},scrollToColumn:(C,j)=>{z.scrollTo({left:z.getScrollValueByColumnKey(C),behavior:j})},getColumnByKey:C=>k.find(j=>V(j)===C),getColumnByIndex:C=>k[C],getColumnKeyByIndex:C=>{const j=z.getColumnByIndex(C);if(j!=null)return V(j)}});const Qe=A(S.jsxs(S.Fragment,{children:[S.jsx(Rt,{wrapperRef:K,defaultColumnWidth:p,columns:Ye,stickyHeader:H,renderHeaderWrapper:le,renderHeaderRoot:ce,renderHeader:ie,renderHeaderRow:me,renderHeaderCell:ge}),S.jsx(xt,{instance:z,bodyWrapperRef:O,bodyRootRef:w,bodyRef:E,className:y,style:f,defaultColumnWidth:p,columns:J,rowKey:R,dataSource:L,overscan:d,estimateSize:b,getScroller:c,getOffsetTop:v,rowClassName:Ae,onRow:$e,renderBodyWrapper:N,renderBodyRoot:_,renderBody:P,renderBodyContent:Z,renderRow:X,renderCell:ke})]}),se,{columns:J.columns,columnDescriptor:J.descriptor}),Ue=re(W,t),Xe=A(S.jsx(Lt,{ref:Ue,className:o,style:l,hasFixedLeftColumn:Ve,hasFixedRightColumn:qe,renderRoot:$,bodyScrollContainer:O,children:Qe}),Y,{columns:J.columns,columnDescriptor:J.descriptor});return S.jsx(We.Provider,{value:Pe,children:S.jsx(Ze,{columns:k,children:S.jsx(ze.Provider,{value:M,children:S.jsx(ot,{children:Xe})})})})}const Ot=s.memo(s.forwardRef(Tt));function It(){const e=document.createElement("div");e.style.position="absolute",e.style.width="100px",e.style.height="100px",e.style.overflow="scroll",e.style.top="-9999px",document.body.appendChild(e);const t=e.offsetWidth-e.clientWidth,r=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),{width:t,height:r}}const Wt=e=>{const{className:t,style:r,bottom:n,zIndex:o,bodyRef:l}=e,{listen:y,notify:f}=ye(),h=s.useRef(null);s.useEffect(()=>{const u=h.current;if(u==null)return;const d="virtual-table-sticky-bottom-scroll",x=()=>{f(d,{scrollLeft:()=>u.scrollLeft,node:u})},H=y(d,p=>{u.scrollLeft=p});return u.addEventListener("scroll",x),()=>{u.removeEventListener("scroll",x),H()}},[y,f]);const[a,g]=s.useState(0);s.useEffect(()=>{const u=l.current;if(u!=null)return Ce(u,({width:d})=>{d!==0&&g(d)})},[l]);const[b]=s.useState(It);return S.jsx("div",{className:q("virtual-table-sticky-scroll",t),style:{...r,"--virtual-table-sticky-scroll-bottom":Number.isFinite(n)?`${n}px`:n,paddingTop:b.height>0?0:15,marginTop:b.height>0?0:b.height*-1,height:b.height+1,zIndex:o},ref:h,children:S.jsx("div",{className:"virtual-table-sticky-scroll-bar",style:{width:a}})})};function jt(e,t){const{bodyRootRef:r}=e;return{...e,renderContent(n){return S.jsxs(S.Fragment,{children:[n,S.jsx(Wt,{bodyRef:r,...t})]})}}}const Kt=ht(jt);export{Fe as C,Ot as V,ft as a,ht as b,q as c,he as d,Ft as e,zt as f,V as g,Kt as h,be as i,Le as j,Ie as k,ae as l,Ne as m,U as n,Q as o,Se as p,Ce as q,ye as r,It as s,re as t,Dt as u};
