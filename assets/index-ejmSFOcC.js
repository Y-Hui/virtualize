var Ze=Object.defineProperty;var et=(e,t,n)=>t in e?Ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var fe=(e,t,n)=>et(e,typeof t!="symbol"?t+"":t,n);import{r as s,j as C}from"./index-DwJKakmm.js";function Le(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=Le(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function q(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=Le(e))&&(r&&(r+=" "),r+=t);return r}function Be(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),r=Object.keys(t),o=n.length;if(r.length!==o)return!1;for(let l=0;l<o;l+=1){const f=n[l];if(e[f]!==t[f]||!Object.prototype.hasOwnProperty.call(t,f))return!1}return!0}function xe(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=e.length;if(t.length!==n)return!1;for(let r=0;r<n;r+=1)if(e[r]!==t[r])return!1;return!0}function se(e,t){if(Object.is(e,t))return!0;if(Array.isArray(e)&&Array.isArray(t))return xe(e,t)?!0:e.length===t.length&&e.findIndex(r=>typeof r=="object"&&r!=null)>-1?e.every((r,o)=>Array.isArray(r)?xe(r,t[o]):typeof r=="object"&&r!=null?Be(r,t[o]):Object.is(r,t[o])):!1;if(e instanceof Map&&t instanceof Map){const n=Array.from(e.keys()),r=Array.from(t.keys());if(se(n,r)){const o=Array.from(e.values()),l=Array.from(t.values());if(se(o,l))return!0}return!1}return typeof e=="object"&&e!=null?Be(e,t):!1}function Ie(e){const t=e(),n=s.useRef(t);return se(t,n.current)||(n.current=t),n.current}function $(e){return"key"in e?e.key:e.dataIndex}function he(e,t){return typeof t=="function"?t(e):e[t]}function Y(e){return e==="left"}function Q(e){return e==="right"}function je(e){return Y(e)||Q(e)}const Ne=s.createContext(null);function Se(){const e=s.useContext(Ne);if(e==null)throw new Error("useColumnSizes provider not found");return e}const ze=s.createContext(null);function tt(e){const{columns:t,children:n}=e,{widthList:r}=Se(),o=s.useMemo(()=>t.map(i=>({key:$(i),fixed:i.fixed})),[t]),l=s.useMemo(()=>{let i=0;const S=o.reduce((y,v,M)=>{const{fixed:b,key:w}=v;return Y(b)&&(y[M]=i,i+=r.get(w)??0),y},[]);let p=0;const c=o.reduceRight((y,v,M)=>{const{fixed:b,key:w}=v;return Q(b)&&(y[M]=p,p+=r.get(w)??0),y},[]);return o.reduce((y,v,M)=>{const{key:b,fixed:w}=v;return Y(w)?(y.set(b,S[M]),y):(Q(w)&&y.set(b,c[M]),y)},new Map)},[o,r]),f=Ie(()=>o),u=Ie(()=>l),d=s.useMemo(()=>({size:u,fixed:f}),[f,u]);return C.jsx(ze.Provider,{value:d,children:n})}function De(){const e=s.useContext(ze);if(e==null)throw new Error("useTableSticky provider not found");return e}function P(e,t,n){return typeof t=="function"?t(e,n):e}function nt(e,t,n){const{render:r}=n,o=t;if("dataIndex"in n){const l=n.dataIndex;return typeof r!="function"?o[l]:r(o[l],t,e)}return(r==null?void 0:r(t,t,e))??null}function rt(e){const{className:t,style:n,column:r,rowData:o,rowIndex:l,renderCell:f,...u}=e,{align:d,fixed:i,onCell:S}=r,p=$(r),{size:c}=De(),{className:y,style:v,colSpan:M,rowSpan:b,...w}=(S==null?void 0:S(o,l))??{};return M===0||b===0?null:P(C.jsx("td",{...u,...w,colSpan:M,rowSpan:b,className:q("virtual-table-cell",d!=null&&`virtual-table-align-${d}`,je(i)&&"virtual-table-sticky-cell",t,r.className,y),style:{...n,...v,left:Y(i)?c.get(p):void 0,right:Q(i)?c.get(p):void 0},"data-col-key":p,children:nt(l,o,r)}),f,{column:r})}const ot=s.memo(rt),st=e=>{const{columns:t,onColumnSizesMeasure:n}=e,r=n!=null,o=new Map,l=s.useRef(new Map);return C.jsx("colgroup",{ref:()=>{r&&(se(o,l.current)||(n(o),l.current=o))},children:t.map(f=>{const{key:u}=f;if(f.type==="blank")return C.jsx("col",{className:"blank",style:{width:f.width}},u);const{column:d}=f;return C.jsx("col",{ref:i=>{i==null||!r||o.set(u,i.offsetWidth)},style:{width:d.width,minWidth:d.minWidth}},u)})})},Ke=s.memo(st),lt=/auto|scroll|overlay|hidden/;function Fe(e){return e instanceof Node?e.nodeType===1:!1}function ct(e,t=window){let n=e;for(;n!==t&&Fe(n);){if(n===document.body)return t;const{overflow:r,overflowY:o,overflowX:l}=window.getComputedStyle(n);if(lt.test(r+o+l))return n;n=n.parentNode}return e.ownerDocument.defaultView??window}function pe(e){return Object.prototype.toString.call(e)==="[object Window]"}function it(e){return Object.prototype.toString.call(e)==="[object HTMLDocument]"}function Oe(e){return Object.prototype.toString.call(e)==="[object HTMLHtmlElement]"}function Te(e){return it(e)?e.scrollingElement:Fe(e)?e:document.scrollingElement}function ut(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),o=Number.parseFloat(window.getComputedStyle(t).borderTopWidth)||0,l=t.scrollTop;return n.top-r.top-o+l}function at(e){const{getScroller:t,root:n}=e,[r,o]=s.useState(0),[l,f]=s.useState(0),[u,d]=s.useState(0),[i,S]=s.useState(0),p=s.useRef(null);return s.useLayoutEffect(()=>{const c=t();if(c==null)return;let y;pe(c)?y=document.scrollingElement:y=c,p.current=y;const v=new ResizeObserver(M=>{const{width:b,height:w}=M[0].contentRect;o(b),f(w)});return v.observe(y),()=>{v.disconnect()}},[t]),s.useLayoutEffect(()=>{const c=n.current;if(c==null)return;const y=new ResizeObserver(v=>{const{width:M,height:b}=v[0].contentRect;d(M),S(b)});return y.observe(c),()=>{y.disconnect()}},[n]),{scrollContainerWidth:r,scrollContainerHeight:l,tableWidth:u,tableHeight:i}}const _e=s.createContext(null);function dt(e){const{getScroller:t,root:n,children:r}=e,{scrollContainerHeight:o,scrollContainerWidth:l,tableHeight:f,tableWidth:u}=at({getScroller:t,root:n}),d=s.useMemo(()=>({scrollContainerWidth:l,scrollContainerHeight:o,tableWidth:u,tableHeight:f}),[l,o,u,f]);return C.jsx(_e.Provider,{value:d,children:r})}function Kt(){const e=s.useContext(_e);if(e==null)throw new Error("useContainerSize provider not found");return e}const Ge=s.createContext(null);function ft(e){const{children:t}=e,n=s.useRef(new Map),r=s.useMemo(()=>{const o=new Set;return{listen(l,f){return n.current.set(l,(u,d)=>{f(u,d)}),()=>{n.current.delete(l)}},notify(l,f){if(o.has(l)){o.delete(l);return}const{scrollLeft:u,node:d}=f;let i=window.requestAnimationFrame;i==null&&(i=S=>{S()}),n.current.forEach((S,p)=>{l!==p&&(o.add(p),i(()=>{S(u(),d)}))})}}},[]);return C.jsx(Ge.Provider,{value:r,children:t})}function ye(){const e=s.useContext(Ge);if(e==null)throw new Error("useHorizontalScrollContext provider not found");return e}const Pe=s.createContext(null);function Ft(){const e=s.useContext(Pe);if(e==null)throw new Error("useTableRowManager provider not found");return e}function ke(e,t){if(pe(e)){const n=()=>{t({width:window.innerWidth,height:window.innerHeight})};return n(),window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}}else{const n=new ResizeObserver(r=>{const o=r[0].contentRect;t({width:o.width,height:o.height})});return n.observe(e),()=>{n.disconnect()}}}function ht(e,t){let n=0,r=e.length-1,o=-1;for(;n<=r;){const l=Math.floor((n+r)/2);e[l].bottom>t?(o=l,r=l-1):n=l+1}if(o!==-1)return e[o]}const Ce="NormalRow";function mt(e){const{getOffsetTop:t,rowKey:n,dataSource:r,getScroller:o,estimateSize:l,overscan:f}=e,[u,d]=s.useState(0),[i,S]=s.useState(0),p=s.useMemo(()=>r.slice(u,i),[r,u,i]),c=s.useRef(new Map),y=s.useCallback((h,m,x)=>{const a=c.current.get(h)??new Map;a.set(m,x),c.current.set(h,a)},[]),v=()=>{const h=[];return r.forEach(m=>{const x=he(m,n),a=c.current.get(x);if(a==null)h.push(l);else{let E=0;a.forEach(H=>E+=H),h.push(E)}}),h};(()=>{if(r.length===0){c.current.clear();return}r.forEach(h=>{const m=he(h,n),x=c.current.get(m)??new Map;x.get(Ce)==null&&x.set(Ce,l),c.current.set(m,x)})})();const b=s.useRef();(b.current==null||r.length!==b.current.length)&&(b.current=v());const w=s.useRef([]),N=()=>{const{rects:h}=r.reduce((m,x,a)=>{var k;const E=he(x,n);let H=0;(k=c.current.get(E))==null||k.forEach(L=>{H+=L});const I=m.top+H;return m.rects.push({index:a,top:m.top,height:H,bottom:I}),m.top=I,m},{top:0,rects:[]});w.current=h},j=h=>{h==null||h(),N(),b.current=w.current.map(m=>m.height)},D=s.useRef({index:0,height:l,top:0,bottom:l}),O=s.useRef(0),K=s.useRef(!1);s.useEffect(()=>{const h=o();if(h==null)return;let m=0;const x=()=>{const L=t();let g=0;return pe(h)||Oe(h)?g=window.scrollY:g=Te(h).scrollTop,Math.max(g-L,0)},a=L=>{const g=m;return m=Math.ceil(L/l),{prevCount:g}},E=L=>{const g=ht(w.current,L);g!=null&&(D.current=g,d(Math.max(0,g.index-f)),S(g.index+m+f))},H=L=>{const g=t(),V=Te(L.target),A=Math.max(0,V.scrollTop-g);A>O.current?A>D.current.bottom&&E(A):A<D.current.top&&E(A),O.current=A};let I=0;const k=ke(h,L=>{if(L.height===I||L.height===0)return;I=L.height,a(L.height);const g=x();if(K.current)E(g);else{K.current=!0;let V=0;g>=l&&(V=Math.max(Math.floor(g/l)-1-f,0));const A=V+m+f;d(V),S(A)}});return h.addEventListener("scroll",H),()=>{k(),h.removeEventListener("scroll",H)}},[l,t,o,f]);const T=(h,m)=>b.current.slice(h,m).reduce((x,a)=>x+a,0),F=T(0,u),B=T(i);return{startIndex:u,endIndex:i,rowHeightList:b,flushLayout:j,rowHeightByRowKey:c,setRowHeightByRowKey:y,topBlank:F,bottomBlank:B,dataSlice:p}}function We(e){const t=s.useRef(null);return s.useLayoutEffect(()=>{t.current=e}),s.useCallback((...r)=>{var o;return(o=t.current)==null?void 0:o.call(t,...r)},[])}class pt{constructor(){fe(this,"instance",{getCurrentProps(){throw new Error("getCurrentProps() has not been implemented yet")},getColumns(){throw new Error("getColumns() has not been implemented yet")},getDataSource(){throw new Error("getDataSource() has not been implemented yet")},getDOM(){throw new Error("getDOM() has not been implemented yet")},getRowHeightMap(){throw new Error("getRowHeightMap() has not been implemented yet")},getRowVirtualizeState(){throw new Error("getRowVirtualizeState() has not been implemented yet")},getScrollValueByRowIndex(){throw new Error("getScrollValueByRowIndex() has not been implemented yet")},getScrollValueByColumnKey(){throw new Error("getScrollValueByColumnKey() has not been implemented yet")},scrollToRow(){throw new Error("scrollToRow() has not been implemented yet")},scrollToColumn(){throw new Error("scrollToColumn() has not been implemented yet")},scrollTo(){throw new Error("scrollTo() has not been implemented yet")},getColumnByKey(){throw new Error("getColumnByKey() has not been implemented yet")},getColumnByIndex(){throw new Error("getColumnByIndex() has not been implemented yet")},getColumnKeyByIndex(){throw new Error("getColumnKeyByIndex() has not been implemented yet")},getColumnWidths(){throw new Error("getColumnWidths() has not been implemented yet")},getColumnWidthByKey(){throw new Error("getColumnWidthByKey() has not been implemented yet")}});this.getInstance=this.getInstance.bind(this),this.getInternalHooks=this.getInternalHooks.bind(this)}getInternalHooks(){return{implGetCurrentProps:t=>{this.instance.getCurrentProps=t},implGetColumns:t=>{this.instance.getColumns=t},implGetDataSource:t=>{this.instance.getDataSource=t},implGetDOM:t=>{this.instance.getDOM=t},implGetRowVirtualizeState:t=>{this.instance.getRowVirtualizeState=t},implGetRowHeightMap:t=>{this.instance.getRowHeightMap=t},implScrollValueByRowIndex:t=>{this.instance.getScrollValueByRowIndex=t},implScrollValueByColumnKey:t=>{this.instance.getScrollValueByColumnKey=t},implScrollToRow:t=>{this.instance.scrollToRow=t},implScrollToColumn:t=>{this.instance.scrollToColumn=t},implScrollTo:t=>{this.instance.scrollTo=t},implGetColumnByKey:t=>{this.instance.getColumnByKey=t},implGetColumnByIndex:t=>{this.instance.getColumnByIndex=t},implGetColumnKeyByIndex:t=>{this.instance.getColumnKeyByIndex=t},implGetColumnWidths:t=>{this.instance.getColumnWidths=t},implGetColumnWidthByKey:t=>{this.instance.getColumnWidthByKey=t}}}getInstance(){return{...Object.keys(this.instance).reduce((t,n)=>(t[n]=(...r)=>this.instance[n](...r),t),{}),getInternalHooks:this.getInternalHooks}}}function yt(e){return s.useMemo(()=>e??new pt().getInstance(),[e])}function gt(e){const t={current:null,options:null};return(...n)=>{const r=o=>e(o,...n);return se(n,t.options)?t.current??r:(t.options=n,t.current=r,r)}}function wt(e){return Array.isArray(e)?e.filter(t=>t!=null&&(typeof t=="function"||typeof t.hook=="function")).map(t=>typeof t=="function"?{priority:100,hook:t}:t):[]}const me=class me{constructor(){fe(this,"hooks",[]);this.use=this.use.bind(this)}setHooks(t){this.hooks=t}use(t){if(this.hooks.length===0)return t;const n={current:t},r={render:[],renderRoot:[],renderContent:[],renderHeaderWrapper:[],renderHeaderRoot:[],renderHeader:[],renderHeaderRow:[],renderHeaderCell:[],renderBodyWrapper:[],renderBodyRoot:[],renderBody:[],renderBodyContent:[],renderRow:[],renderCell:[]},o=[],l=[],f=this.hooks.slice();return f.sort((u,d)=>u.priority-d.priority),f.map(u=>u.hook).forEach(u=>{const d=u(n.current),{render:i,renderRoot:S,renderContent:p,renderHeaderWrapper:c,renderHeaderRoot:y,renderHeader:v,renderHeaderRow:M,renderHeaderCell:b,renderBodyWrapper:w,renderBodyRoot:N,renderBody:j,renderBodyContent:D,renderRow:O,renderCell:K,rowClassName:T,onRow:F,...B}=d;Object.entries(r).forEach(([h,m])=>{const x=d[h];typeof x=="function"&&m.push(x)}),typeof T=="function"&&o.push(T),typeof F=="function"&&l.push(F),n.current=B}),Object.entries(r).forEach(([u,d])=>{d.length>0&&(n.current[u]=(i,S)=>d.reduce((p,c)=>c(p,S),i))}),o.length>0&&(n.current.rowClassName=(u,d)=>q(...o.map(i=>i(u,d)))),l.length>0&&(n.current.onRow=(u,d)=>l.reduce((i,S)=>({...i,...S(u,d)}),{})),n.current}};fe(me,"defaultPipeline",new me);let le=me;function Ot(e){const{use:t,pipeline:n}=e,r=s.useMemo(()=>({current:new le}),[]);if(t!=null){const o=wt([...t,...(n==null?void 0:n.hooks)??[]]);if(!xe(r.current.hooks,o)){const l=new le;return l.setHooks(o),r.current=l,l}}return r.current}function ve(e,t){let n=-1;for(let r=0;r<e.length;r+=1)t(e[r],r)&&(n=r);return n}function bt(e){const{className:t,rowKey:n,rowIndex:r,rowData:o,columns:l,onRow:f,renderRow:u,renderCell:d,onRefCallback:i,...S}=e,{columns:p,descriptor:c}=l,y=ve(c,w=>w.type==="blank"?!1:Y(w.column.fixed)),v=c.findIndex(w=>w.type==="blank"?!1:Q(w.column.fixed)),{className:M,...b}=(f==null?void 0:f(o,r))??{};return P(C.jsx("tr",{...S,...b,className:q("virtual-table-row",t,M),"data-row-index":r,ref:w=>{i==null||i({node:w,rowKey:n,rowIndex:r,rowData:o})},children:c.map((w,N)=>{const{key:j}=w;if(w.type==="blank")return C.jsx("td",{},j);const{column:D}=w;return C.jsx(ot,{className:q(y===N&&"virtual-table-cell-fix-left-last",v===N&&"virtual-table-cell-fix-right-first"),column:D,rowIndex:r,rowData:o,renderCell:d},j)})}),u,{columns:p,rowKey:n,rowIndex:r,rowData:o,columnDescriptor:c})}const Rt=s.memo(bt);function xt(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function Ct(...e){return t=>{e.forEach(n=>xt(n,t))}}function ne(...e){return s.useCallback(Ct(...e),e)}function St(e){const{bodyWrapperRef:t,bodyRootRef:n,bodyRef:r,className:o,style:l,dataSource:f,columns:u,rowKey:d,instance:i,overscan:S,estimateSize:p,getScroller:c,getOffsetTop:y,rowClassName:v,onRow:M,renderBodyWrapper:b,renderBodyRoot:w,renderBody:N,renderBodyContent:j,renderRow:D,renderCell:O}=e,K=i.getInternalHooks(),{startIndex:T,endIndex:F,dataSlice:B,rowHeightByRowKey:h,setRowHeightByRowKey:m,flushLayout:x,rowHeightList:a,topBlank:E,bottomBlank:H}=mt({getOffsetTop:y,rowKey:d,dataSource:f,getScroller:c,estimateSize:p,overscan:S});K.implGetRowVirtualizeState(()=>({startIndex:T,endIndex:F,overscan:S,estimateSize:p})),K.implGetRowHeightMap(()=>h.current);const I=ne(r,z=>{z==null||z.offsetHeight===0||x()}),k=s.useCallback(z=>{const{node:_,rowKey:G}=z;_!=null&&m(G,Ce,_.offsetHeight)},[m]),{columns:L,descriptor:g}=u,V=P(B.map((z,_)=>{const G=he(z,d);return C.jsx(Rt,{className:q(v==null?void 0:v(z,_)),rowKey:G,rowIndex:_+T,rowData:z,columns:u,onRow:M,renderRow:D,renderCell:O,onRefCallback:k},G)}),j,{columns:L,columnDescriptor:g,startRowIndex:T}),A=P(C.jsx("tbody",{ref:I,children:V}),N,{columns:L,columnDescriptor:g,startRowIndex:T}),{setWidthList:ce}=Se(),ge=P(C.jsxs("table",{className:q(o,"virtual-table-body"),style:{...l,paddingBottom:H,paddingTop:E},ref:n,children:[C.jsx(Ke,{columns:g,onColumnSizesMeasure:ce}),A]}),w,{columns:L,columnDescriptor:g,startRowIndex:T}),{listen:ie,notify:ue}=ye(),ae=s.useRef(null);s.useEffect(()=>{const z=ae.current;if(z==null)return;const _="virtual-table-body",G=()=>{ue(_,{scrollLeft:()=>z.scrollLeft,node:z})},te=ie(_,J=>{z.scrollLeft=J});return z.addEventListener("scroll",G),()=>{z.removeEventListener("scroll",G),te()}},[ie,ue]);const we=ne(ae,t);K.implScrollValueByRowIndex(z=>{if(c()==null)return 0;const{stickyHeader:G}=i.getCurrentProps(),{headerWrapper:te}=i.getDOM();let J=0;return G==null||G===!1?J=te==null?0:te.offsetHeight:J=Number.isFinite(G)?G*-1:0,a.current.slice(0,z).reduce((U,Re)=>U+Re,0)+y()+J}),K.implScrollToRow((z,_)=>{i.scrollTo({top:i.getScrollValueByRowIndex(z),behavior:_})});const be=s.useMemo(()=>({setRowHeightByRowKey:m,getRowHeightList:()=>a.current}),[a,m]);return C.jsx(Pe.Provider,{value:be,children:P(C.jsx("div",{ref:we,className:"virtual-table-body-wrapper",children:ge}),b,{columns:L,columnDescriptor:g,startRowIndex:T})})}const kt=e=>{const{className:t,style:n,wrapperRef:r,columns:o,stickyHeader:l,renderHeaderWrapper:f,renderHeaderRoot:u,renderHeader:d,renderHeaderRow:i,renderHeaderCell:S}=e,{columns:p,descriptor:c}=o,y=p[p.length-1],{widthList:v}=Se(),{size:M}=De(),b=ve(c,B=>B.type==="blank"?!1:Y(B.column.fixed)),w=c.findIndex(B=>B.type==="blank"?!1:Q(B.column.fixed)),{listen:N,notify:j}=ye(),D=s.useRef(null);s.useEffect(()=>{const B=D.current;if(B==null)return;const h="virtual-table-header",m=()=>{j(h,{scrollLeft:()=>B.scrollLeft,node:B})},x=N(h,a=>{B.scrollLeft=a});return B.addEventListener("scroll",m),()=>{B.removeEventListener("scroll",m),x()}},[N,j]);const O=P(C.jsx("tr",{children:c.map((B,h)=>{var k;const{key:m}=B;if(B.type==="blank")return C.jsx("th",{"data-blank":!0},m);const{column:x}=B;if(x.colSpan===0)return null;const a=$(y)===m,{className:E,style:H,...I}=((k=x.onHeaderCell)==null?void 0:k.call(x,x,h))??{};return C.jsx(s.Fragment,{children:P(s.createElement("th",{scope:"col",...I,colSpan:x.colSpan,className:q("virtual-table-header-cell",a&&"no-split",x.align!=null&&`virtual-table-align-${x.align}`,je(x.fixed)&&"virtual-table-sticky-cell",b===h&&"virtual-table-cell-fix-left-last",w===h&&"virtual-table-cell-fix-right-first",x.className,E),style:{...H,left:Y(x.fixed)?M.get(m):void 0,right:Q(x.fixed)?M.get(m):void 0}},x.title),S,{column:x,columns:p,columnWidths:v,columnDescriptor:c})},m)})}),i,{columns:p,columnDescriptor:c}),K=P(C.jsx("thead",{className:"virtual-table-thead",children:O}),d,{columns:p,columnDescriptor:c}),T=P(C.jsxs("table",{style:n,children:[C.jsx(Ke,{columns:c}),K]}),u,{columns:p,columnDescriptor:c}),F=ne(r,D);return P(C.jsx("div",{ref:F,className:q("virtual-table-header",t,{"virtual-table-header-sticky":l}),style:{top:Number.isFinite(l)?l:void 0},children:T}),f,{columns:p,columnDescriptor:c})},vt=s.memo(kt);function Ht(e,t){let n=0,r=e.length-1,o=-1;for(;n<=r;){const l=Math.floor((n+r)/2);e[l].right>t?(o=l,r=l-1):n=l+1}if(o!==-1)return e[o]}function Et(e){let t=-1;for(let n=e.length-1;n>=0;n--){const r=e[n];if(Q(r.fixed))t=n;else break}return t}function Mt(e){return ve(e,t=>Y(t.fixed))}function Bt(e){const{estimateSize:t,defaultColumnWidth:n,overscan:r,columns:o,bodyWrapper:l,columnWidths:f,disabled:u=!1}=e,d=Mt(o),i=Et(o),S=d>-1?$(o[d]):null,p=i>-1?$(o[i]):null,[c,y]=s.useState(0),[v,M]=s.useState(0),b=s.useMemo(()=>{if(u)return[];let a=0;return o.map((E,H)=>{const I=$(E),k=f.get(I)??t,L=a+k,g={index:H,width:k,left:a,right:L};return a=L,g})},[o,f,t,u]),w=s.useRef({index:0,width:t,left:0,right:t}),N=We(a=>Ht(b,a)),j=We((a,E)=>{const H=N(a);H!=null&&(w.current=H,y(Math.max(0,H.index-r)),M(H.index+E+r))}),D=s.useRef(0);s.useEffect(()=>{if(u)return;const a=l.current;if(a==null)return;const E=a.offsetWidth;let H=Math.ceil(E/t);const I=()=>{const g=a.scrollLeft;g>D.current?g>w.current.right&&j(g,H):g<w.current.left&&j(g,H),D.current=g};a.addEventListener("scroll",I);let k=0;const L=ke(a,({width:g})=>{if(g===k||g===0)return;k=g;const V=a.scrollLeft;H=Math.ceil(g/t),j(V,H)});return()=>{a.removeEventListener("scroll",I),L()}},[l,t,j,r,N,u]);const O=(a,E)=>b.slice(a,E).reduce((H,I)=>H+I.width,0),K=d>-1?O(0,d+1):0,T=i>-1?O(i):0,F=Math.max(0,O(0,c)-K),B=Math.max(0,O(v)-T),h=s.useMemo(()=>{if(u)return o;const a=[...o.slice(0,d+1),...o.slice(c,v),...o.slice(i)],E=new Set;return a.filter(H=>{const I=$(H);return E.has(I)?!1:(E.add(I),!0)})},[u,o,c,v,d,i]),m=s.useMemo(()=>h.reduce((a,E,H)=>{const I=$(E);let k=E;return k.width==null&&k.minWidth==null&&(k={...k,width:n}),I===S?(a.push({type:"normal",key:I,column:k}),a.push({type:"blank",key:"_blank_left",width:F})):S==null&&H===0?(a.push({type:"blank",key:"_blank_left",width:F}),a.push({type:"normal",key:I,column:k})):I===p?(a.push({type:"blank",key:"_blank_right",width:B}),a.push({type:"normal",key:I,column:k})):p==null&&H===h.length-1?(a.push({type:"normal",key:I,column:k}),a.push({type:"blank",key:"_blank_right",width:B})):a.push({type:"normal",key:I,column:k}),a},[]),[h,S,p,F,B,n]);return{columns:s.useMemo(()=>({columns:h,descriptor:m}),[h,m]),columnSlice:h,lastFixedLeftIndex:d,firstFixedRightIndex:i}}function It(e,t){const{className:n,style:r,children:o,hasFixedLeftColumn:l,hasFixedRightColumn:f,renderRoot:u,bodyScrollContainer:d}=e,i=s.useRef(null),[S,p]=s.useState(!1),[c,y]=s.useState(!1),{listen:v}=ye();s.useEffect(()=>{if(!l&&!f)return;const b=N=>{const{scrollLeft:j,clientWidth:D,scrollWidth:O}=N;l&&p(j!==0),f&&y(!(j+D>=O))},w=d.current;return w!=null&&b(w),v("__root",(N,j)=>{b(j)})},[d,l,f,v]);const M=ne(t,i);return P(C.jsx("div",{ref:M,className:q("virtual-table",S&&"virtual-table-has-fix-left",c&&"virtual-table-has-fix-right",n),style:r,children:o}),u,{})}const Tt=s.forwardRef(It);function Wt(e,t){const{bodyRootRef:n,instance:r,className:o,style:l,tableBodyClassName:f,tableBodyStyle:u,columns:d,dataSource:i,rowKey:S="key",estimatedRowHeight:p=46,estimatedColumnWidth:c,overscanRows:y=5,overscanColumns:v=3,stickyHeader:M,defaultColumnWidth:b=100,pipeline:w=le.defaultPipeline,rowClassName:N,onRow:j,getOffsetTop:D,virtualHeader:O=!0}=e,K=yt(r),T=K.getInternalHooks();T.implGetCurrentProps(()=>e);const F=s.useRef(null),B=s.useRef(null),h=s.useRef(null),m=s.useRef(null),x=ne(m,n),a=s.useRef(null),E=s.useCallback(()=>{const R=F.current;if(R!=null)return ct(R)},[]),H=s.useCallback(()=>{if(typeof D=="function")return D();const R=E(),W=F.current;if(W==null||R==null||R===W)return 0;if(pe(R)||Oe(R)){const X=W.getBoundingClientRect().top;return window.scrollY+X}return ut(W,R)},[D,E]),{dataSource:I,columns:k,rowKey:L,rowClassName:g,render:V,renderRoot:A,renderContent:ce,renderHeaderWrapper:ge,renderHeaderRoot:ie,renderHeader:ue,renderHeaderRow:ae,renderHeaderCell:we,renderBodyWrapper:be,renderBodyRoot:z,renderBody:_,renderBodyContent:G,renderRow:te,renderCell:J,onRow:re}=w.use({dataSource:i,rowKey:S,columns:d,estimatedRowHeight:p,headerWrapperRef:B,bodyWrapperRef:h,bodyRootRef:m,bodyRef:a,rootRef:F,getOffsetTop:H,getScroller:E,instance:K});T.implGetColumns(()=>k),T.implGetDataSource(()=>I);const[U,Re]=s.useState(()=>new Map),de=s.useRef(U),He=s.useCallback(R=>{const W=new Map(de.current);R.forEach((X,ee)=>{W.set(ee,X)}),de.current=W,Re(W)},[]);T.implGetColumnWidths(()=>de.current),T.implGetColumnWidthByKey(R=>de.current.get(R));const Ve=s.useMemo(()=>({widthList:U,setWidthList:He}),[U,He]),{columns:Z}=Bt({estimateSize:c??b,defaultColumnWidth:b,overscan:v,columns:k,bodyWrapper:h,columnWidths:U,disabled:c==null}),Ae=s.useCallback((R,W)=>q(N==null?void 0:N(R,W),g==null?void 0:g(R,W)),[N,g]),$e=s.useCallback((R,W)=>({...j==null?void 0:j(R,W),...re==null?void 0:re(R,W)}),[re,j]),qe=k.some(R=>Y(R.fixed)),Ye=k.some(R=>Q(R.fixed)),Ee=s.useMemo(()=>({columns:k,descriptor:k.map(R=>({key:$(R),type:"normal",column:R}))}),[k]),Qe=s.useMemo(()=>O?Z:Ee,[O,Ee,Z]);T.implGetDOM(()=>({root:F.current,headerWrapper:B.current,bodyWrapper:h.current,bodyRoot:m.current,body:a.current})),T.implScrollTo(R=>{var ee;const{left:W,top:X}=R;if(W!=null&&((ee=h.current)==null||ee.scrollTo(R)),X!=null){const oe=E();if(oe==null){console.error("The scroller DOM is not obtained, and scrolling is not possible.");return}oe.scrollTo(R)}}),T.implScrollValueByColumnKey(R=>{let W=0,X=0;for(const ee of k){const oe=$(ee),Me=U.get(oe)??0;if(Y(ee.fixed)&&(X+=Me),oe===R)break;W+=Me}return W-X}),T.implScrollToColumn((R,W)=>{K.scrollTo({left:K.getScrollValueByColumnKey(R),behavior:W})}),T.implGetColumnByKey(R=>k.find(W=>$(W)===R)),T.implGetColumnByIndex(R=>k[R]),T.implGetColumnKeyByIndex(R=>{const W=K.getColumnByIndex(R);if(W!=null)return $(W)});const Ue=P(C.jsxs(C.Fragment,{children:[C.jsx(vt,{wrapperRef:B,columns:Qe,stickyHeader:M,renderHeaderWrapper:ge,renderHeaderRoot:ie,renderHeader:ue,renderHeaderRow:ae,renderHeaderCell:we}),C.jsx(St,{instance:K,bodyWrapperRef:h,bodyRootRef:x,bodyRef:a,className:f,style:u,columns:Z,rowKey:L,dataSource:I,overscan:y,estimateSize:p,getScroller:E,getOffsetTop:H,rowClassName:Ae,onRow:$e,renderBodyWrapper:be,renderBodyRoot:z,renderBody:_,renderBodyContent:G,renderRow:te,renderCell:J})]}),ce,{columns:Z.columns,columnDescriptor:Z.descriptor}),Xe=ne(F,t),Je=P(C.jsx(Tt,{ref:Xe,className:o,style:l,hasFixedLeftColumn:qe,hasFixedRightColumn:Ye,renderRoot:A,bodyScrollContainer:h,children:Ue}),V,{columns:Z.columns,columnDescriptor:Z.descriptor});return C.jsx(Ne.Provider,{value:Ve,children:C.jsx(tt,{columns:k,children:C.jsx(dt,{getScroller:E,root:F,children:C.jsx(ft,{children:Je})})})})}const _t=s.memo(s.forwardRef(Wt));function Lt(){const e=document.createElement("div");e.style.position="absolute",e.style.width="100px",e.style.height="100px",e.style.overflow="scroll",e.style.top="-9999px",document.body.appendChild(e);const t=e.offsetWidth-e.clientWidth,n=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),{width:t,height:n}}const jt=e=>{const{className:t,style:n,bottom:r,zIndex:o,bodyRef:l}=e,{listen:f,notify:u}=ye(),d=s.useRef(null);s.useEffect(()=>{const c=d.current;if(c==null)return;const y="virtual-table-sticky-bottom-scroll",v=()=>{u(y,{scrollLeft:()=>c.scrollLeft,node:c})},M=f(y,b=>{c.scrollLeft=b});return c.addEventListener("scroll",v),()=>{c.removeEventListener("scroll",v),M()}},[f,u]);const[i,S]=s.useState(0);s.useEffect(()=>{const c=l.current;if(c!=null)return ke(c,({width:y})=>{y!==0&&S(y)})},[l]);const[p]=s.useState(Lt);return C.jsx("div",{className:q("virtual-table-sticky-scroll",t),style:{...n,"--virtual-table-sticky-scroll-bottom":Number.isFinite(r)?`${r}px`:r,paddingTop:p.height>0?0:15,marginTop:p.height>0?0:p.height*-1,height:p.height+1,zIndex:o},ref:d,children:C.jsx("div",{className:"virtual-table-sticky-scroll-bar",style:{width:i}})})};function Nt(e,t){const{bodyRootRef:n}=e;return{...e,renderContent(r){return C.jsxs(C.Fragment,{children:[r,C.jsx(jt,{bodyRef:n,...t})]})}}}const Gt=gt(Nt);export{Ke as C,_t as V,yt as a,gt as b,q as c,Kt as d,Ft as e,Ie as f,$ as g,Gt as h,We as i,je as j,he as k,De as l,Q as m,Y as n,ve as o,ke as p,ye as q,Lt as r,ne as s,Ot as u};
